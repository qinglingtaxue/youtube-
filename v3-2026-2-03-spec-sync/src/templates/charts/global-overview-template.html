<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å…¨å±€è®¤è¯† - ä¿¡æ¯åˆ†å¸ƒå¯è§†åŒ–</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="chart-styles.css">
</head>
<body>
    <div class="header">
        <div>
            <h1>å…¨å±€è®¤è¯†</h1>
            <div class="meta">å»ºç«‹å¯¹æ•°æ®ä¿¡æ¯åˆ†å¸ƒçš„ç›´è§‚ç†è§£</div>
        </div>
    </div>

    <!-- å­æ ‡ç­¾å¯¼èˆª -->
    <div class="tabs">
        <div class="tab active" onclick="showSubTab('market-size')">ğŸ“Š å¸‚åœºè§„æ¨¡</div>
        <div class="tab" onclick="showSubTab('content-dist')">ğŸ“ å†…å®¹åˆ†å¸ƒ</div>
        <div class="tab" onclick="showSubTab('channel-landscape')">ğŸ‘¥ é¢‘é“æ ¼å±€</div>
        <div class="tab" onclick="showSubTab('time-dist')">ğŸ“… æ—¶é—´åˆ†å¸ƒ</div>
    </div>

    <div class="content">
        <!-- ========================================
             å­æ ‡ç­¾ 1: å¸‚åœºè§„æ¨¡ - å›ç­”"æœ‰å¤šå¤§"
             ======================================== -->
        <div id="market-size" class="tab-content active">
            <!-- æ ¸å¿ƒæ•°å­—å¡ç‰‡ -->
            <div class="cards">
                <div class="card highlight">
                    <div class="card-label">è§†é¢‘æ€»æ•°</div>
                    <div class="card-value" id="stat-total-videos">-</div>
                    <div class="card-sub">æ ·æœ¬è¦†ç›–èŒƒå›´</div>
                </div>
                <div class="card">
                    <div class="card-label">é¢‘é“æ•°</div>
                    <div class="card-value" id="stat-total-channels">-</div>
                    <div class="card-sub">å‚ä¸ç«äº‰çš„é¢‘é“</div>
                </div>
                <div class="card">
                    <div class="card-label">æ€»æ’­æ”¾é‡</div>
                    <div class="card-value" id="stat-total-views">-</div>
                    <div class="card-sub">ç´¯è®¡æ’­æ”¾</div>
                </div>
                <div class="card">
                    <div class="card-label">å¹³å‡æ’­æ”¾é‡</div>
                    <div class="card-value" id="stat-avg-views">-</div>
                    <div class="card-sub" id="stat-median-views">ä¸­ä½æ•°: -</div>
                </div>
            </div>

            <div class="grid-2">
                <!-- æ’­æ”¾é‡åˆ†å¸ƒç›´æ–¹å›¾ -->
                <div class="chart-container">
                    <div class="chart-title">ğŸ“Š æ’­æ”¾é‡åˆ†å¸ƒï¼ˆé•¿å°¾åˆ†å¸ƒï¼‰</div>
                    <div class="chart-wrapper">
                        <canvas id="viewDistributionChart"></canvas>
                    </div>
                </div>

                <!-- è§†é¢‘æ•°é‡æ—¶é—´è¶‹åŠ¿ -->
                <div class="chart-container">
                    <div class="chart-title">ğŸ“ˆ è§†é¢‘æ•°é‡è¶‹åŠ¿ï¼ˆæŒ‰æœˆï¼‰</div>
                    <div class="chart-wrapper">
                        <canvas id="videoTrendChart"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- ========================================
             å­æ ‡ç­¾ 2: å†…å®¹åˆ†å¸ƒ - å›ç­”"ä»€ä¹ˆæ ·"
             ======================================== -->
        <div id="content-dist" class="tab-content">
            <div class="grid-2">
                <!-- æ—¶é•¿åˆ†å¸ƒæ¡å½¢å›¾ -->
                <div class="chart-container">
                    <div class="chart-title">â±ï¸ æ—¶é•¿åˆ†å¸ƒï¼ˆYouTube åŸç”Ÿåˆ†æ¡£ï¼‰</div>
                    <div class="chart-wrapper">
                        <canvas id="durationDistChart"></canvas>
                    </div>
                </div>

                <!-- æ’­æ”¾é‡åˆ†å±‚é¥¼å›¾ -->
                <div class="chart-container">
                    <div class="chart-title">ğŸ¯ æ’­æ”¾é‡åˆ†å±‚</div>
                    <div class="chart-wrapper">
                        <canvas id="viewTiersChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- å››è±¡é™æ•£ç‚¹å›¾ -->
            <div class="chart-container">
                <div class="chart-title">ğŸ“ˆ æ’­æ”¾é‡ Ã— ç‚¹èµç‡ å››è±¡é™å›¾</div>
                <div class="chart-wrapper" style="height: 400px;">
                    <canvas id="quadrantChart"></canvas>
                </div>
            </div>
        </div>

        <!-- ========================================
             å­æ ‡ç­¾ 3: é¢‘é“æ ¼å±€ - å›ç­”"è°åœ¨åš"
             ======================================== -->
        <div id="channel-landscape" class="tab-content">
            <!-- é¢‘é“æ¦‚è§ˆå¡ç‰‡ -->
            <div class="cards">
                <div class="card highlight">
                    <div class="card-label">æ€»é¢‘é“æ•°</div>
                    <div class="card-value" id="stat-channels">-</div>
                </div>
                <div class="card">
                    <div class="card-label">Top10 é›†ä¸­åº¦</div>
                    <div class="card-value" id="stat-top10-share">-</div>
                    <div class="card-sub">å¤´éƒ¨10ä¸ªé¢‘é“å æ€»æ’­æ”¾é‡</div>
                </div>
                <div class="card">
                    <div class="card-label">Top20 é›†ä¸­åº¦</div>
                    <div class="card-value" id="stat-top20-share">-</div>
                </div>
                <div class="card">
                    <div class="card-label">å•è§†é¢‘é¢‘é“</div>
                    <div class="card-value" id="stat-single-video-channels">-</div>
                    <div class="card-sub" id="stat-single-video-pct">å æ¯” -</div>
                </div>
            </div>

            <div class="grid-2">
                <!-- é¢‘é“è§„æ¨¡åˆ†å¸ƒ -->
                <div class="chart-container">
                    <div class="chart-title">ğŸ“Š é¢‘é“è§„æ¨¡åˆ†å¸ƒ</div>
                    <div class="chart-wrapper">
                        <canvas id="channelSizeChart"></canvas>
                    </div>
                </div>

                <!-- å¸‚åœºé›†ä¸­åº¦ -->
                <div class="chart-container">
                    <div class="chart-title">ğŸ“ˆ å¸‚åœºé›†ä¸­åº¦</div>
                    <div class="chart-wrapper">
                        <canvas id="concentrationChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- å¤´éƒ¨é¢‘é“è¡¨æ ¼ -->
            <div class="table-container">
                <div class="chart-title">ğŸ† å¤´éƒ¨é¢‘é“ Top 10</div>
                <table>
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>é¢‘é“åç§°</th>
                            <th>è§†é¢‘æ•°</th>
                            <th>æ€»æ’­æ”¾</th>
                            <th>å¹³å‡æ’­æ”¾</th>
                        </tr>
                    </thead>
                    <tbody id="topChannelsBody">
                        <!-- åŠ¨æ€å¡«å…… -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- ========================================
             å­æ ‡ç­¾ 4: æ—¶é—´åˆ†å¸ƒ - å›ç­”"ä»€ä¹ˆæ—¶å€™"
             ======================================== -->
        <div id="time-dist" class="tab-content">
            <!-- æ—¶é—´æ¦‚è§ˆå¡ç‰‡ -->
            <div class="cards">
                <div class="card highlight">
                    <div class="card-label">æ•°æ®æ—¶é—´è·¨åº¦</div>
                    <div class="card-value" id="stat-date-span">-</div>
                    <div class="card-sub" id="stat-date-range">-</div>
                </div>
                <div class="card">
                    <div class="card-label">æœ‰æ—¥æœŸè§†é¢‘</div>
                    <div class="card-value" id="stat-videos-with-date">-</div>
                    <div class="card-sub" id="stat-date-coverage">å æ¯” -</div>
                </div>
                <div class="card">
                    <div class="card-label">7å¤©å†…</div>
                    <div class="card-value" id="stat-7d">-</div>
                </div>
                <div class="card">
                    <div class="card-label">30å¤©å†…</div>
                    <div class="card-value" id="stat-30d">-</div>
                </div>
            </div>

            <!-- å‘å¸ƒæ—¥æœŸåˆ†å¸ƒ -->
            <div class="chart-container">
                <div class="chart-title">ğŸ“… å‘å¸ƒæ—¶é—´åˆ†å¸ƒ</div>
                <div class="chart-wrapper">
                    <canvas id="timeDistChart"></canvas>
                </div>
            </div>

            <div class="grid-2">
                <!-- æ˜ŸæœŸåˆ†å¸ƒ -->
                <div class="chart-container">
                    <div class="chart-title">ğŸ“† æ˜ŸæœŸåˆ†å¸ƒ</div>
                    <div class="chart-wrapper">
                        <canvas id="weekdayChart"></canvas>
                    </div>
                </div>

                <!-- æ—¶é—´çª—å£å¯¹æ¯” -->
                <div class="chart-container">
                    <div class="chart-title">â° æ—¶é—´çª—å£å¯¹æ¯”</div>
                    <div class="chart-wrapper">
                        <canvas id="timeWindowChart"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ============================================
        // ç¤ºä¾‹æ•°æ® (å®é™…ä½¿ç”¨æ—¶æ›¿æ¢ä¸ºçœŸå®æ•°æ®)
        // ============================================
        const DATA = {
            // å¸‚åœºè§„æ¨¡
            total_videos: 1020,
            total_views: 65304549,
            avg_views: 64024,
            median_views: 2330,
            total_channels: 476,

            // æ’­æ”¾é‡åˆ†å¸ƒ (ç›´æ–¹å›¾æ•°æ®)
            view_distribution: {
                bins: ['<1K', '1K-10K', '10K-100K', '100K-1M', '>1M'],
                counts: [402, 295, 204, 102, 17]
            },

            // è§†é¢‘è¶‹åŠ¿ (æŒ‰æœˆ)
            video_trend: {
                labels: ['2024-07', '2024-08', '2024-09', '2024-10', '2024-11', '2024-12'],
                counts: [15, 22, 18, 25, 30, 28]
            },

            // æ—¶é•¿åˆ†å¸ƒ (YouTube åŸç”Ÿåˆ†æ¡£)
            duration_dist: {
                labels: ['< 4åˆ†é’Ÿ', '4-20åˆ†é’Ÿ', '> 20åˆ†é’Ÿ'],
                counts: [795, 158, 67]
            },

            // æ’­æ”¾é‡åˆ†å±‚
            view_tiers: {
                labels: ['100ä¸‡+', '10-100ä¸‡', '1-10ä¸‡', '1K-1ä¸‡', '<1K'],
                counts: [17, 102, 204, 295, 402]
            },

            // é¢‘é“æ•°æ®
            top10_share: 62.6,
            top20_share: 81.0,
            channel_size_dist: {
                labels: ['å•è§†é¢‘', '2-4ä¸ª', '5-9ä¸ª', '10+ä¸ª'],
                counts: [363, 87, 15, 11]
            },
            top_channels: [
                { channel: 'èµµå®‡æ˜Šæ•™æˆ', video_count: 141, total_views: 9537436, avg_views: 67641 },
                { channel: 'å¥åº·2.0', video_count: 17, total_views: 6338660, avg_views: 372862 },
                { channel: 'é¢¨å‚³åª’', video_count: 2, total_views: 6336754, avg_views: 3168377 },
            ],

            // æ—¶é—´æ•°æ®
            date_span: '9å¹´5ä¸ªæœˆ',
            date_earliest: '2016-07-19',
            date_latest: '2025-12-23',
            videos_with_date: 100,
            date_coverage: 9.8,
            time_buckets: {
                labels: ['24hå†…', '7å¤©å†…', '30å¤©å†…', '90å¤©å†…', '6ä¸ªæœˆå†…', '1å¹´å†…', '1å¹´ä»¥ä¸Š'],
                values: [0, 0, 1, 14, 27, 48, 52]
            },
            weekday_dist: [12, 15, 10, 15, 25, 12, 11]
        };

        // ============================================
        // å­æ ‡ç­¾åˆ‡æ¢
        // ============================================
        function showSubTab(tabId) {
            // æ›´æ–°æ ‡ç­¾çŠ¶æ€
            document.querySelectorAll('.tabs .tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));

            event.target.classList.add('active');
            document.getElementById(tabId).classList.add('active');

            // åˆå§‹åŒ–å¯¹åº”å›¾è¡¨
            initCharts(tabId);
        }

        // ============================================
        // å›¾è¡¨åˆå§‹åŒ–
        // ============================================
        const charts = {};

        function initCharts(tabId) {
            switch(tabId) {
                case 'market-size':
                    initMarketSizeCharts();
                    break;
                case 'content-dist':
                    initContentDistCharts();
                    break;
                case 'channel-landscape':
                    initChannelCharts();
                    break;
                case 'time-dist':
                    initTimeCharts();
                    break;
            }
        }

        function initMarketSizeCharts() {
            // æ›´æ–°ç»Ÿè®¡å¡ç‰‡
            document.getElementById('stat-total-videos').textContent = DATA.total_videos.toLocaleString();
            document.getElementById('stat-total-channels').textContent = DATA.total_channels.toLocaleString();
            document.getElementById('stat-total-views').textContent = DATA.total_views.toLocaleString();
            document.getElementById('stat-avg-views').textContent = DATA.avg_views.toLocaleString();
            document.getElementById('stat-median-views').textContent = `ä¸­ä½æ•°: ${DATA.median_views.toLocaleString()}`;

            // æ’­æ”¾é‡åˆ†å¸ƒç›´æ–¹å›¾
            if (!charts.viewDistributionChart) {
                const ctx = document.getElementById('viewDistributionChart');
                charts.viewDistributionChart = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: DATA.view_distribution.bins,
                        datasets: [{
                            label: 'è§†é¢‘æ•°é‡',
                            data: DATA.view_distribution.counts,
                            backgroundColor: '#667eea'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: { legend: { display: false } }
                    }
                });
            }

            // è§†é¢‘è¶‹åŠ¿æŠ˜çº¿å›¾
            if (!charts.videoTrendChart) {
                const ctx = document.getElementById('videoTrendChart');
                charts.videoTrendChart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: DATA.video_trend.labels,
                        datasets: [{
                            label: 'è§†é¢‘æ•°é‡',
                            data: DATA.video_trend.counts,
                            borderColor: '#667eea',
                            backgroundColor: 'rgba(102, 126, 234, 0.1)',
                            fill: true,
                            tension: 0.3
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false
                    }
                });
            }
        }

        function initContentDistCharts() {
            // æ—¶é•¿åˆ†å¸ƒ
            if (!charts.durationDistChart) {
                const ctx = document.getElementById('durationDistChart');
                charts.durationDistChart = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: DATA.duration_dist.labels,
                        datasets: [{
                            label: 'è§†é¢‘æ•°é‡',
                            data: DATA.duration_dist.counts,
                            backgroundColor: ['#667eea', '#764ba2', '#f093fb']
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: { legend: { display: false } }
                    }
                });
            }

            // æ’­æ”¾é‡åˆ†å±‚é¥¼å›¾
            if (!charts.viewTiersChart) {
                const ctx = document.getElementById('viewTiersChart');
                charts.viewTiersChart = new Chart(ctx, {
                    type: 'doughnut',
                    data: {
                        labels: DATA.view_tiers.labels,
                        datasets: [{
                            data: DATA.view_tiers.counts,
                            backgroundColor: ['#f5576c', '#f093fb', '#667eea', '#4facfe', '#00f2fe']
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: { legend: { position: 'right' } }
                    }
                });
            }

            // å››è±¡é™æ•£ç‚¹å›¾ (ç¤ºä¾‹æ•°æ®)
            if (!charts.quadrantChart) {
                const ctx = document.getElementById('quadrantChart');
                // ç”Ÿæˆç¤ºä¾‹æ•£ç‚¹æ•°æ®
                const scatterData = [];
                for (let i = 0; i < 50; i++) {
                    scatterData.push({
                        x: Math.random() * 1000000,
                        y: Math.random() * 10
                    });
                }

                charts.quadrantChart = new Chart(ctx, {
                    type: 'scatter',
                    data: {
                        datasets: [{
                            label: 'è§†é¢‘',
                            data: scatterData,
                            backgroundColor: 'rgba(102, 126, 234, 0.6)',
                            pointRadius: 5
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            x: { title: { display: true, text: 'æ’­æ”¾é‡' } },
                            y: { title: { display: true, text: 'ç‚¹èµç‡ (%)' } }
                        }
                    }
                });
            }
        }

        function initChannelCharts() {
            // æ›´æ–°ç»Ÿè®¡å¡ç‰‡
            document.getElementById('stat-channels').textContent = DATA.total_channels.toLocaleString();
            document.getElementById('stat-top10-share').textContent = DATA.top10_share + '%';
            document.getElementById('stat-top20-share').textContent = DATA.top20_share + '%';
            document.getElementById('stat-single-video-channels').textContent = DATA.channel_size_dist.counts[0].toLocaleString();
            document.getElementById('stat-single-video-pct').textContent = `å  ${(DATA.channel_size_dist.counts[0] / DATA.total_channels * 100).toFixed(1)}%`;

            // é¢‘é“è§„æ¨¡åˆ†å¸ƒ
            if (!charts.channelSizeChart) {
                const ctx = document.getElementById('channelSizeChart');
                charts.channelSizeChart = new Chart(ctx, {
                    type: 'doughnut',
                    data: {
                        labels: DATA.channel_size_dist.labels,
                        datasets: [{
                            data: DATA.channel_size_dist.counts,
                            backgroundColor: ['#667eea', '#764ba2', '#f093fb', '#f5576c']
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: { legend: { position: 'right' } }
                    }
                });
            }

            // å¸‚åœºé›†ä¸­åº¦
            if (!charts.concentrationChart) {
                const ctx = document.getElementById('concentrationChart');
                charts.concentrationChart = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: ['Top 10', 'Top 20', 'å…¶ä»–'],
                        datasets: [{
                            label: 'æ’­æ”¾é‡å æ¯” (%)',
                            data: [DATA.top10_share, DATA.top20_share - DATA.top10_share, 100 - DATA.top20_share],
                            backgroundColor: ['#f5576c', '#f093fb', '#e0e0e0']
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: { legend: { display: false } }
                    }
                });
            }

            // å¡«å……å¤´éƒ¨é¢‘é“è¡¨æ ¼
            const tbody = document.getElementById('topChannelsBody');
            tbody.innerHTML = DATA.top_channels.map((ch, i) => `
                <tr>
                    <td>${i + 1}</td>
                    <td>${ch.channel}</td>
                    <td>${ch.video_count}</td>
                    <td>${ch.total_views.toLocaleString()}</td>
                    <td>${ch.avg_views.toLocaleString()}</td>
                </tr>
            `).join('');
        }

        function initTimeCharts() {
            // æ›´æ–°ç»Ÿè®¡å¡ç‰‡
            document.getElementById('stat-date-span').textContent = DATA.date_span;
            document.getElementById('stat-date-range').textContent = `${DATA.date_earliest} ~ ${DATA.date_latest}`;
            document.getElementById('stat-videos-with-date').textContent = DATA.videos_with_date.toLocaleString();
            document.getElementById('stat-date-coverage').textContent = `å æ¯” ${DATA.date_coverage}%`;
            document.getElementById('stat-7d').textContent = DATA.time_buckets.values[1];
            document.getElementById('stat-30d').textContent = DATA.time_buckets.values[2];

            // æ—¶é—´åˆ†å¸ƒ
            if (!charts.timeDistChart) {
                const ctx = document.getElementById('timeDistChart');
                charts.timeDistChart = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: DATA.time_buckets.labels,
                        datasets: [{
                            label: 'è§†é¢‘æ•°é‡',
                            data: DATA.time_buckets.values,
                            backgroundColor: '#667eea'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: { legend: { display: false } }
                    }
                });
            }

            // æ˜ŸæœŸåˆ†å¸ƒé›·è¾¾å›¾
            if (!charts.weekdayChart) {
                const ctx = document.getElementById('weekdayChart');
                charts.weekdayChart = new Chart(ctx, {
                    type: 'radar',
                    data: {
                        labels: ['å‘¨ä¸€', 'å‘¨äºŒ', 'å‘¨ä¸‰', 'å‘¨å››', 'å‘¨äº”', 'å‘¨å…­', 'å‘¨æ—¥'],
                        datasets: [{
                            label: 'å‘å¸ƒæ•°é‡',
                            data: DATA.weekday_dist,
                            borderColor: '#667eea',
                            backgroundColor: 'rgba(102, 126, 234, 0.2)'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false
                    }
                });
            }

            // æ—¶é—´çª—å£å¯¹æ¯”
            if (!charts.timeWindowChart) {
                const ctx = document.getElementById('timeWindowChart');
                charts.timeWindowChart = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: DATA.time_buckets.labels,
                        datasets: [{
                            label: 'è§†é¢‘å æ¯” (%)',
                            data: DATA.time_buckets.values.map(v => (v / DATA.videos_with_date * 100).toFixed(1)),
                            backgroundColor: '#764ba2'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        indexAxis: 'y',
                        plugins: { legend: { display: false } }
                    }
                });
            }
        }

        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–ç¬¬ä¸€ä¸ªæ ‡ç­¾
        document.addEventListener('DOMContentLoaded', function() {
            initCharts('market-size');
        });
    </script>
</body>
</html>
