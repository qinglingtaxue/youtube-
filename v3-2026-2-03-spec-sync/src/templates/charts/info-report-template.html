<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¿¡æ¯æŠ¥å‘Š - æ¨ç†é“¾å¼æŠ¥å‘Š</title>
    <link rel="stylesheet" href="chart-styles.css">
    <style>
        /* æŠ¥å‘Šä¸“ç”¨æ ·å¼ */

        .report-body {
            max-width: 800px;
            margin: 0 auto;
            padding: 30px 40px;
        }

        /* å‡è®¾åŒºå— */
        .hypothesis {
            background: #667eea08;
            border: 2px solid #667eea25;
            border-radius: 12px;
            padding: 20px 24px;
            margin-bottom: 32px;
        }
        .hypothesis-label {
            font-size: 11px;
            font-weight: 700;
            color: #667eea;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 8px;
        }
        .hypothesis-text {
            font-size: 17px;
            font-weight: 600;
            color: #333;
            line-height: 1.6;
        }
        .hypothesis-meta {
            font-size: 12px;
            color: #888;
            margin-top: 10px;
        }

        /* ç»“è®ºå¡ç‰‡ */
        .conclusion-card {
            border: 1px solid #e8e8e8;
            border-radius: 12px;
            margin-bottom: 16px;
            overflow: hidden;
            transition: box-shadow 0.2s;
        }
        .conclusion-card:hover {
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
        }
        .conclusion-header {
            padding: 18px 22px;
            cursor: pointer;
            display: flex;
            align-items: flex-start;
            gap: 14px;
        }
        .conclusion-number {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            font-size: 14px;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            margin-top: 2px;
        }
        .conclusion-main {
            flex: 1;
        }
        .conclusion-title {
            font-size: 15px;
            font-weight: 600;
            color: #333;
            line-height: 1.5;
        }
        .conclusion-summary {
            font-size: 13px;
            color: #666;
            margin-top: 6px;
            line-height: 1.6;
        }
        .conclusion-tags {
            display: flex;
            gap: 6px;
            margin-top: 10px;
            flex-wrap: wrap;
        }
        .conclusion-tag {
            font-size: 11px;
            padding: 2px 8px;
            border-radius: 10px;
        }
        .tag-source {
            background: #e8f4fd;
            color: #1a73e8;
        }
        .tag-confidence {
            background: #fef3e2;
            color: #b8860b;
        }
        .tag-pattern {
            background: #e8f5e9;
            color: #2e7d32;
        }
        .conclusion-expand {
            font-size: 12px;
            color: #667eea;
            flex-shrink: 0;
            margin-top: 8px;
            cursor: pointer;
            user-select: none;
        }

        /* å±•å¼€çš„æ•°æ®é¢æ¿ */
        .conclusion-detail {
            border-top: 1px solid #f0f0f0;
            padding: 18px 22px;
            background: #fafbfc;
            display: none;
        }
        .conclusion-detail.expanded {
            display: block;
        }
        .detail-section {
            margin-bottom: 16px;
        }
        .detail-section:last-child {
            margin-bottom: 0;
        }
        .detail-label {
            font-size: 11px;
            font-weight: 600;
            color: #888;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 8px;
        }
        .detail-data-ref {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }
        .data-ref-chip {
            font-size: 12px;
            padding: 6px 12px;
            border-radius: 8px;
            background: white;
            border: 1px solid #ddd;
            display: flex;
            align-items: center;
            gap: 6px;
            cursor: pointer;
            transition: all 0.2s;
        }
        .data-ref-chip:hover {
            border-color: #667eea;
            background: #667eea05;
        }
        .data-ref-icon {
            font-size: 14px;
        }

        /* æ¨ç†æ­¥éª¤ */
        .reasoning-steps {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        .reasoning-step {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            font-size: 13px;
            color: #555;
            padding: 6px 0;
        }
        .step-icon {
            font-size: 16px;
            min-width: 22px;
        }
        .step-text {
            flex: 1;
            line-height: 1.5;
        }
        .step-weight {
            font-size: 11px;
            color: #888;
            flex-shrink: 0;
            min-width: 36px;
            text-align: right;
        }

        /* ç»¼åˆç»“è®º */
        .final-conclusion {
            background: linear-gradient(135deg, #667eea08, #764ba208);
            border: 2px solid #667eea35;
            border-radius: 12px;
            padding: 24px;
            margin-top: 8px;
        }
        .final-label {
            font-size: 12px;
            font-weight: 700;
            color: #667eea;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 12px;
        }
        .final-text {
            font-size: 17px;
            font-weight: 600;
            color: #333;
            line-height: 1.6;
            margin-bottom: 16px;
        }
        .final-points {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .final-points li {
            font-size: 14px;
            color: #444;
            padding: 6px 0;
            display: flex;
            align-items: flex-start;
            gap: 8px;
            line-height: 1.5;
        }
        .final-arrow {
            color: #667eea;
            font-weight: bold;
            flex-shrink: 0;
        }

        /* è¡ŒåŠ¨å…¥å£ */
        .action-cta {
            margin-top: 24px;
            padding-top: 20px;
            border-top: 1px solid #eee;
            display: flex;
            gap: 12px;
        }
        .cta-btn {
            flex: 1;
            padding: 14px;
            border-radius: 10px;
            text-align: center;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            border: none;
            transition: all 0.2s;
        }
        .cta-primary {
            background: #667eea;
            color: white;
        }
        .cta-primary:hover {
            background: #5a6fd6;
        }
        .cta-secondary {
            background: white;
            color: #667eea;
            border: 1.5px solid #667eea;
        }
        .cta-secondary:hover {
            background: #667eea08;
        }

        /* ç»“è®ºè®¡æ•° */
        .conclusion-count {
            text-align: center;
            font-size: 12px;
            color: #999;
            padding: 8px 0 20px;
        }
    </style>
</head>
<body>
    <div class="header">
        <div>
            <h1>ä¿¡æ¯æŠ¥å‘Š</h1>
            <div class="meta" id="report-meta">æ¨ç†é“¾å¼åˆ†ææŠ¥å‘Š</div>
        </div>
    </div>

    <div class="report-body">

        <!-- ç ”ç©¶å‡è®¾ -->
        <div class="hypothesis">
            <div class="hypothesis-label">ç ”ç©¶å‡è®¾</div>
            <div class="hypothesis-text" id="hypothesis-text"></div>
            <div class="hypothesis-meta" id="hypothesis-meta"></div>
        </div>

        <!-- ç»“è®ºåˆ—è¡¨ï¼ˆåŠ¨æ€å¡«å……ï¼‰ -->
        <div id="conclusions-list"></div>

        <div class="conclusion-count" id="conclusion-count"></div>

        <!-- ç»¼åˆç»“è®º -->
        <div class="final-conclusion">
            <div class="final-label">ç»¼åˆç»“è®º</div>
            <div class="final-text" id="final-text"></div>
            <ul class="final-points" id="final-points"></ul>
        </div>

        <!-- è¡ŒåŠ¨å…¥å£ -->
        <div class="action-cta">
            <button class="cta-btn cta-primary" onclick="exportReport()">ğŸ“¥ å¯¼å‡ºæŠ¥å‘Š (Markdown)</button>
            <button class="cta-btn cta-secondary" onclick="goToActions()">ğŸ¯ æŸ¥çœ‹è¡ŒåŠ¨æ¸…å• â†’</button>
        </div>

    </div>

    <script>
        // ============================================
        // ç¤ºä¾‹æ•°æ® (å®é™…ä½¿ç”¨æ—¶æ›¿æ¢ä¸ºçœŸå®æ•°æ®)
        // ============================================
        const REPORT_DATA = {
            // æŠ¥å‘Šå…ƒä¿¡æ¯
            meta: {
                sample_videos: 2340,
                sample_channels: 186,
                report_date: '2026-02-04',
                total_patterns: 42
            },

            // ç ”ç©¶å‡è®¾
            hypothesis: {
                text: 'åœ¨ã€Œå…»ç”Ÿã€èµ›é“ä¸­ï¼Œæ˜¯å¦å­˜åœ¨æœç´¢éœ€æ±‚é«˜ä½†å†…å®¹ä¾›ç»™ä¸è¶³çš„ç»†åˆ†è¯é¢˜ï¼Œé€‚åˆæ–°åˆ›ä½œè€…åˆ‡å…¥ï¼Ÿ',
                keyword: 'å…»ç”Ÿ',
                time_range: '12 ä¸ªæœˆ',
                data_sources: 'YouTube + Google Trends'
            },

            // ç»“è®ºé“¾ï¼ˆ4 æ¡æ ¸å¿ƒç»“è®ºï¼‰
            conclusions: [
                {
                    title: 'å¸‚åœºç«äº‰åˆ†æ•£ï¼Œæ–°äººæœ‰æœºä¼šè¿›å…¥',
                    summary: 'Top 10 é¢‘é“ä»…å æ€»æ’­æ”¾é‡çš„ 23%ï¼Œå¸‚åœºæœªè¢«å¤´éƒ¨å„æ–­ã€‚186 ä¸ªé¢‘é“ä¸­æœ‰ 45% æ˜¯è¿‘ 6 ä¸ªæœˆæ–°å»ºã€‚',
                    sources: [
                        { icon: 'ğŸ“Š', label: 'å…¨å±€è®¤è¯† â†’ é¢‘é“é›†ä¸­åº¦å›¾', link: '#' },
                        { icon: 'ğŸ“ˆ', label: 'å…¨å±€è®¤è¯† â†’ é¢‘é“å¢é•¿è¶‹åŠ¿', link: '#' }
                    ],
                    confidence: 82,
                    tags: [{ text: 'å…¨å±€è®¤è¯† Â· é¢‘é“åˆ†å¸ƒ', type: 'source' }],
                    reasoning: [
                        { icon: 'ğŸ“Š', text: '186 é¢‘é“çš„æ’­æ”¾é‡åˆ†å¸ƒå‘ˆé•¿å°¾ï¼ŒTop 10 é›†ä¸­åº¦ä»… 23%', weight: '40%' },
                        { icon: 'ğŸ“ˆ', text: '45% é¢‘é“åˆ›å»ºäºè¿‘ 6 ä¸ªæœˆï¼Œå¸‚åœºä»åœ¨æ‰©å¼ ', weight: '40%' },
                        { icon: 'âœ…', text: 'ç»“è®ºï¼šå¸‚åœºå¤„äºæˆé•¿æœŸï¼Œæ–°è¿›å…¥è€…æœ‰ç”Ÿå­˜ç©ºé—´', weight: 'ç»“è®º' }
                    ]
                },
                {
                    title: 'ã€Œç©´ä½æŒ‰æ‘©ã€å­˜åœ¨æ˜¾è‘—å†…å®¹ç¼ºå£',
                    summary: 'Google æœç´¢é‡ +76%ï¼Œä½† YouTube ä»… 7 æ¡ç›¸å…³è§†é¢‘ã€‚æœç´¢éœ€æ±‚å¼ºï¼Œå†…å®¹ä¾›ç»™ä¸¥é‡ä¸è¶³ã€‚',
                    sources: [
                        { icon: 'ğŸ“ˆ', label: 'å¥—åˆ©åˆ†æ â†’ æœ‰è¶£åº¦æ’å', link: '#' },
                        { icon: 'ğŸ”', label: 'Google Trends â†’ ç©´ä½æŒ‰æ‘©', link: '#' }
                    ],
                    confidence: 88,
                    tags: [
                        { text: 'å¥—åˆ©åˆ†æ Â· æœ‰è¶£åº¦æ’å', type: 'source' },
                        { text: 'Google Trends', type: 'source' },
                        { text: 'é«˜ä¼˜å…ˆçº§', type: 'pattern' }
                    ],
                    reasoning: [
                        { icon: 'ğŸ”', text: 'Google Trendsã€Œç©´ä½æŒ‰æ‘©ã€è¿‘ 6 æœˆæœç´¢é‡ +76%', weight: '40%' },
                        { icon: 'ğŸ“¹', text: 'YouTube æœç´¢ç»“æœä»… 7 æ¡ç›¸å…³è§†é¢‘', weight: '40%' },
                        { icon: 'âœ…', text: 'ç»“è®ºï¼šæœç´¢éœ€æ±‚å¼ºä½†å†…å®¹ä¾›ç»™ä¸è¶³ = æ˜¾è‘—å¥—åˆ©æœºä¼š', weight: 'ç»“è®º' }
                    ]
                },
                {
                    title: '4-20 åˆ†é’Ÿä¸­è§†é¢‘å¹³å‡æ’­æ”¾æœ€é«˜',
                    summary: 'ä¸­è§†é¢‘å‡æ’­ 8.2 ä¸‡ï¼ˆçŸ­è§†é¢‘ 2.1 ä¸‡ï¼Œé•¿è§†é¢‘ 3.5 ä¸‡ï¼‰ã€‚æ—¶é•¿æ˜¯å½±å“æ’­æ”¾é‡çš„å…³é”®å› ç´ ã€‚',
                    sources: [
                        { icon: 'ğŸ“Š', label: 'å…¨å±€è®¤è¯† â†’ æ—¶é•¿åˆ†å¸ƒ vs æ’­æ”¾é‡', link: '#' }
                    ],
                    confidence: 78,
                    tags: [
                        { text: 'å…¨å±€è®¤è¯† Â· æ—¶é•¿åˆ†å¸ƒ', type: 'source' }
                    ],
                    reasoning: [
                        { icon: 'â±ï¸', text: 'æŒ‰ YouTube åŸç”Ÿåˆ†æ¡£ç»Ÿè®¡æ—¶é•¿åˆ†å¸ƒï¼ˆ<4min / 4-20min / >20minï¼‰', weight: '30%' },
                        { icon: 'ğŸ“ˆ', text: 'ä¸­è§†é¢‘ (4-20min) å¹³å‡æ’­æ”¾ 8.2 ä¸‡ï¼ŒçŸ­è§†é¢‘ 2.1 ä¸‡', weight: '50%' },
                        { icon: 'âœ…', text: 'ç»“è®ºï¼šé‡‡ç”¨ 4-20 åˆ†é’Ÿæ—¶é•¿æ˜¯æœ€ä¼˜é€‰æ‹©', weight: 'ç»“è®º' }
                    ]
                },
                {
                    title: 'Tai Chi è‹±æ–‡å¸‚åœºæœç´¢é‡çˆ†å‘ï¼Œè·¨è¯­è¨€å¥—åˆ©æœºä¼šå¤§',
                    summary: 'å…¨çƒæœç´¢é‡ +533%ï¼Œè‹±æ–‡ YouTube ç›¸å…³è§†é¢‘ä»… 120 æ¡ã€‚ä¸­æ–‡åˆ›ä½œè€…å¯ç¿»è¯‘ç°æœ‰å†…å®¹åˆ‡å…¥ã€‚',
                    sources: [
                        { icon: 'ğŸ”', label: 'Google Trends â†’ Tai Chi', link: '#' },
                        { icon: 'ğŸ“Š', label: 'å¥—åˆ©åˆ†æ â†’ è·¨è¯­è¨€æœºä¼š', link: '#' }
                    ],
                    confidence: 85,
                    tags: [
                        { text: 'Google Trends', type: 'source' },
                        { text: 'å¥—åˆ©åˆ†æ Â· è·¨è¯­è¨€', type: 'source' }
                    ],
                    reasoning: [
                        { icon: 'ğŸŒ', text: 'Google Trends: Tai Chi å…¨çƒæœç´¢é‡ 12 ä¸ªæœˆ +533%', weight: '50%' },
                        { icon: 'ğŸ“¹', text: 'è‹±æ–‡ YouTube Tai Chi è§†é¢‘ä»…çº¦ 120 æ¡', weight: '30%' },
                        { icon: 'âœ…', text: 'ç»“è®ºï¼šä¸­æ–‡åˆ›ä½œè€…å¯ç¿»è¯‘ç°æœ‰å†…å®¹è¿›å…¥è‹±æ–‡å¸‚åœº', weight: 'ç»“è®º' }
                    ]
                }
            ],

            // ç»¼åˆç»“è®º
            final_conclusion: {
                text: 'ã€Œå…»ç”Ÿã€èµ›é“æ–°åˆ›ä½œè€…çš„é¦–é€‰ç­–ç•¥ï¼šåˆ‡å…¥å†…å®¹ç¼ºå£è¯é¢˜ï¼Œé‡‡ç”¨ 4-20 åˆ†é’Ÿä¸­è§†é¢‘æ ¼å¼ï¼Œå¿«é€Ÿæµ‹è¯•å¸‚åœºååº”ã€‚',
                points: [
                    'å¸‚åœºç«äº‰åˆ†æ•£ï¼ˆTop 10 å  23%ï¼‰ï¼Œæ–°äººæœ‰ç”Ÿå­˜ç©ºé—´',
                    'ã€Œç©´ä½æŒ‰æ‘©ã€ç­‰è¯é¢˜æœ‰æ˜ç¡®çš„å†…å®¹ç¼ºå£å’Œéœ€æ±‚',
                    'ä¸­è§†é¢‘ (4-20min) å¹³å‡æ’­æ”¾é‡æœ€é«˜ï¼ˆ8.2 ä¸‡ï¼‰',
                    'Tai Chi ç­‰è‹±æ–‡çƒ­è¯å¯é€šè¿‡ç¿»è¯‘å†…å®¹å¿«é€Ÿå˜ç°'
                ]
            },

            // è¡ŒåŠ¨æ¸…å•é“¾æ¥
            action_list_url: '#actions'
        };

        // ============================================
        // æ¸²æŸ“æŠ¥å‘Š
        // ============================================
        function renderReport() {
            const d = REPORT_DATA;

            // æŠ¥å‘Šå¤´
            document.getElementById('report-meta').textContent =
                `åŸºäº ${d.meta.sample_videos.toLocaleString()} æ¡è§†é¢‘ Â· ${d.meta.sample_channels} ä¸ªé¢‘é“ Â· ${d.meta.report_date} ç”Ÿæˆ`;

            // å‡è®¾
            document.getElementById('hypothesis-text').textContent = d.hypothesis.text;
            document.getElementById('hypothesis-meta').textContent =
                `å…³é”®è¯: ${d.hypothesis.keyword} Â· åˆ†æèŒƒå›´: ${d.hypothesis.time_range} Â· æ•°æ®æº: ${d.hypothesis.data_sources}`;

            // ç»“è®ºåˆ—è¡¨
            const list = document.getElementById('conclusions-list');
            list.innerHTML = d.conclusions.map((c, i) => `
                <div class="conclusion-card" id="conclusion-${i}">
                    <div class="conclusion-header" onclick="toggleDetail(${i})">
                        <div class="conclusion-number">${i + 1}</div>
                        <div class="conclusion-main">
                            <div class="conclusion-title">${c.title}</div>
                            <div class="conclusion-summary">${c.summary}</div>
                            <div class="conclusion-tags">
                                ${c.tags.map(t => `<span class="conclusion-tag tag-${t.type}">${t.text}</span>`).join('')}
                                <span class="conclusion-tag tag-confidence">ç½®ä¿¡åº¦ ${c.confidence}%</span>
                            </div>
                        </div>
                        <div class="conclusion-expand" id="expand-btn-${i}">å±•å¼€æ•°æ® â–¼</div>
                    </div>
                    <div class="conclusion-detail" id="detail-${i}">
                        <div class="detail-section">
                            <div class="detail-label">æ•°æ®æ¥æºï¼ˆç‚¹å‡»è·³è½¬ï¼‰</div>
                            <div class="detail-data-ref">
                                ${c.sources.map(s => `
                                    <a class="data-ref-chip" href="${s.link}" target="_blank">
                                        <span class="data-ref-icon">${s.icon}</span>
                                        <span>${s.label}</span>
                                    </a>
                                `).join('')}
                            </div>
                        </div>
                        <div class="detail-section">
                            <div class="detail-label">æ¨ç†è¿‡ç¨‹</div>
                            <div class="reasoning-steps">
                                ${c.reasoning.map(r => `
                                    <div class="reasoning-step">
                                        <span class="step-icon">${r.icon}</span>
                                        <span class="step-text">${r.text}</span>
                                        <span class="step-weight">${r.weight}</span>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');

            // ç»“è®ºè®¡æ•°
            document.getElementById('conclusion-count').textContent =
                `å…± ${d.conclusions.length} æ¡ç»“è®º Â· åŸºäº ${d.meta.total_patterns} æ¡æ¨¡å¼åˆ†ææç‚¼`;

            // ç»¼åˆç»“è®º
            document.getElementById('final-text').textContent = d.final_conclusion.text;
            document.getElementById('final-points').innerHTML = d.final_conclusion.points.map(p =>
                `<li><span class="final-arrow">â†’</span>${p}</li>`
            ).join('');
        }

        // ============================================
        // äº¤äº’
        // ============================================
        function toggleDetail(index) {
            const detail = document.getElementById(`detail-${index}`);
            const btn = document.getElementById(`expand-btn-${index}`);
            const isExpanded = detail.classList.contains('expanded');

            detail.classList.toggle('expanded');
            btn.textContent = isExpanded ? 'å±•å¼€æ•°æ® â–¼' : 'æ”¶èµ· â–²';
        }

        function exportReport() {
            const d = REPORT_DATA;
            let md = `# ä¿¡æ¯æŠ¥å‘Š\n\n`;
            md += `> ç”Ÿæˆæ—¥æœŸ: ${d.meta.report_date} Â· è§†é¢‘æ ·æœ¬: ${d.meta.sample_videos} Â· é¢‘é“: ${d.meta.sample_channels}\n\n`;

            md += `## ç ”ç©¶å‡è®¾\n\n${d.hypothesis.text}\n\n`;
            md += `- å…³é”®è¯: ${d.hypothesis.keyword}\n`;
            md += `- åˆ†æèŒƒå›´: ${d.hypothesis.time_range}\n`;
            md += `- æ•°æ®æº: ${d.hypothesis.data_sources}\n\n`;

            md += `## åˆ†æç»“è®º\n\n`;
            d.conclusions.forEach((c, i) => {
                md += `### ç»“è®º ${i + 1}: ${c.title}\n\n`;
                md += `${c.summary}\n\n`;
                md += `- ç½®ä¿¡åº¦: ${c.confidence}%\n`;
                md += `- æ•°æ®æ¥æº: ${c.sources.map(s => s.label).join(' / ')}\n\n`;
                md += `**æ¨ç†è¿‡ç¨‹:**\n\n`;
                c.reasoning.forEach(r => {
                    md += `${r.icon} ${r.text} (${r.weight})\n\n`;
                });
            });

            md += `## ç»¼åˆç»“è®º\n\n**${d.final_conclusion.text}**\n\n`;
            d.final_conclusion.points.forEach(p => {
                md += `â†’ ${p}\n\n`;
            });

            const blob = new Blob([md], { type: 'text/markdown' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `info-report-${d.meta.report_date}.md`;
            a.click();
            URL.revokeObjectURL(url);
        }

        function goToActions() {
            const url = REPORT_DATA.action_list_url;
            if (url && url !== '#actions') {
                window.location.href = url;
            }
        }

        // ============================================
        // é¡µé¢åŠ è½½
        // ============================================
        document.addEventListener('DOMContentLoaded', renderReport);
    </script>
</body>
</html>
