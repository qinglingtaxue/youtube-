---
skill-name: page-layout-design
description: 页面布局设计技能，用于设计符合系统约束的新页面（如全局认识、创作者行动中心等）
version: 1.0
updated: 2026-02-04
triggered-by: Claude Code AI assistant
context: YouTube 内容创作者运营平台
---

# Skill：页面布局设计

> **何时使用**：设计新页面（如全局认识、创作者行动中心、其他数据分析页）时，确保遵循系统的设计约束和工作流程，避免重复反馈

## 工作流程（强制 3 阶段）

### 🎨 阶段 1：设计讨论 - 画布局草稿

**输出文件**：`.42cog/work/YYYYMMDD_design_{页面名}_布局草稿.md`

**必做项**：

1. **明确页面定位**
   - [ ] 用户问题：这个页面解决用户的什么问题？
   - [ ] 用户流程：用户来这个页面做什么？
   - [ ] 页面职责：这个页面的职责边界是什么？
   - [ ] 与其他页面的关系：这个页面如何与全局认识/套利分析/信息报告/行动中心关联？

2. **画 ASCII 布局草稿**（不写代码，只画布局）
   ```
   ┌─────────────────────────────────┐
   │   全局筛选器（所有页面通用）     │
   └─────────────────────────────────┘
           ↓
   ┌─────────────────────────────────┐
   │     页面头（title + meta）       │
   └─────────────────────────────────┘
           ↓
   ┌─────────────────────────────────┐
   │  Tab 导航（或卡片导航）         │
   │  [Tab 1] [Tab 2] [Tab 3]         │
   └─────────────────────────────────┘
           ↓
   ┌─────────────────────────────────┐
   │   主要内容区（数据展示/交互）    │
   │   ├─ 筛选条件（可选，默认折叠）  │
   │   ├─ 排序控制                   │
   │   └─ 数据表格/图表               │
   └─────────────────────────────────┘
           ↓
   ┌─────────────────────────────────┐
   │   底部入口（导出/行动/外链）     │
   └─────────────────────────────────┘
   ```

3. **验证 Tab 设计**（如果有 Tab）
   - [ ] Tab 总数是否 ≤ 5 个？
   - [ ] 如果 > 5 个，是否按决策流程分组？（看数据 → 找机会 → 去行动）
   - [ ] 分组后，每组是否 ≤ 4 个 Tab？
   - [ ] 分组数量是否 ≤ 3 个（+ 可选外链）？

   **示例：套利分析页**（2 个 Tab 组）
   ```
   ┌─────────────────┬──────────────────────┐
   │  📊 看数据       │  💰 找机会            │
   │ ════════════    │ ════════════          │
   │ [视频] [频道]   │ [有趣度] [中介] [程度]│
   │ [赛道] [Google] │                      │
   └─────────────────┴──────────────────────┘
   ```

4. **验证首屏优先级**
   - [ ] 页面第一眼看到什么？（核心操作入口？用户历史？）
   - [ ] 统计数据/概览是否放在了最底部？
   - [ ] 功能入口是否控制在 3 个以内？

5. **验证页面职责（不混杂）**
   - [ ] 是否避免了混杂"数据展示"和"行动建议"？
   - [ ] 是否避免了超过 2 种用户任务？
   - [ ] 是否有清晰的"出口"（导出/外链）指向其他页面？

6. **与全局约束对标**
   - [ ] 是否遵循 real.md Appendix C（UI/UX 约束）？
   - [ ] 是否遵循 CLAUDE.md 的设计规范？
   - [ ] 是否有特定的约束需要在 real.md 中补充（如信息报告的 Appendix D）？

7. **获得用户确认**
   - [ ] 将布局草稿发送给用户
   - [ ] 等待用户的 ✅（确认可以进入阶段 2）
   - [ ] 如果有反馈，迭代布局设计，直到用户满意

---

### ✅ 阶段 2：设计确认 - 写决策文档

**输出文件**：`.42cog/work/YYYYMMDD_decision_{页面名}_设计.md`

**必做项**：

1. **列出核心设计决策**（5 个以上）
   - 每个决策需要说明"为什么选这个方案"

   **示例：信息报告的设计决策**
   - 决策 1：改为"推理链式报告"而非"Dashboard 多 Tab"
   - 决策 2：删除"标题长度"结论（低价值）
   - 决策 3：删除"行动清单"独立页面
   - 决策 4：删除"创作者阶段选择器"
   - 决策 5：图表不跳转，在报告内嵌入

2. **对每个决策说明理由**
   - 原始设计是什么？
   - 变更后是什么？
   - 为什么要变更？（用户问题 / 数据证据 / 设计原则）
   - 变更的优势是什么？

3. **列出与其他页面的关系**
   - [ ] 这个页面引用哪些数据源？
   - [ ] 这个页面如何输出数据到其他页面？
   - [ ] 全局状态（如时间范围）如何影响这个页面？
   - [ ] 这个页面的外链指向哪里？

4. **对比备选方案**
   - [ ] 为什么不用方案 A？
   - [ ] 为什么不用方案 B？
   - [ ] 为什么最终选了这个方案？

5. **提出相关约束小节**
   - 列出这个页面涉及的约束
   - 引用 real.md 的具体约束行号
   - 如果需要新的约束，说明为什么

   **示例**：
   ```
   ## 相关约束

   本页面遵循以下约束：
   - real.md C.0 工作记忆约束（Tab ≤ 5 个）
   - real.md C.0.5 功能归属原则（数据 vs 行动分离）
   - real.md C.1-C.7 UI/UX 设计约束
   - real.md Appendix D 信息报告约束（仅适用于信息报告）

   如需新增约束，见下方"新增约束提议"
   ```

6. **获得用户确认**
   - [ ] 将决策文档发送给用户
   - [ ] 等待用户的 ✅（确认可以进入阶段 3）
   - [ ] 如果有反馈，迭代决策，直到用户满意

---

### 💻 阶段 3：实现代码

**输出文件**：`src/templates/{页面名}-template.html`

**必做项**：

1. **只在阶段 1-2 完全确认后才开始写代码**
   - 不要提前写代码，避免浪费时间

2. **参考现有模板**
   - `src/templates/charts/info-report-template.html` - 推理链式报告
   - `src/templates/charts/global-overview-template.html` - 数据展示
   - `src/templates/charts/arbitrage-analysis-template.html` - Tab 组导航

3. **实现交互逻辑**
   - Tab 切换
   - 筛选条件展开/折叠
   - 排序控制
   - 数据更新
   - 全局状态同步

4. **不写 UI 装饰**
   - 使用现有的 CSS 类（来自 chart-styles.css）
   - 不要创建新的样式，确保视觉一致性
   - 如需新样式，在 .style 标签中定义

5. **测试完整流程**
   - [ ] 页面能正常加载吗？
   - [ ] 所有交互都能正常工作吗？
   - [ ] 全局状态改变时，页面数据是否同步？
   - [ ] 导出功能是否正常？

6. **不添加用户未提到的功能**
   - 只实现阶段 1-2 确认的功能
   - 不做"优化""美化""额外功能"

---

## 常见设计模式

### 模式 1：数据展示 + Tab 组（推荐用于全局认识、套利分析）

**适用场景**：展示多类数据的分析页面

**设计框架**：
```
┌─ 看数据 ───────┬─ 找机会 ────┐   ← 按用户决策流程分组
│ [Tab 1] [Tab 2]│ [Tab 3] [Tab 4]│
└─────────────────┴────────────────┘

每个 Tab 内：
├─ 排序控制（时间范围 + 字段 + 方向）
├─ 数据表格或图表
└─ 底部导出/链接
```

**关键约束**：
- ❌ Tab > 5 个不分组
- ✅ 分组后每组 ≤ 4 个 Tab
- ✅ 用自然语言显示当前排序规则
- ✅ 排序必须拆分为 3 个独立选择（时间 + 字段 + 方向）

**示例：套利分析页**（已实现）
- 📊 看数据：视频、频道、赛道、Google
- 💰 找机会：有趣度、中介、程度
- 🎯 去行动：外链指向信息报告

---

### 模式 2：推理链式报告（单页）

**适用场景**：信息报告

**设计框架**：
```
假设区块（只读，来自全局状态）
  ↓
结论① 卡片（默认展开）
  ├─ 标题 + 摘要（始终可见）
  └─ [展开] → 推理链 + 嵌入图表
  ↓
结论②③④ 卡片（默认折叠）
  ├─ 标题 + 摘要（始终可见）
  └─ [展开] → 推理链 + 嵌入图表
  ↓
综合结论 + 行动入口（导出 + 外链）
```

**关键约束**：
- ✅ 结论① 默认展开，②③④ 默认折叠
- ✅ 每个结论的推理步骤都标注权重
- ✅ 所有图表在页面内嵌入，无跳转
- ✅ 假设区块为只读，显示全局参数
- ❌ 禁止添加 Tab
- ❌ 禁止添加"创作者选择器"或"行动清单"

**实现参考**：`src/templates/charts/info-report-template.html`

---

### 模式 3：全局状态同步

**适用场景**：所有页面都需要同步时间范围/关键词

**设计框架**：
```
┌──────────────────────────────┐
│ 全局筛选器                    │
│ 关键词 + 时间范围（所有页面） │
└──────────────────────────────┘
        ↓ 用户改变
全局状态更新
        ↓ 级联
┌─────┬──────┬──────────┬────────┐
│全局认识│套利分析│信息报告│行动中心│
└─────┴──────┴──────────┴────────┘
所有页面同时刷新
```

**关键约束**：
- ✅ 全局筛选器在所有页面顶部
- ✅ 改变时间范围时，所有页面同时刷新
- ✅ 页面间时间范围必须同步
- ✅ 如有需要，在页面内显示当前参数（如信息报告的假设区块）
- ❌ 禁止在子页面二次修改时间范围

---

## 关键设计决策检查表

在提交决策文档前，自检以下问题：

### 职责边界
- [ ] 页面的职责是否清晰明确？
- [ ] 是否避免了与其他页面的职责重叠？
- [ ] 是否有清晰的"出口"指向相关页面？

### 信息密度
- [ ] 首屏是否显示了核心信息？
- [ ] 统计数据/概览是否放在了页面底部？
- [ ] 功能入口是否控制在 3 个以内？

### 用户流程
- [ ] 用户进来第一眼看到什么？
- [ ] 用户接下来会做什么？
- [ ] 用户最后会去哪个页面？

### 数据流动
- [ ] 这个页面从哪些页面获取数据？
- [ ] 这个页面输出数据给哪些页面？
- [ ] 全局状态如何影响这个页面？

### 约束遵循
- [ ] 是否遵循了 real.md 的所有约束？
- [ ] 是否需要新增约束？
- [ ] 新增约束是否已经在 real.md 中补充？

---

## 避免的常见错误

### ❌ 错误 1：超过 5 个 Tab 不分组
```
错误示例：
┌────────────────────────────────────────┐
│ [1] [2] [3] [4] [5] [6] [7] [8] [9]   │  用户看不完！
└────────────────────────────────────────┘

正确示例：
┌──────────────────┬─────────────────────┐
│ 看数据            │ 找机会               │
│ [1] [2] [3]     │ [4] [5] [6] [7]    │
└──────────────────┴─────────────────────┘
```

### ❌ 错误 2：混杂数据和行动
```
错误示例：
Tab 1: 市场分析（数据）
Tab 2: 机会评估（分析）
Tab 3: 行动建议（行动）    ← 混杂了！

正确示例：
套利分析页：Tab 1-2（数据+分析）
  ↓ 外链
信息报告页：结论汇总
  ↓ 外链
行动中心页：执行计划
```

### ❌ 错误 3：排序设计不清晰
```
错误示例：
排序: [综合排序 ▼]     ← "综合"是什么？

正确示例：
时间范围: [7天内 ▼]
排序字段: [播放量 ▼]
方向: [高→低 ▼]
当前: 7 天内发布的视频，按播放量高→低排序  ← 用自然语言说明
```

### ❌ 错误 4：图表跳转打破沉浸度
```
错误示例（信息报告中）：
点"引用数据源" → 跳转到全局认识
  ↓ 用户需要返回报告，找回阅读位置

正确示例：
点"展开数据" → 图表在页面内嵌入，无跳转
  ↓ 用户继续阅读，沉浸式体验
```

### ❌ 错误 5：全局状态不同步
```
错误示例：
用户在全局认识页改时间范围为"7天"
  切换到套利分析页 → 还是"30天"  ← 不同步！

正确示例：
改时间范围 → globalState 更新 → 所有页面同时刷新
```

---

## 设计审查清单

在进入阶段 2（确认决策）前，自查以下项目：

### 阶段 1 完成度
- [ ] 用户问题和页面定位明确了吗？
- [ ] ASCII 布局草稿清晰吗？
- [ ] Tab 设计通过了工作记忆约束吗？
- [ ] 首屏优先级清晰吗？
- [ ] 与其他页面的关系明确了吗？
- [ ] 获得了用户的 ✅ 确认吗？

### 设计约束遵循
- [ ] 遵循 real.md C.0 工作记忆约束吗？
- [ ] 遵循 real.md C.0.5 功能归属原则吗？
- [ ] 遵循 real.md C.1-C.7 UI/UX 约束吗？
- [ ] 是否需要新增约束（如信息报告的 Appendix D）？

### 数据完整性
- [ ] 页面的数据来源清楚了吗？
- [ ] 数据流向（输入/输出）明确了吗？
- [ ] 全局状态同步机制设计好了吗？

---

## 模板文件位置

使用以下模板作为参考实现：

| 页面类型 | 模板位置 | 用途 |
|---------|---------|------|
| 推理链式报告 | `src/templates/charts/info-report-template.html` | 信息报告参考 |
| 数据展示 + Tab | `src/templates/charts/global-overview-template.html` | 全局认识参考 |
| Tab 组导航 | `src/templates/charts/arbitrage-analysis-template.html` | 套利分析参考 |
| 通用样式 | `src/templates/charts/chart-styles.css` | CSS 基础类 |

---

## 何时触发这个 Skill

使用这个 Skill：
- ✅ 设计新页面（全局认识、创作者行动中心等）
- ✅ 重构现有页面
- ✅ 对页面布局有疑问时

不需要用这个 Skill：
- ❌ 简单的数据修改
- ❌ 样式调整（CSS）
- ❌ 代码 Bug 修复

---

## 相关文档

| 文档 | 内容 | 何时阅读 |
|------|------|---------|
| CLAUDE.md | 项目规范 + UI 约束 | 设计前必读 |
| real.md C 节 | UI/UX 约束 | 参考检查清单 |
| real.md D 节 | 信息报告约束 | 设计信息报告时 |
| cog-process.md | 数据加工实体 | 理解数据流向 |
| 各页面的 decision 文档 | 设计决策 | 学习现有设计 |

---

## 快速开始

如果你要设计一个新页面，按以下顺序操作：

1. 阅读 CLAUDE.md 的设计工作流程
2. 阅读 real.md 附录 C（UI/UX 约束）
3. 看看现有页面的设计（decision 文档）
4. 画 ASCII 布局草稿（不写代码）
5. 获得用户确认
6. 写决策文档，说明"为什么"
7. 只有在用户确认后，才开始写代码

**记住**：设计优先，代码随后。前期充分讨论，后期高效实现。
