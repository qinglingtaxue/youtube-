---
name: data-migration-summary
description: V2→V3数据迁移与real.md更新总结
date: 2026-02-03
---

# V2 → V3 数据迁移与约束更新总结

## 本次工作完成内容

### 1️⃣ 文件迁移（已完成）
✅ 从v2项目复制了 **22个** 采集相关工作文档到v3：
- 6个核心采集设计文档
- 16个模式洞察数据文件（42个模式的完整分析）

**迁移记录**：`2026-02-03_migration_from_v2.md`

### 2️⃣ Real.md 更新（已完成）

#### 新增约束条目
在约束3（API/自动化限制）中补充了数据采集能力边界说明：
- 直接可采集 ✅
- 可采集但有成本 ⚠️
- 不可采集或高成本 ❌

#### 新增附录 B - 实际可采集数据与分析能力的边界（**核心更新**）

共7个小节，超过2000字的详细说明：

| 小节 | 内容 | 关键修正 |
|------|------|---------|
| B.1 | YouTube API直接可采集数据 | 列出15+视频字段，6+计算指标 |
| B.2 | 可采集但有成本的数据 | ✨新增：Google Trends（无成本），评论采样（有成本但可控） |
| B.3 | 无法采集的数据 | 搜索排名→用Google Trends替代，评论→改为采样方案 |
| B.4 | 100%可行的分析 | ✨新增：搜索热度趋势分析，评论热词提取，情感分析 |
| B.5 | cog.md修正建议 | ✨新增：GoogleTrends实体，CommentSample实体 |
| B.6 | MVP数据收集方案 | 3个阶段的具体实现路线 |
| B.7 | 文档编写建议 | 5条关键原则（数据可信度、来源透明等） |

---

## 关键修正说明

### 问题1：搜索排名无法获取 ❌ → 用Google Trends替代 ✅

**原始问题**
- YouTube API不提供搜索排名信息
- Selenium爬虫极慢且易被限流

**新方案：Google Trends**
- 官方API，无配额消耗，完全免费
- 获取搜索量时间序列、相关词、热度对比
- **应用场景**：
  * 发现上升趋势（如"Tai Chi"英文搜索+533%）
  * 跨语言套利机会识别
  * 话题生命周期分析
- **优先级**：P1（应该优先实现）

### 问题2：评论热词成本太高 ❌ → 改为采样方案 ✅

**原始问题**
- comments.list API配额消耗巨大
- 需要预训练NLP模型

**新方案：两层递进**

**方案A：采样方案（推荐MVP）**
- 只对 Top 10% 视频采样前100条评论
- 150条视频 × 100条评论 = 15,000配额（日限内）
- 使用jieba + 开源情感词库（无额外成本）
- 产出：评论热词、用户痛点、情感倾向
- **优先级**：P2

**方案B：完整爬虫方案（后期增强）**
- Selenium网页爬虫获取更多评论
- 无API配额消耗，但速度慢
- 适用于竞品深度分析（非实时）
- **优先级**：P3

---

## 对各核心文档的影响

### Real.md 变化
- 数据采集能力从"不可行"变为"可执行"
- 从单一YouTube API扩展到多源数据（YouTube + Google Trends + 评论）
- 提供了明确的成本/收益权衡
- MVP阶段有了清晰的优先级（P0/P1/P2/P3）

### Cog.md 待更新项
- 新增实体：`GoogleTrends` / `SearchTrendData`
- 新增实体：`CommentSample`（评论采样数据）
- 修正：`KeywordNetwork` 改为频率统计（不计中心性）
- 修正：`PatternAnalysis` 的评论部分改为采样

### Sys.spec.md 待更新项
- 新增模块：GoogleTrends采集器
- 新增模块：评论采样与NLP分析
- 明确各模块的API成本与处理时间
- 定义采样策略（Top10%优先原则）

### API.spec.md 待更新项
- `/api/trends/google` 端点（搜索热度查询）
- `/api/comments/sample` 端点（评论采样）
- `/api/analysis/sentiment` 端点（情感分析）
- 各端点的配额消耗说明

---

## V3 MVP 实现路线（基于更新后的real.md）

### 阶段1：基础采集（第1-2周）
**目标**：1000条视频基线数据
**采集内容**：
- ✅ YouTube 视频元数据（yt-dlp）
- ✅ 频道统计数据
- ✅ Google Trends 搜索热度
**成本**：~2-3小时数据采集
**产出**：基础数据库 + 四象限图 + 时长分布

### 阶段2：深度分析（第2-4周）
**目标**：可执行的视频创作建议
**分析内容**：
- ✅ ContentQuadrant (P0)
- ✅ DurationMatrix (P0)
- ✅ RankingList (P0)
- ✅ Google Trends 趋势 (P1)
- ✅ 评论采样热词 (P2)
**成本**：无额外API消耗（Google Trends免费）
**产出**：仪表盘 + 创作建议

### 阶段3：持续追踪（第4+周）
**目标**：市场变化监控
**追踪内容**：
- ✅ TrendSnapshot (增长数据)
- ✅ Google Trends (新话题预警)
- ✅ 每周采集200-300条新数据
**成本**：~1000配额/周（在日限内）
**产出**：增长趋势 + 新机会告警

---

## 文件清单（已迁移+已更新）

### V3/.42cog/work/ 中的新增/更新文件

**迁移自V2的采集文档**
```
10-确定信息采集分组与指标图示化方案.md
12-确定时间维度采集范围.md
13-确定采集关键词逻辑与近期视频筛选规则.md
15-采用YouTube原生搜索过滤机制.md
采集指令.md
采集逻辑.md
模式洞察-*.md (共16个)
```

**V3新创建的文件**
```
2026-02-03_migration_from_v2.md (迁移记录)
2026-02-03_data_migration_summary.md (本文档)
```

### V3/.42cog/real/real.md 更新内容
```
约束3补充：数据采集能力边界说明
附录B：实际可采集数据与分析能力的边界 (新增, 7个小节, 2000字)
  - B.1 直接可采集
  - B.2 有成本可采集 (✨新增Google Trends + 评论采样)
  - B.3 不可采集 (✨修正搜索排名和评论方案)
  - B.4 100%可行分析 (✨新增Google Trends和评论相关分析)
  - B.5 cog修正建议 (✨新增GoogleTrends/CommentSample实体)
  - B.6 MVP方案 (3阶段实现路线)
  - B.7 文档建议 (5条原则)
```

---

## 后续行动清单

### 立即进行（本周）
- [ ] 阅读迁移的采集相关文档，理解v2的采集策略
- [ ] 复查real.md中B.1-B.7的所有内容
- [ ] 确认Google Trends API的具体调用方式

### 本月进行
- [ ] 更新cog.md，补充新的实体定义
- [ ] 更新sys.spec.md，设计新的采集模块
- [ ] 更新api.spec.md，定义新的API端点
- [ ] 启动阶段1采集（YouTube + Google Trends）

### 持续进行
- [ ] 按MVP阶段执行采集和分析
- [ ] 验证v2的42个模式在v3中的有效性
- [ ] 增量添加新发现的模式

---

## 关键决策点

**为什么优先使用Google Trends而不是YouTube搜索排名？**
- 免费，无API配额消耗
- 数据更全面（包含Google搜索、YouTube搜索、Google News等）
- 跨语言套利机会更容易发现
- YouTube API无法提供搜索排名，Selenium方案极不可靠

**为什么采样评论而不是放弃？**
- Top视频的评论反映真实用户需求
- 采样成本可控（15k配额在日限内）
- 配合jieba + 情感词库，可生成高价值洞察
- 完整爬虫可作为后期增强（P3）

**为什么保留整个模式洞察文件集？**
- 42个模式是数据驱动的发现，不会过时
- V3可以验证这些模式的持续有效性
- 这些文件是PatternAnalysis实体的重要参考
- 提供数据对比基线

---

## 预期效果

完成这次更新后，V3项目将有：

✅ **诚实的技术约束** - 清晰的数据能力边界  
✅ **无废话的设计** - 基于真实可得数据，避免虚假分析  
✅ **低成本MVP** - Google Trends免费，评论采样可控  
✅ **高价值输出** - 42个已验证的模式 + 新的Google Trends洞察  
✅ **清晰的路线图** - 3个阶段的具体实现方案  

这样设计出的网页和数据流就是**完全现实、完全可执行**的！

