# 模式洞察 - 用户维度 - 数据层

> 包含模式：38, 39, 40, 41, 42
> 最后更新：2026-01-24
> 状态：⏳ 待采集

---

## 核心理念

**现有维度告诉你「是什么」，用户维度告诉你「为什么」**

| 现有洞察 | 用户维度补充 |
|---------|-------------|
| 某视频播放量100万 | → 用户**为什么**喜欢这个视频？ |
| 某话题平均播放高 | → 用户在这个话题下**关心什么问题**？ |
| 长标题效果好 | → 长标题触发了用户**什么心理**？ |
| 某频道增长快 | → 用户对这个频道**评价如何**？ |

---

## 一、数据源总览

| 数据源 | 获取方式 | 采集状态 | 数据量 | 用途 |
|--------|---------|---------|--------|------|
| **评论文本** | yt-dlp --write-comments | ❌ 空 | 0 | 核心：用户真实反馈 |
| **标题文本** | 已有 competitor_videos.title | ✅ 完整 | 2,340 | 话题识别、语义分析 |
| **描述文本** | 已有 competitor_videos.description | ✅ 完整 | 2,340 | 内容分类、关键词 |
| **标签** | 已有 competitor_videos.tags | ✅ 完整 | ~80% | 标签策略分析 |
| **互动数据** | 已有 view/like/comment_count | ✅ 完整 | 2,340 | 互动率计算 |

---

## 二、评论数据（核心）

### 数据表：video_comments

| 字段 | 类型 | 说明 | 分析用途 |
|------|------|------|----------|
| youtube_id | TEXT | 视频ID | 关联视频 |
| comment_id | TEXT | 评论ID | 去重 |
| **text** | TEXT | 评论内容 | **核心分析对象** |
| author | TEXT | 作者昵称 | 用户画像 |
| author_id | TEXT | 作者ID | 用户行为追踪 |
| like_count | INT | 点赞数 | 评论质量权重 |
| reply_count | INT | 回复数 | 讨论热度 |
| is_pinned | INT | 是否置顶 | 创作者认可 |
| is_favorited | INT | 频道主喜欢 | 创作者互动 |
| published_at | TEXT | 发布时间 | 时间趋势 |

### 采集命令

```bash
# 采集 Top 100 视频的评论
python3 scripts/fetch_comments.py --limit 100

# 每视频采集 100 条评论（默认 50）
python3 scripts/fetch_comments.py --max-comments 100
```

### 预估数据量

| 配置 | 预估评论数 | 预估耗时 |
|------|-----------|---------|
| Top 100 × 50条 | ~5,000 条 | ~25 分钟 |
| Top 200 × 100条 | ~20,000 条 | ~100 分钟 |
| Top 500 × 100条 | ~50,000 条 | ~250 分钟 |

---

## 三、标题语义数据（间接获取）

### 数据来源：competitor_videos.title

```sql
-- 标题关键词统计
SELECT
    -- 提取关键词（需 Python 分词）
    title,
    view_count,
    like_count,
    comment_count
FROM competitor_videos
WHERE title IS NOT NULL;
```

### 可提取的信息

| 信息类型 | 提取方法 | 示例 |
|---------|---------|------|
| **话题关键词** | jieba 分词 + 词频统计 | 「养生」「太极」「八段锦」 |
| **情感倾向** | 情感词典匹配 | 「震惊」「必看」「警惕」 |
| **用户痛点** | 问题句式识别 | 「如何...」「为什么...」「怎样...」 |
| **钩子类型** | 正则匹配 | 数字、感叹号、问号 |

---

## 四、描述语义数据

### 数据来源：competitor_videos.description

```sql
-- 描述内容分析
SELECT
    youtube_id,
    description,
    LENGTH(description) as desc_length,
    view_count
FROM competitor_videos
WHERE description IS NOT NULL AND description != '';
```

### 可提取的信息

| 信息类型 | 提取方法 | 用途 |
|---------|---------|------|
| **链接类型** | URL 正则 | 外链策略 |
| **时间戳** | `\d+:\d+` 匹配 | 章节规划 |
| **联系方式** | 社交媒体关键词 | 跨平台引流 |
| **关键词密度** | TF-IDF | SEO 策略 |

---

## 五、互动行为数据（已有）

### 计算公式

```sql
-- 互动率计算
SELECT
    youtube_id,
    title,
    view_count,
    like_count,
    comment_count,
    -- 点赞率
    ROUND(like_count * 100.0 / NULLIF(view_count, 0), 4) as like_rate,
    -- 评论率
    ROUND(comment_count * 100.0 / NULLIF(view_count, 0), 4) as comment_rate,
    -- 点评比（点赞/评论）
    ROUND(like_count * 1.0 / NULLIF(comment_count, 0), 2) as like_comment_ratio
FROM competitor_videos
WHERE view_count > 0;
```

### 互动率基准值（养生领域）

| 指标 | 平均值 | 优秀值（Top 10%）| 说明 |
|------|--------|----------------|------|
| 点赞率 | ~2.5% | >5% | like_count / view_count |
| 评论率 | ~0.3% | >0.8% | comment_count / view_count |
| 点评比 | ~10:1 | >20:1 | 高点评比 = 内容认同但不想讨论 |

---

## 六、标签数据（已有）

### 数据来源：competitor_videos.tags

```sql
-- 标签统计
SELECT
    tags,
    COUNT(*) as video_count,
    AVG(view_count) as avg_views
FROM competitor_videos
WHERE tags IS NOT NULL AND tags != ''
GROUP BY tags
ORDER BY video_count DESC;
```

### 标签解析方法

```python
import json

# 标签存储格式：JSON 数组
# e.g. '["养生", "健康", "太极"]'
def parse_tags(tags_str):
    try:
        return json.loads(tags_str)
    except:
        return []
```

---

## 七、数据质量约束

| 约束 | 说明 | 解决方案 |
|------|------|----------|
| 评论数据为空 | 需要运行采集脚本 | `python3 scripts/fetch_comments.py` |
| 评论偏向头部视频 | 只采集 Top N 视频 | 按话题分层采样 |
| 语言混杂 | 中英日混合评论 | 语言检测 + 分开分析 |
| 机器人评论 | 营销号/水军 | 关键词过滤 + 相似度去重 |
| 评论时间滞后 | 评论发布时间 ≠ 观看时间 | 仅分析相对趋势 |

---

## 八、待采集优先级

| 优先级 | 数据 | 采集命令 | 支撑的模式 |
|--------|------|----------|------------|
| **P0** | 评论内容 | `python3 scripts/fetch_comments.py` | 38, 39, 40, 41 |
| P1 | 更多视频评论 | `--limit 500 --max-comments 100` | 扩大样本 |
| P2 | 多语言评论 | 针对英语/日语视频采集 | 42（跨语言用户对比） |

---

## 相关文档

- [模式洞察-用户维度-方法.md](./模式洞察-用户维度-方法.md) - 分析方法
- [模式洞察-用户维度-输出.md](./模式洞察-用户维度-输出.md) - 输出结论
- [模式洞察-数据基础.md](./模式洞察-数据基础.md) - 总体数据说明
