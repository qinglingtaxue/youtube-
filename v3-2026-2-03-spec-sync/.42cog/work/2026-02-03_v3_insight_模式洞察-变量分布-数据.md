# 模式洞察 - 变量分布 - 数据层

> 包含模式：2, 3, 4, 7-10, 23
> 最后更新：2026-01-24

---

## 数据表

| 数据表 | 用途 |
|--------|------|
| channels | 频道订阅数 |
| competitor_videos | 视频各项指标 |

## 关键字段

| 字段 | 类型 | 说明 |
|------|------|------|
| channels.subscriber_count | INT | 订阅数 |
| competitor_videos.view_count | INT | 播放量 |
| competitor_videos.like_count | INT | 点赞数 |
| competitor_videos.comment_count | INT | 评论数 |
| competitor_videos.duration | INT | 视频时长（秒） |
| competitor_videos.title | VARCHAR | 视频标题 |

## 数据范围

| 项目 | 说明 |
|------|------|
| 频道总数 | 956 个 |
| 视频总数 | 2340 条 |
| 详情完整度 | 95%（like_count等字段） |

## 数据质量

| 问题 | 状态 | 影响 |
|------|------|------|
| 素人样本可能含已删除/私有视频 | ⚠️ 已知 | 效率计算可能偏高 |
| 内容类型基于标题关键词匹配 | ⚠️ 存在误分类 | 类型分析不完全准确 |
| 详情完整度95% | ✅ 良好 | 统计可靠 |

## 采集命令

```sql
-- 订阅分档统计
SELECT
    CASE
        WHEN subscriber_count >= 1000000 THEN '1M+'
        WHEN subscriber_count >= 100000 THEN '100K-1M'
        WHEN subscriber_count >= 10000 THEN '10K-100K'
        WHEN subscriber_count >= 1000 THEN '1K-10K'
        ELSE '<1K'
    END as tier,
    COUNT(DISTINCT channel_id) as channel_count,
    AVG(view_count) as avg_views,
    AVG(view_count) / AVG(subscriber_count) as efficiency
FROM channels
JOIN competitor_videos USING(channel_id)
GROUP BY tier;

-- 时长分档统计
SELECT
    CASE
        WHEN duration < 60 THEN '<1分钟'
        WHEN duration < 180 THEN '1-3分钟'
        WHEN duration < 600 THEN '3-10分钟'
        WHEN duration < 1800 THEN '10-30分钟'
        ELSE '30分+'
    END as duration_tier,
    COUNT(*) as video_count,
    AVG(view_count) as avg_views,
    AVG(like_count / view_count * 100) as like_rate
FROM competitor_videos
WHERE duration > 0
GROUP BY duration_tier;

-- 标题特征统计
SELECT
    CASE WHEN title REGEXP '[0-9]' THEN '含数字' ELSE '不含数字' END as has_number,
    COUNT(*) as video_count,
    AVG(view_count) as avg_views
FROM competitor_videos
GROUP BY has_number;

-- 话题垄断度分析
SELECT
    topic,
    SUM(CASE WHEN rank <= 3 THEN view_count ELSE 0 END) / SUM(view_count) as top3_share
FROM (
    SELECT
        topic,
        channel_id,
        SUM(view_count) as view_count,
        RANK() OVER (PARTITION BY topic ORDER BY SUM(view_count) DESC) as rank
    FROM competitor_videos
    GROUP BY topic, channel_id
) t
GROUP BY topic;
```

---

## 相关文档

- [模式洞察-变量分布-方法.md](./模式洞察-变量分布-方法.md)
- [模式洞察-变量分布-输出.md](./模式洞察-变量分布-输出.md)
