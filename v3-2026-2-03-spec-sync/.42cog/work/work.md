# 工作记录 (Work)

> 记录项目开发过程中的关键决策、问题解决和迭代历程

---

## 文件命名规范（强制）

### 格式

```
{日期}_{类型}_{中文主题}.md
```

**示例**：
- `2026-02-03_v3_decision_首页布局.md`
- `2026-02-03_v3_insight_模式洞察-时间维度-数据.md`
- `2026-02-04_design_套利页面v1草稿.md`

### 类型定义

| 类型 | 英文 | 用途 | 示例主题 |
|------|------|------|----------|
| `data` | data | 数据文件、数据摘要 | 迁移摘要、采集结果 |
| `decision` | decision | 决策记录、方案选择 | 首页布局、技术选型 |
| `design` | design | 设计文档、草稿 | 首页v1草稿、原型设计 |
| `guide` | guide | 指南、操作手册 | 采集指令、部署指南 |
| `insight` | insight | 洞察分析、发现 | 模式洞察-xxx、用户行为分析 |
| `log` | log | 日志、过程记录 | 优化完成记录、调试日志 |
| `migration` | migration | 迁移文档 | 从v2迁移、数据库迁移 |
| `report` | report | 报告、审计结果 | 命名审计、性能报告 |
| `spec` | spec | 规约、规范定义 | 命名规范、API规约 |

### 规则

1. **日期格式**：`YYYY-MM-DD`（如 `2026-02-03`）
2. **类型**：必须使用上表中的英文类型
3. **主题**：使用中文，简洁明了，便于人类阅读
4. **分隔符**：日期与类型之间用 `_`，主题内部可用 `-`

### 搜索示例

```bash
# 按日期搜索
ls 2026-02-03_*

# 按类型搜索
ls *_decision_*
ls *_insight_*

# 搜索特定主题
ls *模式洞察*
ls *首页*
```

---

## 重要说明

> **代码生成目录**: 实际生成的代码文件通常放在 `../src/` 目录下
>
> 项目结构示例：
> ```
> project-root/
> ├── .42cog/          # 认知敏捷法核心文件
> │   ├── real/        # 现实约束
> │   ├── cog/         # 认知模型
> │   ├── spec/        # 规约文档
> │   └── work/        # 工作记录（本文件）
> ├── .42plugin/       # 技能插件
> └── src/             # 实际代码目录 ⭐
>     ├── app/         # Next.js 应用目录
>     ├── components/  # React 组件
>     ├── lib/         # 工具库
>     └── ...          # 其他代码文件
> ```

## 工作日志格式

```markdown
## YYYY-MM-DD

### 完成的工作
- [工作项1]
- [工作项2]

### 遇到的问题
- [问题描述]
- [解决方案]

### 技术决策
- [决策内容]
- [决策原因]

### 下一步计划
- [计划1]
- [计划2]
```

---

## 2026-02-03

### 完成的工作
- ✓ 建立全局唯一编码体系（三层：卡片/文档/项目）
- ✓ 创建编码规约详细文档 (2026-02-03_spec_naming-convention.md)
- ✓ 创建自动化检查工具 (.42cog/skills/check-naming-violations.skill.md)
- ✓ 生成全局文件审计报告 (2026-02-03_v3_report_naming-audit.md)
- ✓ 补充 meta.md、cog.md、real.md 中的编码规约章节
- ✓ 创建三份深度分析文档（log、insight 各一份）

### 遇到的问题
1. **初版规约过于严苛**
   - 问题：禁止不同扩展名的同名文件
   - 解决：修改为允许不同扩展名，只禁止完全重名
   - 启示：规约要尊重工具和 AI 的能力

2. **忽视了约定俗成文件**
   - 问题：规约试图改变 .42cog/ 目录下的标准文件名
   - 解决：补充"保护机制"，明确哪些文件不能改名
   - 启示：编码规约和生态约定是两回事

3. **文件位置不符合知识大法**
   - 问题：产出的 log/report/insight 文档放在项目根目录
   - 解决：移到 .42cog/work/ 中，符合知识大法规范
   - 启示：规约不仅约束内容，也约束位置

### 技术决策
- **三层编码体系**：卡片(card-YYYYMMDD-NNN) → 文档(YYYYMMDD_type_topic) → 项目(<name>-<module>)
- **冲突预防策略**：5 步检查流程 + 格式验证 + 全局去重 + 映射追踪
- **灵活性设计**：hardline(禁止) + softline(建议) + 允许范围
- **生态兼容性**：保护约定俗成文件，不改变 AI/工具的识别机制

### 下一步计划
**Priority 1（本周）**
- [ ] 更新 cog.md 的同主题映射表（编码规约相关 3 个文件）
- [ ] 补充 .42cog/spec/README.md，说明规约文档位置

**Priority 2（下周）**
- [ ] 制定 .42cog/spec 遗留文件迁移计划
- [ ] 为新同事制作快速入门指南（1 页纸版）

**Priority 3（持续）**
- [ ] 每周一运行 check-naming-violations 审计
- [ ] 基于反馈优化规约，准备 v2.0

### 相关文档
- 📋 完整规约：.42cog/spec/2026-02-03_spec_naming-convention.md
- 🔍 检查工具：.42cog/skills/check-naming-violations.skill.md
- 📊 审计报告：.42cog/work/2026-02-03_v3_report_naming-audit.md
- 📝 优化记录：.42cog/work/2026-02-03_v3_log_optimization-complete.md
- 💡 生态保护：.42cog/work/2026-02-03_v3_insight_ecosystem-protected-names.md

---

## 2024-12-06

### 完成的工作
- 初始化项目目录结构
- 创建.42cog核心文件
- 定义项目元信息和现实约束

### 遇到的问题
- 暂无

### 技术决策
- 选择Next.js 15作为开发框架
- 使用TypeScript作为主要开发语言
- 采用Bun作为运行时

### 下一步计划
- 完善认知模型
- 生成规约文档
- 开始MVP开发

---

## 工作记录模板

### 日期: YYYY-MM-DD

**今日目标**
- [ ] 目标1
- [ ] 目标2

**实际完成**
- [x] 完成项1
- [x] 完成项2

**问题与解决**
| 问题 | 解决方案 | 状态 |
|------|----------|------|
| 问题描述 | 解决方案描述 | 已解决/进行中 |

**技术笔记**
- 技术要点1
- 技术要点2

**明日计划**
- [ ] 计划1
- [ ] 计划2

---

## 里程碑记录

### MVP (最小可行产品)
- **目标日期**: YYYY-MM-DD
- **核心功能**:
  - [ ] 功能1
  - [ ] 功能2
  - [ ] 功能3
- **状态**: 进行中

### v1.0 (正式版本)
- **目标日期**: YYYY-MM-DD
- **核心功能**:
  - [ ] 功能1
  - [ ] 功能2
- **状态**: 未开始

---

## 迭代记录

### Sprint 1 (YYYY-MM-DD ~ YYYY-MM-DD)
**目标**: [Sprint目标]

**完成的故事**:
- [用户故事1]
- [用户故事2]

**未完成的故事**:
- [用户故事3] - 原因：[说明]

**回顾总结**:
- 做得好的：[总结]
- 需要改进：[总结]

---

## 技术债务

| 债务描述 | 优先级 | 预计工作量 | 状态 |
|----------|--------|------------|------|
| [债务1] | 高 | 2天 | 待处理 |
| [债务2] | 中 | 1天 | 进行中 |

---

## 学习笔记

### 技术学习
- **主题**: [学习主题]
- **日期**: YYYY-MM-DD
- **笔记**: [学习笔记]
- **应用**: [如何应用到项目中]

### 最佳实践
- **实践**: [最佳实践描述]
- **来源**: [来源]
- **应用场景**: [在项目中的应用]
