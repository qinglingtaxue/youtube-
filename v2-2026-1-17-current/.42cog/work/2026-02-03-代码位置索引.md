# ä»£ç ä½ç½®ç´¢å¼• - å¿«é€Ÿå‚è€ƒ

**ç”¨é€”**: å¿«é€Ÿå®šä½å…³é”®åŠŸèƒ½çš„ä»£ç ä½ç½®
**æ›´æ–°æ—¶é—´**: 2026-02-03

---

## ğŸ“ HTML é¡µé¢ç»“æ„ä½ç½®

### insight-system.html

| åŠŸèƒ½ | ä½ç½® | å†…å®¹ |
|------|------|------|
| **Tabå¯¼èˆªæ ** | 66-90 | `<div class="pattern-tabs-wrapper">` - 3ä¸ªä¸»Tab + å¤–é“¾ |
| **Tab1 å…¨å±€è®¤è¯†** | 93-975 | `<div id="tab1">` - 5ä¸ªå­æ ‡ç­¾ + 5ä¸ªåˆ†æå†…å®¹ |
| **Tab1 sub0** | 117-180 | æ¦‚è§ˆ - è¯é¢˜æ’­æ”¾é‡åˆ†å¸ƒ (overviewScatterChart) |
| **Tab1 sub1** | 182-219 | æ¨¡å¼4 - è§†é¢‘æ’­æ”¾é‡è¶‹åŠ¿ (contentTypeScatterChart) |
| **Tab1 sub2** | 221-275 | æ¨¡å¼23 - é¢‘é“å›½å®¶åˆ†å¸ƒ (countryBarChart) |
| **Tab1 sub3** | 277-330 | æ¨¡å¼12 - é¢‘é“ç²‰ä¸åˆ†å¸ƒ (subsDistScatter) |
| **Tab1 sub4** | 332-375 | æ¨¡å¼43 - è¯­è¨€åˆ†å¸ƒ |
| **Tab2 å¥—åˆ©åˆ†æ** | 377-977 | `<div id="tab2">` - 6ä¸ªå­æ ‡ç­¾ |
| **Tab2 sub0-5** | 390-410 | 6ä¸ªå¥—åˆ©åˆ†æå­æ ‡ç­¾å®šä¹‰ |
| **Tab7 ä¿¡æ¯æŠ¥å‘Š** | 1953-2026 | `<div id="tab7">` - ç‰¹æ®Šç»“æ„ï¼Œæ— ä¼ ç»Ÿå­æ ‡ç­¾ |
| **Tab7 æ—¶é—´ç­›é€‰** | 1964-1972 | 7å¤©/30å¤©/90å¤©/å…¨éƒ¨ æŒ‰é’® |
| **Tab7 ç»Ÿè®¡æ¦‚è§ˆ** | 1975-2008 | è§†é¢‘/é¢‘é“/æ ‡ç­¾/è¯é¢˜/å›½å®¶/æ’­æ”¾ ç»Ÿè®¡ |
| **Tab7 ç»“è®ºæ±‡æ€»** | 2010-2016 | `<div id="tabReviewGrid">` - åŠ¨æ€ç”Ÿæˆ |
| **Tab7 ç»¼åˆæ´å¯Ÿ** | 2018-2024 | `<div id="synthesisContent">` - åŠ¨æ€ç”Ÿæˆ |
| **Tab8 ç”¨æˆ·æ´å¯Ÿ** | 2029-2300+ | `<div id="tab8">` - éšè—çš„5ä¸ªå­æ ‡ç­¾ |
| **è„šæœ¬åŠ è½½** | 2552-2559 | 7ä¸ªJSæ¨¡å— + 1ä¸ªarbitrageæ¨¡å— |

---

## ğŸ“ JavaScript æ ¸å¿ƒå‡½æ•°ä½ç½®

### insight.js

| å‡½æ•°å | è¡Œå· | ç”¨é€” | å‚æ•° |
|--------|------|------|------|
| **switchReportTimePeriod** | 255 | Tab7æ—¶é—´ç­›é€‰å¤„ç† | `days: 7\|30\|90\|0` |
| **switchPatternTab** | 3469 | ä¸»Tabåˆ‡æ¢ï¼ˆæ˜¾ç¤º/éšè—ï¼‰ | `tabId: 'tab1'\|'tab2'\|'tab7'` |
| **switchSubPattern** | 3506 | å­Tabåˆ‡æ¢ | `tabId, subId` |
| **bindChartConclusions** | 3538 | å»ºç«‹å›¾è¡¨ä¸ç»“è®ºæ˜ å°„ | æ— å‚æ•° |

### insight-report.js

| å‡½æ•°å | è¡Œå· | ç”¨é€” | å¤‡æ³¨ |
|--------|------|------|------|
| **cacheChartImage** | 133 | åŒæ­¥ç¼“å­˜å›¾è¡¨ä¸ºbase64 | æ”¯æŒå¼‚æ­¥é™çº§ |
| **registerPatternConclusion** | 169 | æ³¨å†Œæ¨¡å¼ç»“è®º | 6-7ä¸ªå‚æ•° |
| **copyChartToCanvas** | 217 | å¤åˆ¶æºcanvasåˆ°ç›®æ ‡ | Tier2é™çº§æ–¹æ¡ˆ |
| **_renderChartDirectly** | 252 | ç›´æ¥æ¸²æŸ“å›¾è¡¨ | Tier4æœ€åé™çº§ |
| **_renderLanguageChartToCanvas** | 288 | è¯­è¨€åˆ†å¸ƒå›¾ | ä½¿ç”¨ _cachedUserInsights |
| **_renderCountryChartToCanvas** | 339 | å›½å®¶åˆ†å¸ƒå›¾ | ä½¿ç”¨ _cachedChannels |
| **_renderViewsTrendChartToCanvas** | 388 | æ’­æ”¾è¶‹åŠ¿å›¾ | ä½¿ç”¨ _cachedVideos |
| **_renderSubsDistChartToCanvas** | 452 | è®¢é˜…åˆ†å¸ƒå›¾ | Logarithmic scale |
| **_renderFallbackChart** | 514 | ç»¼åˆé™çº§é€»è¾‘ | è°ƒç”¨Tier2-4 |
| **toggleConclusionChart** | 531 | ç‚¹å‡»ç»“è®ºå±•å¼€å›¾è¡¨ | `chartId, tabId, itemIdx` |
| **closeConclusionChart** | 628 | å…³é—­å·²å±•å¼€çš„å›¾è¡¨ | `chartId` |
| **renderConclusionChart** | 645 | æ¸²æŸ“ç»“è®ºå¯¹åº”çš„å›¾è¡¨ | `chartId, tabId, itemIdx` |
| **renderInfoReportFromConclusions** | 706 | **Tab7ä¸»æ¸²æŸ“å‡½æ•°** | æ— å‚æ•° |
| **renderTabReviewGrid** | 713 | ç”Ÿæˆç»“è®ºå¡ç‰‡åˆ—è¡¨ | æ— å‚æ•° |
| **renderSynthesis** | 812 | ç”Ÿæˆç»¼åˆæ´å¯Ÿ | æ— å‚æ•° |
| **jumpToTab** | 945 | è·³è½¬åˆ°æŒ‡å®šTab | `tabId` |

### insight-global.js

| å‡½æ•°å | è¡Œå· | ç”¨é€” | å¤‡æ³¨ |
|--------|------|------|------|
| **renderPattern0** | ? | é¢†åŸŸæ¦‚è§ˆ | Tab1 sub0 |
| **generatePattern0Insight** | ? | æ¦‚è§ˆæ´å¯Ÿ | æ³¨å†Œç»“è®º |
| **renderPattern4** | ? | å†…å®¹ç±»å‹åˆ†æ | æ•£ç‚¹å›¾ |
| **renderPattern23** | ? | é¢‘é“å›½å®¶åˆ†å¸ƒ | æ¡å½¢å›¾ |
| **renderPattern12** | ? | é¢‘é“ç²‰ä¸åˆ†å¸ƒ | æ•£ç‚¹å›¾ |
| **renderPattern43** | ? | è¯­è¨€åˆ†å¸ƒ | æ¡å½¢å›¾ |

### insight-content.js

| å‡½æ•°å | è¡Œå· | ç”¨é€” | å¤‡æ³¨ |
|--------|------|------|------|
| **renderPattern3** | 69 | æœ€ä½³è§†é¢‘æ—¶é•¿ | æ—¶é•¿Ã—æ’­æ”¾æ•£ç‚¹å›¾ |
| **generatePattern3Insight** | 102 | æ—¶é•¿åˆ†æç»“è®º | æ³¨å†ŒTab4ç»“è®º |
| **renderPattern4** | 162 | å†…å®¹ç±»å‹å¤©èŠ±æ¿ | ç±»å‹Ã—æ’­æ”¾æ•£ç‚¹å›¾ |
| **renderContentTypeScatter** | 290 | å†…å®¹ç±»å‹æ•£ç‚¹å›¾ | Chart.jså®ä¾‹ |
| **generateContentInsight** | 369 | å†…å®¹æ´å¯Ÿç”Ÿæˆ | è¿”å›æ´å¯Ÿæ–‡æœ¬ |

### insight-user.js

| å‡½æ•°å | è¡Œå· | ç”¨é€” | å¤‡æ³¨ |
|--------|------|------|------|
| **renderPattern38** | ? | è¯„è®ºçƒ­è¯ | Tab8 sub1 |
| **renderPattern39** | ? | ç”¨æˆ·é—®é¢˜ | Tab8 sub2 |
| **renderPattern40** | ? | æƒ…æ„Ÿåˆ†æ | Tab8 sub3 |
| **renderPattern41** | ? | é—®é¢˜ç±»å‹ | Tab8 sub4 |
| **renderPattern42** | ? | éœ€æ±‚æ´å¯Ÿ | Tab8 sub5 |

---

## ğŸ“ å…³é”®æ•°æ®ç»“æ„ä½ç½®

### window.tabConclusions (insight-report.js:113-121)

```javascript
{
  tab1: { name: 'å…¨å±€è®¤è¯†', icon: 'ğŸŒ', items: [] },
  tab2: { name: 'å¥—åˆ©åˆ†æ', icon: 'ğŸ’°', items: [] },
  tab3: { name: 'é€‰é¢˜å†³ç­–', icon: 'ğŸ¯', items: [] },
  tab4: { name: 'å†…å®¹åˆ›ä½œ', icon: 'âœï¸', items: [] },
  tab5: { name: 'å‘å¸ƒç­–ç•¥', icon: 'ğŸš€', items: [] },
  tab6: { name: 'é¢‘é“è¿è¥', icon: 'ğŸ“ˆ', items: [] },
  tab8: { name: 'ç”¨æˆ·æ´å¯Ÿ', icon: 'ğŸ‘¥', items: [] }
}
```

**items æ•°ç»„ç»“æ„**:
```javascript
{
  patternId: '3',
  patternName: 'æœ€ä½³è§†é¢‘æ—¶é•¿',
  dataSource: 'æ’­æ”¾æ•°æ®',
  conclusion: '3-10åˆ†é’Ÿè§†é¢‘æ’­æ”¾é‡æœ€é«˜...',
  examples: [],
  chartConfig: null,
  sourceCanvasId: 'durationScatterChart'  // Tier2-4ä½¿ç”¨
}
```

### window.chartImageCache (insight-report.js:124)

```javascript
{
  'overviewScatterChart': 'data:image/png;base64,...',
  'contentTypeScatterChart': 'data:image/png;base64,...',
  'countryBarChart': 'data:image/png;base64,...',
  // ... æ‰€æœ‰ç¼“å­˜çš„å›¾è¡¨å›¾ç‰‡ (base64)
}
```

### window.conclusionChartInstances (insight-report.js:127)

```javascript
{
  'chart-tab1-3': ChartInstance,
  'chart-tab4-3': ChartInstance,
  // ... å½“å‰æ‰“å¼€çš„æ‰€æœ‰Chart.jså®ä¾‹
}
```

---

## ğŸ“ è°ƒç”¨é“¾åˆ†æ

### Tab7 ç‚¹å‡»ç»“è®ºå±•å¼€å›¾è¡¨çš„å®Œæ•´è·¯å¾„

```
1. HTMLè§¦å‘ (insight-system.html:2013è¡Œ)
   â””â”€ onclick="InsightReport.toggleConclusionChart('chart-tab1-3', 'tab1', 0)"

2. JSå¤„ç† (insight-report.js:531)
   function toggleConclusionChart(chartId, tabId, itemIdx) {

3a. Tier1ä¼˜å…ˆ (line 557-583)
    â””â”€ if (chartImageCache[item.sourceCanvasId]) {
           img.src = chartImageCache[sourceCanvasId]  // base64å›¾ç‰‡
           ctx.drawImage(img, 0, 0)  // ç›´æ¥ç»˜åˆ¶
       }

3b. Tier2é™çº§ (line 586-593)
    â””â”€ if (copyChartToCanvas(item.sourceCanvasId, targetCanvasId)) {
           // ç›´æ¥å¤åˆ¶æºcanvasåƒç´ 
       }

3c. Tier3é™çº§ (line 596-600)
    â””â”€ if (item.chartConfig) {
           renderConclusionChart(chartId, tabId, itemIdx)  // åŠ¨æ€åˆ›å»ºChart
       }

3d. Tier4é™çº§ (line 603-606)
    â””â”€ if (_renderChartDirectly(item.sourceCanvasId, targetCanvasId)) {
           // é‡æ–°æ¸²æŸ“åŸå§‹å›¾è¡¨
       }

4. æœ€ç»ˆç»“æœ
   â””â”€ canvas ID="chart-tab1-3-canvas" ç°åœ¨åŒ…å«å›¾è¡¨å†…å®¹
```

### Tab7 åˆå§‹åŒ–çš„å®Œæ•´è·¯å¾„

```
1. é¡µé¢åŠ è½½
   â””â”€ insight.js åŠ è½½ï¼ˆæœ€åä¸€ä¸ªæ¨¡å—ï¼‰

2. åˆå§‹åŒ– (insight.js)
   â””â”€ è°ƒç”¨å„Tabçš„æ¸²æŸ“å‡½æ•°
       â”œâ”€ InsightGlobal.renderPattern0() ç­‰ (Tab1æ•°æ®)
       â”œâ”€ InsightContent.renderPattern3() ç­‰ (Tab4æ•°æ®)
       â””â”€ InsightUser.renderPattern38() ç­‰ (Tab8æ•°æ®)

3. ç»“è®ºæ³¨å†Œ
   â””â”€ registerPatternConclusion('tab1', '0', ..., 'overviewScatterChart')
       â”œâ”€ å­˜å‚¨åˆ° tabConclusions['tab1'].items
       â””â”€ ç¼“å­˜åˆ° chartImageCache['overviewScatterChart']

4. å›¾è¡¨ç¼“å­˜ (insight-report.js:133)
   â””â”€ cacheChartImage(chart, canvasId)  // åŒæ­¥ä¼˜å…ˆ
       â”œâ”€ å°è¯•åŒæ­¥: chart.toBase64Image()
       â””â”€ é™çº§å¼‚æ­¥: requestAnimationFrame()

5. bindChartConclusions() (insight.js:3538)
   â””â”€ éªŒè¯æ‰€æœ‰canvas IDéƒ½å­˜åœ¨
       â””â”€ ç¡®ä¿Tier2é™çº§æœ‰åå¤‡æ•°æ®

6. åˆ‡æ¢åˆ°Tab7
   â””â”€ switchPatternTab('tab7')

7. æ¸²æŸ“Tab7
   â””â”€ renderInfoReportFromConclusions() (insight-report.js:706)
       â”œâ”€ renderTabReviewGrid()  // ç”Ÿæˆç»“è®ºå¡ç‰‡
       â””â”€ renderSynthesis()      // ç”Ÿæˆç»¼åˆæ´å¯Ÿ
```

---

## ğŸ“ æµ‹è¯•éªŒè¯ä½ç½®

### æµè§ˆå™¨æ§åˆ¶å°éªŒè¯å‘½ä»¤

```javascript
// éªŒè¯Tabå¯¼èˆª
switchPatternTab('tab1')          // åˆ‡æ¢åˆ°Tab1
switchPatternTab('tab7')          // åˆ‡æ¢åˆ°Tab7

// éªŒè¯å­Tabå¯¼èˆª
switchSubPattern('tab1', 'sub0')  // Tab1çš„ç¬¬ä¸€ä¸ªå­Tab

// éªŒè¯Tab7æ—¶é—´ç­›é€‰
switchReportTimePeriod(7)         // 7å¤©æ•°æ®
switchReportTimePeriod(30)        // 30å¤©æ•°æ®
switchReportTimePeriod(90)        // 90å¤©æ•°æ®
switchReportTimePeriod(0)         // å…¨éƒ¨æ•°æ®

// éªŒè¯ç»“è®ºå±•å¼€
InsightReport.toggleConclusionChart('chart-tab1-0', 'tab1', 0)

// éªŒè¯æ•°æ®ç»“æ„
console.log(window.tabConclusions)       // æ‰€æœ‰ç»“è®º
console.log(window.chartImageCache)      // ç¼“å­˜çš„å›¾ç‰‡
console.log(window.InsightReport)        // ä¿¡æ¯æŠ¥å‘Šæ¨¡å—

// éªŒè¯ç¼“å­˜ç­–ç•¥
performance.mark('chart-open-start')
InsightReport.toggleConclusionChart('chart-tab1-0', 'tab1', 0)
performance.mark('chart-open-end')
performance.measure('chart-open', 'chart-open-start', 'chart-open-end')
console.log(performance.getEntriesByName('chart-open')[0].duration) // åº” < 10ms
```

### æ—¥å¿—éªŒè¯

```
Consoleä¸­åº”çœ‹åˆ°:
[Report] å›¾è¡¨ç¼“å­˜(åŒæ­¥) overviewScatterChart (45KB)
[Report] âœ“ Tier1 ä½¿ç”¨ç¼“å­˜å›¾ç‰‡: overviewScatterChart
[Report] âœ“ Tab1æ¨¡å¼0å›¾è¡¨æ˜ å°„: overviewScatterChart
[Report] å›¾è¡¨ä¸ç»“è®ºæ˜ å°„å…³ç³»å»ºç«‹å®Œæˆ
```

---

## ğŸ“ æ–‡ä»¶ä¾èµ–å…³ç³»

```
insight-system.html
â”œâ”€ åŠ è½½é¡ºåº (line 2552-2559)
â”‚
â”œâ”€ insight-core.js
â”‚  â””â”€ æä¾› switchPatternTab(), switchSubPattern()
â”‚
â”œâ”€ insight-charts.js
â”‚  â””â”€ å›¾è¡¨ç»˜åˆ¶å·¥å…·å‡½æ•°
â”‚
â”œâ”€ insight-report.js
â”‚  â”œâ”€ æä¾› Tab7 æ‰€æœ‰å‡½æ•°
â”‚  â”œâ”€ å®šä¹‰ tabConclusions, chartImageCache
â”‚  â””â”€ ä¾èµ–: cacheChartImage(), registerPatternConclusion()
â”‚
â”œâ”€ insight-user.js
â”‚  â””â”€ æä¾› Tab8 æ¸²æŸ“å‡½æ•°
â”‚
â”œâ”€ insight-global.js
â”‚  â””â”€ æä¾› Tab1 æ¸²æŸ“å‡½æ•°ï¼Œæ³¨å†Œ Tab1 ç»“è®º
â”‚
â”œâ”€ insight-content.js
â”‚  â””â”€ æä¾› Tab4 æ¸²æŸ“å‡½æ•°ï¼Œæ³¨å†Œ Tab4 ç»“è®º
â”‚
â””â”€ insight.js
   â”œâ”€ ä¸»å…¥å£ï¼Œè°ƒç”¨å„æ¨¡å—çš„åˆå§‹åŒ–å‡½æ•°
   â”œâ”€ æä¾› switchPatternTab(), switchSubPattern(), bindChartConclusions()
   â”œâ”€ æä¾› switchReportTimePeriod()
   â””â”€ ç›‘å¬æ•°æ®å‡†å¤‡å®Œæˆ
```

---

## ğŸ“ å¿«é€Ÿä¿®æ”¹æ¸…å•

### å¦‚æœéœ€è¦æ·»åŠ æ–°åŠŸèƒ½

1. **æ–°å¢ç»“è®ºæ˜¾ç¤º**
   ```
   â†’ insight-report.js:169  registerPatternConclusion()
   â†’ insight-system.html:2013  tabReviewGridåŠ¨æ€ç”Ÿæˆ
   ```

2. **æ–°å¢æ—¶é—´ç­›é€‰é€‰é¡¹**
   ```
   â†’ insight-system.html:1964-1972  å¢åŠ æŒ‰é’®
   â†’ insight.js:255  switchReportTimePeriod()  å¤„ç†æ–°é€‰é¡¹
   ```

3. **æ–°å¢å­Tab**
   ```
   â†’ insight-system.html:116-137  æ–°å¢button
   â†’ å¯¹åº”JSæ–‡ä»¶  æ–°å¢å¤„ç†å‡½æ•°
   â†’ insight-core.js:3506  switchSubPattern()  è‡ªåŠ¨æ”¯æŒ
   ```

---

**æœ€åæ›´æ–°**: 2026-02-03
**ä½œè€…**: Claude Code
**ç”¨é€”**: å¿«é€Ÿå®šä½ä»£ç ã€ç†è§£æ¶æ„ã€è¿›è¡Œä¿®æ”¹
