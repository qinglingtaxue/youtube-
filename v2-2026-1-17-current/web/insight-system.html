<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>洞察系统 - YouTube 内容助手</title>
    <!-- 基准路径：确保相对路径在 /dashboard 路由下正确解析 -->
    <base href="/dashboard/">
    <!-- 外部样式表 -->
    <link rel="stylesheet" href="css/insight.css">
    <!-- Chart.js for advanced visualizations (本地托管，避免CDN在部分地区不可用) -->
    <script src="js/chart.min.js"></script>
    <!-- Chart.js 日期适配器 (时间轴必需) -->
    <script src="js/chartjs-adapter-date-fns.min.js"></script>
    <!-- vis.js for network graph visualization (本地托管) -->
    <script src="js/vis-network.min.js"></script>
</head>
<body>
    <!-- 安全超时：如果 90 秒内页面未完成初始化，显示诊断信息 -->
    <script>
        window.__pageInitDone = false;
        setTimeout(function() {
            if (!window.__pageInitDone) {
                var banner = document.getElementById('globalLoadingBanner');
                var status = document.getElementById('loadingStatus');
                var spinner = document.getElementById('loadingSpinner');
                if (banner && status) {
                    banner.style.borderColor = '#dc2626';
                    if (spinner) spinner.style.display = 'none';
                    var chartOk = typeof Chart !== 'undefined';
                    var visOk = typeof vis !== 'undefined';
                    var msg = '页面加载超时（90秒）。';
                    if (!chartOk) msg += ' Chart.js 未加载。';
                    if (!visOk) msg += ' vis-network 未加载。';
                    msg += ' 请尝试 Ctrl+Shift+R 强制刷新。';
                    status.innerHTML = '<span style="color:#ef4444">' + msg + '</span> <button onclick="location.reload()" style="margin-left:12px;padding:4px 16px;border-radius:6px;border:1px solid #334155;background:#1e293b;color:#94a3b8;cursor:pointer">刷新</button>';
                }
            }
        }, 90000);
    </script>

    <!-- 连接线 SVG 层 -->
    <svg class="connection-svg" id="connectionSvg"></svg>

    <!-- 工具提示 -->
    <div class="tooltip" id="tooltip"></div>

    <!-- 页面导航头部 -->
    <div class="page-nav-header">
        <button class="back-btn" onclick="goBack()">
            <span>←</span>
            <span>返回首页</span>
        </button>
    </div>

    <!-- 模式分析板块 -->
    <div class="pattern-analysis-section">
        <div class="section-header">
            <h2 class="section-title">
                <span>📊</span>
                <span>模式分析 - <span id="currentKeywordDisplay">养生</span></span>
            </h2>
            <p class="section-desc">3大核心板块：全局认识市场 → 套利发现机会 → 信息报告汇总</p>
        </div>

        <!-- 标签页导航（精简为3个 + 右侧行动中心入口） -->
        <div class="pattern-tabs-wrapper">
            <div class="pattern-tabs">
                <button class="pattern-tab active" onclick="switchPatternTab('tab1')">
                    <span class="tab-icon">🌍</span>
                    <span>全局认识</span>
                    <span class="tab-num">5</span>
                </button>
                <button class="pattern-tab" onclick="switchPatternTab('tab2')">
                    <span class="tab-icon">💰</span>
                    <span>套利分析</span>
                    <span class="tab-num">6</span>
                </button>
                <button class="pattern-tab" onclick="switchPatternTab('tab7')">
                    <span class="tab-icon">📋</span>
                    <span>信息报告</span>
                    <span class="tab-num">4</span>
                </button>
            </div>
            <a href="creator-action.html" class="action-center-tab" id="actionCenterLink">
                <span class="tab-icon">🎬</span>
                <span>创作者行动中心</span>
                <span class="tab-arrow">→</span>
            </a>
        </div>

        <!-- Tab 1: 全局认识 -->
        <div class="pattern-tab-content active" id="tab1">
            <div class="tab-content-header">
                <div class="tab-content-title">
                    <span class="title-icon">🌍</span>
                    <div>
                        <h3>全局认识</h3>
                        <div class="title-desc">了解市场全貌，识别竞争格局与机会</div>
                    </div>
                </div>
                <div class="tab-output-badge">
                    <span>📊</span>
                    <span>产出: <strong>竞品分析表</strong></span>
                </div>
            </div>

            <!-- 全局加载状态提示 -->
            <div id="globalLoadingBanner" style="background:#0f172a;border:1px solid #334155;border-radius:8px;padding:12px 20px;margin-bottom:12px;display:flex;align-items:center;gap:10px;color:#94a3b8;font-size:14px;">
                <div style="width:18px;height:18px;border:2px solid #334155;border-top:2px solid #06b6d4;border-radius:50%;animation:spin 1s linear infinite;" id="loadingSpinner"></div>
                <span id="loadingStatus">正在加载分析数据，首次可能需要 30-60 秒...</span>
                <style>@keyframes spin{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}</style>
            </div>

            <!-- 子标签页导航 -->
            <div class="sub-pattern-tabs">
                <button class="sub-pattern-tab active" onclick="switchSubPattern('tab1', 'sub0')">
                    <span class="sub-tab-badge">概览</span>
                    <span>话题播放量分布</span>
                </button>
                <button class="sub-pattern-tab" onclick="switchSubPattern('tab1', 'sub1')">
                    <span class="sub-tab-badge">模式4</span>
                    <span>视频播放量趋势</span>
                </button>
                <button class="sub-pattern-tab" onclick="switchSubPattern('tab1', 'sub2')">
                    <span class="sub-tab-badge">模式23</span>
                    <span>频道国家分布</span>
                </button>
                <button class="sub-pattern-tab" onclick="switchSubPattern('tab1', 'sub3')">
                    <span class="sub-tab-badge">模式12</span>
                    <span>频道粉丝数量分布</span>
                </button>
                <button class="sub-pattern-tab" onclick="switchSubPattern('tab1', 'sub4')">
                    <span class="sub-tab-badge">模式43</span>
                    <span>语言分布</span>
                </button>
            </div>

            <!-- 领域概览: 话题播放量分布 -->
            <div class="sub-pattern-content active" id="tab1-sub0">
                <div class="pattern-detail" style="grid-template-columns: 1fr;">
                    <!-- 图表区域：全宽 -->
                    <div style="background: #1e293b; border-radius: 8px; padding: 12px 16px; border: 1px solid #334155;">
                        <!-- 标题行：标题 + 统计信息 -->
                        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 8px;">
                            <div style="color: #f1f5f9; font-size: 14px; font-weight: 500;">话题播放量分布（发布时间 × 播放量）</div>
                            <div style="display: flex; align-items: center; gap: 16px; font-size: 12px;">
                                <span id="overviewDataRange" style="color: #64748b;">加载中...</span>
                                <span style="color: #334155;">|</span>
                                <span><span style="color: #64748b;">视频</span> <span id="overviewTotalVideos" style="color: #06b6d4; font-weight: 600;">--</span><span id="overviewVideoGrowth" style="color: #10b981; font-size: 10px; margin-left: 2px;"></span></span>
                                <span><span style="color: #64748b;">频道</span> <span id="overviewTotalChannels" style="color: #f97316; font-weight: 600;">--</span></span>
                                <span><span style="color: #64748b;">播放</span> <span id="overviewTotalViews" style="color: #a855f7; font-weight: 600;">--</span><span id="overviewAvgViews" style="color: #64748b; font-size: 10px; margin-left: 2px;"></span></span>
                                <span><span style="color: #64748b;">国家</span> <span id="overviewCountries" style="color: #10b981; font-weight: 600;">--</span><span id="overviewTopCountry" style="color: #64748b; font-size: 10px; margin-left: 2px;"></span></span>
                            </div>
                        </div>
                        <!-- 图表 -->
                        <div style="height: 420px; position: relative;">
                            <canvas id="overviewScatterChart"></canvas>
                        </div>
                        <!-- 数据解读 -->
                        <div class="chart-insight" id="overviewInsight" style="margin-top: 12px;">
                            <div class="chart-insight-title">📖 数据解读</div>
                            <div class="chart-insight-content">加载中...</div>
                        </div>
                    </div>
                    <!-- 结论与行动建议 -->
                    <div class="pattern-conclusion-section" style="margin-top: 16px;">
                        <div class="pattern-conclusion-title">
                            <span>💡</span>
                            <span>结论与行动建议</span>
                        </div>
                        <div class="pattern-conclusion-text" id="overviewConclusion">
                            分析话题整体播放量分布，了解市场规模和内容机会。
                        </div>
                        <div class="pattern-actions" id="overviewActions">
                            <span class="pattern-action do">✅ 加载中...</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 模式4: 视频播放量趋势 -->
            <div class="sub-pattern-content" id="tab1-sub1">
                <div class="pattern-detail" style="grid-template-columns: 1fr;">
                    <!-- 图表1：视频播放量趋势（散点图） -->
                    <div style="background: #1e293b; border-radius: 8px; padding: 12px 16px; border: 1px solid #334155;">
                        <!-- 标题行：标题 + 统计信息 -->
                        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 8px;">
                            <div style="color: #f1f5f9; font-size: 14px; font-weight: 500;">视频播放量趋势（发布时间 × 播放量）</div>
                            <div style="display: flex; align-items: center; gap: 16px; font-size: 12px;">
                                <span id="contentTypeTimeRange" style="color: #64748b;">加载中...</span>
                                <span id="contentTypeSample" style="color: #64748b;"></span>
                            </div>
                        </div>
                        <!-- 图表：时间散点图 -->
                        <div style="height: 420px; position: relative;">
                            <canvas id="contentTypeScatterChart"></canvas>
                        </div>
                        <!-- 数据解读 -->
                        <div class="chart-insight" id="viewTrendInsight" style="margin-top: 12px;">
                            <div class="chart-insight-title">📖 数据解读</div>
                            <div class="chart-insight-content">加载中...</div>
                        </div>
                    </div>
                    <!-- 结论与行动建议 -->
                    <div class="pattern-conclusion-section" style="margin-top: 16px;">
                        <div class="pattern-conclusion-title">
                            <span>💡</span>
                            <span>结论与行动建议</span>
                        </div>
                        <div class="pattern-conclusion-text" id="viewTrendConclusion">
                            分析视频播放量随时间的分布趋势，了解话题热度变化。
                        </div>
                        <div class="pattern-actions" id="viewTrendActions">
                            <span class="pattern-action do">✅ 加载中...</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 模式23: 频道国家分布 -->
            <div class="sub-pattern-content" id="tab1-sub2">
                <div class="pattern-detail" style="grid-template-columns: 1fr;">
                    <!-- 图表1：国家频道数量条形图（主图） -->
                    <div style="background: #1e293b; border-radius: 8px; padding: 12px 16px; border: 1px solid #334155;">
                        <!-- 标题行：标题 + 统计信息 -->
                        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 8px;">
                            <div style="color: #f1f5f9; font-size: 14px; font-weight: 500;">各国家/地区频道数量</div>
                            <div id="countryDistInfo" style="display: flex; align-items: center; gap: 16px; font-size: 12px;">
                                <span><span style="color: #64748b;">国家</span> <span id="countryCount" style="color: #06b6d4; font-weight: 600;">--</span></span>
                                <span><span style="color: #64748b;">频道</span> <span id="countryChannelCount" style="color: #f97316; font-weight: 600;">--</span></span>
                                <span><span style="color: #64748b;">Top</span> <span id="topCountryName" style="color: #10b981; font-weight: 600;">--</span></span>
                                <span id="countrySample" style="color: #64748b;">加载中...</span>
                            </div>
                        </div>
                        <!-- 图表：水平条形图 -->
                        <div style="height: 380px; position: relative;">
                            <canvas id="countryBarChart"></canvas>
                        </div>
                        <!-- 数据解读 -->
                        <div class="chart-insight" id="countryDistInsight" style="margin-top: 12px;">
                            <div class="chart-insight-title">📖 数据解读</div>
                            <div class="chart-insight-content">加载中...</div>
                        </div>
                    </div>
                    <!-- 底部：数据表格（全宽） -->
                    <div class="pattern-data-section" style="margin-top: 16px;">
                        <div class="pattern-data-title">
                            <span class="data-icon">📊</span>
                            <span>原始数据：各国家频道统计</span>
                        </div>
                        <table class="pattern-data-table">
                            <thead>
                                <tr><th>国家/地区</th><th>频道数</th><th>总播放</th><th>均播放</th><th>均订阅</th><th>效率</th></tr>
                            </thead>
                            <tbody id="countryDistTableBody">
                                <tr><td colspan="6" style="text-align:center; color:#94a3b8;">加载中...</td></tr>
                            </tbody>
                        </table>
                    </div>
                    <!-- 结论（全宽） -->
                    <div class="pattern-conclusion-section" style="margin-top: 16px;">
                        <div class="pattern-conclusion-title">
                            <span>💡</span>
                            <span>结论与行动建议</span>
                        </div>
                        <div class="pattern-conclusion-text" id="countryDistConclusion">
                            分析各国家/地区频道的表现差异，了解竞争格局和市场机会。
                        </div>
                        <div class="pattern-actions" id="countryDistActions">
                            <span class="pattern-action do">✅ 关注高效率国家的频道策略</span>
                            <span class="pattern-action do">✅ 分析低竞争地区的机会</span>
                            <span class="pattern-action avoid">⚠️ 避免盲目进入高度饱和市场</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 模式12: 频道竞争格局 -->
            <div class="sub-pattern-content" id="tab1-sub3">
                <div class="pattern-detail" style="grid-template-columns: 1fr;">
                    <!-- 图表1：频道竞争格局散点图 -->
                    <div style="background: #1e293b; border-radius: 8px; padding: 12px 16px; border: 1px solid #334155;">
                        <!-- 标题行：标题 + 统计信息 -->
                        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 8px;">
                            <div style="color: #f1f5f9; font-size: 14px; font-weight: 500;">频道竞争格局（订阅数分布）</div>
                            <div style="display: flex; align-items: center; gap: 16px; font-size: 12px;">
                                <span><span style="color: #64748b;">频道</span> <span id="subsDistChannelCount" style="color: #06b6d4; font-weight: 600;">--</span></span>
                                <span><span style="color: #64748b;">中位数</span> <span id="subsDistMedian" style="color: #f97316; font-weight: 600;">--</span></span>
                                <span><span style="color: #64748b;">最高</span> <span id="subsDistMax" style="color: #10b981; font-weight: 600;">--</span></span>
                            </div>
                        </div>
                        <!-- 图表：散点图 -->
                        <div style="height: 380px; position: relative;">
                            <canvas id="subsDistScatter"></canvas>
                        </div>
                        <!-- 图例说明 -->
                        <div style="display: flex; justify-content: center; gap: 24px; margin-top: 8px; font-size: 11px;">
                            <span><span style="display: inline-block; width: 10px; height: 10px; background: #06b6d4; border-radius: 50%; margin-right: 4px;"></span><span style="color: #94a3b8;">&lt;1万</span></span>
                            <span><span style="display: inline-block; width: 10px; height: 10px; background: #10b981; border-radius: 50%; margin-right: 4px;"></span><span style="color: #94a3b8;">1-10万</span></span>
                            <span><span style="display: inline-block; width: 10px; height: 10px; background: #f97316; border-radius: 50%; margin-right: 4px;"></span><span style="color: #94a3b8;">10-100万</span></span>
                            <span><span style="display: inline-block; width: 10px; height: 10px; background: #ef4444; border-radius: 50%; margin-right: 4px;"></span><span style="color: #94a3b8;">&gt;100万</span></span>
                        </div>
                        <!-- 数据解读 -->
                        <div class="chart-insight" id="subsDistInsight" style="margin-top: 12px;">
                            <div class="chart-insight-title">📖 数据解读</div>
                            <div class="chart-insight-content">加载中...</div>
                        </div>
                    </div>
                    <!-- 结论与行动建议 -->
                    <div class="pattern-conclusion-section" style="margin-top: 16px;">
                        <div class="pattern-conclusion-title">
                            <span>💡</span>
                            <span>结论与行动建议</span>
                        </div>
                        <div class="pattern-conclusion-text" id="subsDistConclusion">
                            分析频道粉丝分布，了解市场竞争格局和进入难度。
                        </div>
                        <div class="pattern-actions" id="subsDistActions">
                            <span class="pattern-action do">✅ 加载中...</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 模式31: 高手画像 -->
            <!-- 模式43: 语言分布（从用户洞察移来） -->
            <div class="sub-pattern-content" id="tab1-sub4">
                <div class="pattern-detail" style="grid-template-columns: 1fr;">
                    <!-- 图表：语言分布水平条形图 -->
                    <div style="background: #1e293b; border-radius: 8px; padding: 12px 16px; border: 1px solid #334155;">
                        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 8px;">
                            <div style="color: #f1f5f9; font-size: 14px; font-weight: 500;">用户语言分布</div>
                            <div style="display: flex; align-items: center; gap: 16px; font-size: 12px;">
                                <span id="languageSample" style="color: #64748b;">加载中...</span>
                            </div>
                        </div>
                        <!-- 图表：水平条形图 -->
                        <div style="height: 280px; position: relative;">
                            <canvas id="languageDistChart"></canvas>
                        </div>
                        <!-- 数据解读 -->
                        <div class="chart-insight" id="languageInsight" style="margin-top: 12px;">
                            <div class="chart-insight-title">📖 数据解读</div>
                            <div class="chart-insight-content">
                                分析评论使用的语言分布，了解用户群体的语言特征。简体中文 vs 繁体中文的比例可以帮助判断主要受众地区。
                            </div>
                            <div style="font-size: 0.85em; color: #64748b; margin-top: 8px;">
                                💡 如果繁体用户占比高，建议同时提供繁体字幕；如果有英语用户，可考虑添加英文字幕扩大受众。
                            </div>
                        </div>
                    </div>
                    <!-- 结论 -->
                    <div class="pattern-conclusion-section" style="margin-top: 16px;">
                        <div class="pattern-conclusion-title">
                            <span>💡</span>
                            <span>结论与行动建议</span>
                        </div>
                        <div class="pattern-conclusion-text" id="languageConclusion">
                            基于评论语言分析用户地区分布，制定针对性的内容本地化策略。
                        </div>
                        <div class="pattern-actions" id="languageActions">
                            <span class="pattern-action do">✅ 根据用户语言选择字幕策略</span>
                            <span class="pattern-action do">✅ 针对主要用户群体优化内容</span>
                            <span class="pattern-action avoid">⚠️ 注意简繁体用语差异</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tab 2: 套利分析（整合榜单 + 中心性分析） -->
        <div class="pattern-tab-content" id="tab2">
            <div class="tab-content-header">
                <div class="tab-content-title">
                    <span class="title-icon">💰</span>
                    <div>
                        <h3>套利分析</h3>
                        <div class="title-desc">基于网络中心性发现被低估的内容机会</div>
                    </div>
                </div>
                <div class="tab-output-badge">
                    <span>📊</span>
                    <span id="arbitrageStats">⏳ 首次加载约5秒，请稍候...</span>
                </div>
            </div>

            <!-- 子标签页导航 -->
            <div class="sub-pattern-tabs">
                <button class="sub-pattern-tab active" onclick="switchSubPattern('tab2', 'sub0')">
                    <span class="sub-tab-badge">🎯</span>
                    <span>套利机会</span>
                </button>
                <button class="sub-pattern-tab" onclick="switchSubPattern('tab2', 'sub1')">
                    <span class="sub-tab-badge">🔗</span>
                    <span>中介中心性 Top50</span>
                </button>
                <button class="sub-pattern-tab" onclick="switchSubPattern('tab2', 'sub2')">
                    <span class="sub-tab-badge">🌐</span>
                    <span>程度中心性 Top50</span>
                </button>
                <button class="sub-pattern-tab" onclick="switchSubPattern('tab2', 'sub3')">
                    <span class="sub-tab-badge">🚀</span>
                    <span>黑马频道</span>
                </button>
                <button class="sub-pattern-tab" onclick="switchSubPattern('tab2', 'sub4')">
                    <span class="sub-tab-badge">🔥</span>
                    <span>热门视频</span>
                </button>
                <button class="sub-pattern-tab" onclick="switchSubPattern('tab2', 'sub5')">
                    <span class="sub-tab-badge">👑</span>
                    <span>头部频道</span>
                </button>
            </div>

            <!-- Sub0: 套利机会 -->
            <div class="sub-pattern-content active" id="tab2-sub0">
                <div class="pattern-detail" style="grid-template-columns: 1fr;">
                    <!-- 网络图面板（常驻显示） -->
                    <div id="networkGraphPanel" style="background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%); border-radius: 12px; padding: 20px; border: 1px solid #334155; margin-bottom: 20px;">
                        <!-- 标题和控制栏 -->
                        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
                            <div style="display: flex; align-items: center; gap: 12px;">
                                <div style="background: #06b6d4; width: 40px; height: 40px; border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 20px;">🌐</div>
                                <div>
                                    <div style="color: #f1f5f9; font-size: 15px; font-weight: 600;">话题共现网络</div>
                                    <div style="color: #64748b; font-size: 12px;">点击下方卡片切换视角 | 滚轮缩放 | 拖拽移动</div>
                                </div>
                            </div>
                            <div style="display: flex; align-items: center; gap: 12px;">
                                <div style="display: flex; gap: 6px;">
                                    <button class="chart-view-btn active" data-view="topic" onclick="switchNetworkType('topic')" style="padding: 6px 12px; font-size: 12px;">话题网络</button>
                                    <button class="chart-view-btn" data-view="channel" onclick="switchNetworkType('channel')" style="padding: 6px 12px; font-size: 12px;">频道网络</button>
                                </div>
                                <select id="networkNodeCount" onchange="updateNetworkGraph()" style="background: #334155; color: #f1f5f9; border: none; padding: 6px 10px; border-radius: 6px; font-size: 12px;">
                                    <option value="30">30节点</option>
                                    <option value="50" selected>50节点</option>
                                    <option value="80">80节点</option>
                                </select>
                                <button onclick="resetNetworkView()" style="background: #334155; color: #94a3b8; border: none; padding: 6px 10px; border-radius: 6px; font-size: 12px; cursor: pointer;">重置</button>
                            </div>
                        </div>

                        <!-- 网络图容器 -->
                        <div id="networkGraphContainer" style="height: 380px; background: #0f172a; border-radius: 10px; border: 1px solid #334155; position: relative;">
                            <div id="networkLoading" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: #64748b; font-size: 14px;">
                                正在加载网络图...
                            </div>
                        </div>

                        <!-- 图例说明（简洁版） -->
                        <div id="networkLegend" style="margin-top: 12px; display: flex; align-items: center; justify-content: space-between; padding: 8px 12px; background: rgba(15, 23, 42, 0.5); border-radius: 8px;">
                            <div id="legendBetweenness" style="display: flex; align-items: center; gap: 16px;">
                                <span style="color: #94a3b8; font-size: 12px;">🌉 桥梁价值：</span>
                                <span style="display: inline-flex; align-items: center; gap: 4px; font-size: 11px;">
                                    <span style="width: 12px; height: 12px; border-radius: 50%; background: #ef4444;"></span><span style="color: #ef4444;">高</span>
                                </span>
                                <span style="display: inline-flex; align-items: center; gap: 4px; font-size: 11px;">
                                    <span style="width: 10px; height: 10px; border-radius: 50%; background: #f97316;"></span><span style="color: #f97316;">中高</span>
                                </span>
                                <span style="display: inline-flex; align-items: center; gap: 4px; font-size: 11px;">
                                    <span style="width: 8px; height: 8px; border-radius: 50%; background: #eab308;"></span><span style="color: #eab308;">中</span>
                                </span>
                                <span style="display: inline-flex; align-items: center; gap: 4px; font-size: 11px;">
                                    <span style="width: 6px; height: 6px; border-radius: 50%; background: #64748b;"></span><span style="color: #64748b;">低</span>
                                </span>
                            </div>
                            <div id="legendDegree" style="display: none; align-items: center; gap: 16px;">
                                <span style="color: #94a3b8; font-size: 12px;">🔥 连接热度：</span>
                                <span style="display: inline-flex; align-items: center; gap: 4px; font-size: 11px;">
                                    <span style="width: 12px; height: 12px; border-radius: 50%; background: #9333ea;"></span><span style="color: #a855f7;">高</span>
                                </span>
                                <span style="display: inline-flex; align-items: center; gap: 4px; font-size: 11px;">
                                    <span style="width: 10px; height: 10px; border-radius: 50%; background: #3b82f6;"></span><span style="color: #60a5fa;">中高</span>
                                </span>
                                <span style="display: inline-flex; align-items: center; gap: 4px; font-size: 11px;">
                                    <span style="width: 8px; height: 8px; border-radius: 50%; background: #22d3ee;"></span><span style="color: #22d3ee;">中</span>
                                </span>
                                <span style="display: inline-flex; align-items: center; gap: 4px; font-size: 11px;">
                                    <span style="width: 6px; height: 6px; border-radius: 50%; background: #64748b;"></span><span style="color: #64748b;">低</span>
                                </span>
                            </div>
                            <div id="legendArbitrage" style="display: none; align-items: center; gap: 16px;">
                                <span style="color: #94a3b8; font-size: 12px;">💎 套利机会：</span>
                                <span style="display: inline-flex; align-items: center; gap: 4px; font-size: 11px;">
                                    <span style="width: 12px; height: 12px; border-radius: 50%; background: #ef4444;"></span><span style="color: #ef4444;">最佳</span>
                                </span>
                                <span style="display: inline-flex; align-items: center; gap: 4px; font-size: 11px;">
                                    <span style="width: 10px; height: 10px; border-radius: 50%; background: #f97316;"></span><span style="color: #f97316;">有机会</span>
                                </span>
                                <span style="display: inline-flex; align-items: center; gap: 4px; font-size: 11px;">
                                    <span style="width: 8px; height: 8px; border-radius: 50%; background: #22c55e;"></span><span style="color: #22c55e;">已饱和</span>
                                </span>
                                <span style="display: inline-flex; align-items: center; gap: 4px; font-size: 11px;">
                                    <span style="width: 6px; height: 6px; border-radius: 50%; background: #64748b;"></span><span style="color: #64748b;">一般</span>
                                </span>
                            </div>
                            <span style="color: #475569; font-size: 11px;">圆越大 = 连接越多</span>
                        </div>

                        <!-- 节点详情悬浮卡 -->
                        <div id="nodeTooltip" style="display: none; position: fixed; background: #1e293b; border: 1px solid #475569; border-radius: 8px; padding: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.3); z-index: 1000; max-width: 300px; pointer-events: none;"></div>
                    </div>

                    <!-- 三个中心性卡片 + TOP列表 -->
                    <div style="background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%); border-radius: 12px; padding: 20px; border: 1px solid #334155; margin-bottom: 20px;">
                        <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 16px;">
                            <div style="background: #f97316; width: 40px; height: 40px; border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 20px;">📐</div>
                            <div>
                                <div style="color: #f1f5f9; font-size: 15px; font-weight: 600;">套利空间 = 中介中心性 / 程度中心性</div>
                                <div style="color: #94a3b8; font-size: 12px;">点击卡片切换网络图着色模式</div>
                            </div>
                        </div>
                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px;">
                            <!-- 中介中心性卡片 -->
                            <div class="centrality-card active" id="betweennessCard" onclick="toggleCentralityChart('betweenness')" style="background: rgba(6, 182, 212, 0.15); padding: 14px; border-radius: 10px; border: 2px solid rgba(6, 182, 212, 0.5); cursor: pointer; transition: all 0.2s;">
                                <div style="display: flex; align-items: center; justify-content: space-between;">
                                    <div style="color: #06b6d4; font-size: 13px; font-weight: 600;">🔗 中介中心性</div>
                                    <span class="card-check" style="color: #06b6d4; font-size: 14px;">✓</span>
                                </div>
                                <div style="color: #94a3b8; font-size: 11px; margin-top: 6px;">衡量"桥梁"作用</div>
                                <div id="betweennessTop3" style="margin-top: 10px; font-size: 11px; color: #64748b;"></div>
                            </div>
                            <!-- 程度中心性卡片 -->
                            <div class="centrality-card" id="degreeCard" onclick="toggleCentralityChart('degree')" style="background: rgba(168, 85, 247, 0.1); padding: 14px; border-radius: 10px; border: 1px solid rgba(168, 85, 247, 0.3); cursor: pointer; transition: all 0.2s;">
                                <div style="display: flex; align-items: center; justify-content: space-between;">
                                    <div style="color: #a855f7; font-size: 13px; font-weight: 600;">🌐 程度中心性</div>
                                    <span class="card-check" style="color: #a855f7; font-size: 14px; opacity: 0;">✓</span>
                                </div>
                                <div style="color: #94a3b8; font-size: 11px; margin-top: 6px;">衡量"连接广度"</div>
                                <div id="degreeTop3" style="margin-top: 10px; font-size: 11px; color: #64748b;"></div>
                            </div>
                            <!-- 套利机会卡片 -->
                            <div class="centrality-card" id="arbitrageCard" onclick="toggleCentralityChart('arbitrage')" style="background: rgba(249, 115, 22, 0.1); padding: 14px; border-radius: 10px; border: 1px solid rgba(249, 115, 22, 0.3); cursor: pointer; transition: all 0.2s;">
                                <div style="display: flex; align-items: center; justify-content: space-between;">
                                    <div style="color: #f97316; font-size: 13px; font-weight: 600;">💰 套利机会</div>
                                    <span class="card-check" style="color: #f97316; font-size: 14px; opacity: 0;">✓</span>
                                </div>
                                <div style="color: #94a3b8; font-size: 11px; margin-top: 6px;">高桥梁 + 低热度</div>
                                <div id="arbitrageTop3" style="margin-top: 10px; font-size: 11px; color: #64748b;"></div>
                            </div>
                        </div>
                    </div>

                    <!-- 套利机会视频榜 -->
                    <div style="background: #1e293b; border-radius: 8px; padding: 16px; border: 1px solid #334155; margin-bottom: 16px;">
                        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
                            <div>
                                <div style="color: #f1f5f9; font-size: 16px; font-weight: 600;">🎯 套利机会视频（高中介 + 低播放）</div>
                                <div style="color: #64748b; font-size: 12px; margin-top: 4px;">这些视频处于话题交叉点，但播放量低于平均，值得深入分析</div>
                            </div>
                            <div style="display: flex; align-items: center; gap: 12px;">
                                <span style="color: #64748b; font-size: 12px;">数量 <span id="arbitrageVideosCount" style="color: #10b981; font-weight: 600;">--</span></span>
                                <a href="#" onclick="goToCreatorAction('tab1', 'arbitrage-video')" class="arbitrage-action-link">
                                    <span>去选题</span>
                                    <span>→</span>
                                </a>
                            </div>
                        </div>
                        <div class="pattern-data-section" style="margin: 0; max-height: 400px; overflow-y: auto;">
                            <table class="pattern-data-table">
                                <thead>
                                    <tr>
                                        <th style="width: 50px;">#</th>
                                        <th>视频标题</th>
                                        <th style="text-align: right;">中介中心性</th>
                                        <th>话题</th>
                                        <th style="text-align: right;">播放量</th>
                                        <th style="text-align: center;">状态</th>
                                    </tr>
                                </thead>
                                <tbody id="arbitrageVideosTableBody">
                                    <tr><td colspan="6" style="text-align: center; color: #94a3b8; padding: 40px;">⏳ 正在计算中心性（首次约5秒）...</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- 套利机会频道榜 -->
                    <div style="background: #1e293b; border-radius: 8px; padding: 16px; border: 1px solid #334155; margin-bottom: 16px;">
                        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
                            <div>
                                <div style="color: #f1f5f9; font-size: 16px; font-weight: 600;">🚀 高潜力频道（高中介 + 低粉丝）</div>
                                <div style="color: #64748b; font-size: 12px; margin-top: 4px;">这些频道跨越多个话题领域，但粉丝数低于平均，值得学习</div>
                            </div>
                            <div style="display: flex; align-items: center; gap: 12px;">
                                <span style="color: #64748b; font-size: 12px;">数量 <span id="arbitrageChannelsCount" style="color: #10b981; font-weight: 600;">--</span></span>
                                <a href="#" onclick="goToCreatorAction('tab3', 'arbitrage-channel')" class="arbitrage-action-link">
                                    <span>去运营</span>
                                    <span>→</span>
                                </a>
                            </div>
                        </div>
                        <div class="pattern-data-section" style="margin: 0; max-height: 400px; overflow-y: auto;">
                            <table class="pattern-data-table">
                                <thead>
                                    <tr>
                                        <th style="width: 50px;">#</th>
                                        <th>频道名称</th>
                                        <th style="text-align: right;">中介中心性</th>
                                        <th style="text-align: right;">话题数</th>
                                        <th style="text-align: right;">订阅数</th>
                                        <th style="text-align: center;">状态</th>
                                    </tr>
                                </thead>
                                <tbody id="arbitrageChannelsTableBody">
                                    <tr><td colspan="6" style="text-align: center; color: #94a3b8; padding: 40px;">⏳ 正在计算中心性（首次约5秒）...</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- 套利话题榜（新增） -->
                    <div style="background: #1e293b; border-radius: 8px; padding: 16px; border: 1px solid #334155; margin-bottom: 16px;">
                        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
                            <div>
                                <div style="color: #f1f5f9; font-size: 16px; font-weight: 600;">🏝️ 蓝海话题（高中介 + 低视频数）</div>
                                <div style="color: #64748b; font-size: 12px; margin-top: 4px;">连接不同内容社群的桥梁话题，但视频数低于平均，内容稀缺</div>
                            </div>
                            <div style="display: flex; align-items: center; gap: 12px;">
                                <span style="color: #64748b; font-size: 12px;">数量 <span id="arbitrageTopicsCount" style="color: #f59e0b; font-weight: 600;">--</span></span>
                                <a href="#" onclick="goToCreatorAction('tab1', 'arbitrage-topic')" class="arbitrage-action-link">
                                    <span>去选题</span>
                                    <span>→</span>
                                </a>
                            </div>
                        </div>
                        <div class="pattern-data-section" style="margin: 0; max-height: 400px; overflow-y: auto;">
                            <table class="pattern-data-table">
                                <thead>
                                    <tr>
                                        <th style="width: 50px;">#</th>
                                        <th>话题</th>
                                        <th style="text-align: right;">中介中心性</th>
                                        <th style="text-align: right;">视频数</th>
                                        <th style="text-align: right;">均播</th>
                                        <th style="text-align: center;">状态</th>
                                    </tr>
                                </thead>
                                <tbody id="arbitrageTopicsTableBody">
                                    <tr><td colspan="6" style="text-align: center; color: #94a3b8; padding: 40px;">⏳ 正在计算中心性（首次约5秒）...</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- 套利标题词榜（新增） -->
                    <div style="background: #1e293b; border-radius: 8px; padding: 16px; border: 1px solid #334155;">
                        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
                            <div>
                                <div style="color: #f1f5f9; font-size: 16px; font-weight: 600;">🔑 价值关键词（高中介 + 低使用频率）</div>
                                <div style="color: #64748b; font-size: 12px; margin-top: 4px;">连接不同内容群体的桥梁词汇，但使用频率低于平均，可尝试使用</div>
                            </div>
                            <div style="display: flex; align-items: center; gap: 12px;">
                                <span style="color: #64748b; font-size: 12px;">数量 <span id="arbitrageWordsCount" style="color: #8b5cf6; font-weight: 600;">--</span></span>
                                <a href="#" onclick="goToCreatorAction('tab2', 'arbitrage-keyword')" class="arbitrage-action-link">
                                    <span>去创作</span>
                                    <span>→</span>
                                </a>
                            </div>
                        </div>
                        <div class="pattern-data-section" style="margin: 0; max-height: 400px; overflow-y: auto;">
                            <table class="pattern-data-table">
                                <thead>
                                    <tr>
                                        <th style="width: 50px;">#</th>
                                        <th>关键词</th>
                                        <th style="text-align: right;">中介中心性</th>
                                        <th style="text-align: right;">使用次数</th>
                                        <th style="text-align: right;">均播</th>
                                        <th style="text-align: center;">状态</th>
                                    </tr>
                                </thead>
                                <tbody id="arbitrageWordsTableBody">
                                    <tr><td colspan="6" style="text-align: center; color: #94a3b8; padding: 40px;">⏳ 正在计算中心性（首次约5秒）...</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sub1: 中介中心性 Top50 -->
            <div class="sub-pattern-content" id="tab2-sub1">
                <div class="pattern-detail" style="grid-template-columns: 1fr;">
                    <!-- 中介中心性话题榜 -->
                    <div style="background: #1e293b; border-radius: 8px; padding: 16px; border: 1px solid #334155; margin-bottom: 16px;">
                        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
                            <div>
                                <div style="color: #f1f5f9; font-size: 16px; font-weight: 600;">🔗 话题中介中心性 Top50</div>
                                <div style="color: #64748b; font-size: 12px; margin-top: 4px;">高中介中心性的话题是连接不同内容社群的"桥梁"</div>
                            </div>
                            <span style="color: #64748b; font-size: 12px;">数量 <span id="betweennessTopicsCount" style="color: #06b6d4; font-weight: 600;">--</span></span>
                        </div>
                        <div class="pattern-data-section" style="margin: 0; max-height: 300px; overflow-y: auto;">
                            <table class="pattern-data-table">
                                <thead>
                                    <tr>
                                        <th style="width: 50px;">#</th>
                                        <th>话题</th>
                                        <th style="text-align: right;">中介中心性</th>
                                        <th style="text-align: right;">程度中心性</th>
                                        <th style="text-align: right;">有趣度</th>
                                        <th style="text-align: right;">均播</th>
                                    </tr>
                                </thead>
                                <tbody id="betweennessTopicsTableBody">
                                    <tr><td colspan="6" style="text-align: center; color: #94a3b8; padding: 40px;">加载中...</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- 中介中心性频道榜 -->
                    <div style="background: #1e293b; border-radius: 8px; padding: 16px; border: 1px solid #334155; margin-bottom: 16px;">
                        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
                            <div>
                                <div style="color: #f1f5f9; font-size: 16px; font-weight: 600;">🔗 频道中介中心性 Top50</div>
                                <div style="color: #64748b; font-size: 12px; margin-top: 4px;">跨话题运营的频道，连接不同受众群体</div>
                            </div>
                            <span style="color: #64748b; font-size: 12px;">数量 <span id="betweennessChannelsCount" style="color: #f97316; font-weight: 600;">--</span></span>
                        </div>
                        <div class="pattern-data-section" style="margin: 0; max-height: 300px; overflow-y: auto;">
                            <table class="pattern-data-table">
                                <thead>
                                    <tr>
                                        <th style="width: 50px;">#</th>
                                        <th>频道名称</th>
                                        <th style="text-align: right;">中介中心性</th>
                                        <th style="text-align: right;">程度中心性</th>
                                        <th style="text-align: right;">话题数</th>
                                        <th style="text-align: right;">均播</th>
                                        <th style="text-align: right;">订阅</th>
                                    </tr>
                                </thead>
                                <tbody id="betweennessChannelsTableBody">
                                    <tr><td colspan="7" style="text-align: center; color: #94a3b8; padding: 40px;">加载中...</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- 中介中心性视频榜 -->
                    <div style="background: #1e293b; border-radius: 8px; padding: 16px; border: 1px solid #334155;">
                        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
                            <div>
                                <div style="color: #f1f5f9; font-size: 16px; font-weight: 600;">🔗 视频中介中心性 Top50</div>
                                <div style="color: #64748b; font-size: 12px; margin-top: 4px;">继承所属话题的中介中心性</div>
                            </div>
                            <span style="color: #64748b; font-size: 12px;">数量 <span id="betweennessVideosCount" style="color: #a855f7; font-weight: 600;">--</span></span>
                        </div>
                        <div class="pattern-data-section" style="margin: 0; max-height: 300px; overflow-y: auto;">
                            <table class="pattern-data-table">
                                <thead>
                                    <tr>
                                        <th style="width: 50px;">#</th>
                                        <th>视频标题</th>
                                        <th style="text-align: right;">中介中心性</th>
                                        <th>话题</th>
                                        <th style="text-align: right;">播放量</th>
                                        <th style="text-align: right;">订阅</th>
                                    </tr>
                                </thead>
                                <tbody id="betweennessVideosTableBody">
                                    <tr><td colspan="6" style="text-align: center; color: #94a3b8; padding: 40px;">加载中...</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sub2: 程度中心性 Top50 -->
            <div class="sub-pattern-content" id="tab2-sub2">
                <div class="pattern-detail" style="grid-template-columns: 1fr;">
                    <!-- 程度中心性话题榜 -->
                    <div style="background: #1e293b; border-radius: 8px; padding: 16px; border: 1px solid #334155; margin-bottom: 16px;">
                        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
                            <div>
                                <div style="color: #f1f5f9; font-size: 16px; font-weight: 600;">🌐 话题程度中心性 Top50</div>
                                <div style="color: #64748b; font-size: 12px; margin-top: 4px;">与其他话题连接最广泛的话题</div>
                            </div>
                            <span style="color: #64748b; font-size: 12px;">数量 <span id="degreeTopicsCount" style="color: #06b6d4; font-weight: 600;">--</span></span>
                        </div>
                        <div class="pattern-data-section" style="margin: 0; max-height: 300px; overflow-y: auto;">
                            <table class="pattern-data-table">
                                <thead>
                                    <tr>
                                        <th style="width: 50px;">#</th>
                                        <th>话题</th>
                                        <th style="text-align: right;">程度中心性</th>
                                        <th style="text-align: right;">中介中心性</th>
                                        <th style="text-align: right;">视频数</th>
                                        <th style="text-align: right;">均播</th>
                                    </tr>
                                </thead>
                                <tbody id="degreeTopicsTableBody">
                                    <tr><td colspan="6" style="text-align: center; color: #94a3b8; padding: 40px;">加载中...</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- 程度中心性频道榜 -->
                    <div style="background: #1e293b; border-radius: 8px; padding: 16px; border: 1px solid #334155; margin-bottom: 16px;">
                        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
                            <div>
                                <div style="color: #f1f5f9; font-size: 16px; font-weight: 600;">🌐 频道程度中心性 Top50</div>
                                <div style="color: #64748b; font-size: 12px; margin-top: 4px;">与其他频道关联最广泛的频道</div>
                            </div>
                            <span style="color: #64748b; font-size: 12px;">数量 <span id="degreeChannelsCount" style="color: #f97316; font-weight: 600;">--</span></span>
                        </div>
                        <div class="pattern-data-section" style="margin: 0; max-height: 300px; overflow-y: auto;">
                            <table class="pattern-data-table">
                                <thead>
                                    <tr>
                                        <th style="width: 50px;">#</th>
                                        <th>频道名称</th>
                                        <th style="text-align: right;">程度中心性</th>
                                        <th style="text-align: right;">中介中心性</th>
                                        <th style="text-align: right;">话题数</th>
                                        <th style="text-align: right;">均播</th>
                                        <th style="text-align: right;">订阅</th>
                                    </tr>
                                </thead>
                                <tbody id="degreeChannelsTableBody">
                                    <tr><td colspan="7" style="text-align: center; color: #94a3b8; padding: 40px;">加载中...</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- 程度中心性视频榜 -->
                    <div style="background: #1e293b; border-radius: 8px; padding: 16px; border: 1px solid #334155;">
                        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
                            <div>
                                <div style="color: #f1f5f9; font-size: 16px; font-weight: 600;">🌐 视频程度中心性 Top50</div>
                                <div style="color: #64748b; font-size: 12px; margin-top: 4px;">与同话题视频关联最广泛</div>
                            </div>
                            <span style="color: #64748b; font-size: 12px;">数量 <span id="degreeVideosCount" style="color: #a855f7; font-weight: 600;">--</span></span>
                        </div>
                        <div class="pattern-data-section" style="margin: 0; max-height: 300px; overflow-y: auto;">
                            <table class="pattern-data-table">
                                <thead>
                                    <tr>
                                        <th style="width: 50px;">#</th>
                                        <th>视频标题</th>
                                        <th style="text-align: right;">程度中心性</th>
                                        <th>话题</th>
                                        <th style="text-align: right;">播放量</th>
                                        <th style="text-align: right;">订阅</th>
                                    </tr>
                                </thead>
                                <tbody id="degreeVideosTableBody">
                                    <tr><td colspan="6" style="text-align: center; color: #94a3b8; padding: 40px;">加载中...</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sub3: 黑马频道 -->
            <div class="sub-pattern-content" id="tab2-sub3">
                <div class="pattern-detail" style="grid-template-columns: 1fr;">
                    <div style="background: #1e293b; border-radius: 8px; padding: 16px; border: 1px solid #334155;">
                        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
                            <div>
                                <div style="color: #f1f5f9; font-size: 16px; font-weight: 600;">🚀 黑马频道排行榜</div>
                                <div style="color: #64748b; font-size: 12px; margin-top: 4px;">订阅数较少但播放量表现惊人的频道 · 黑马指数 = 平均播放量 / 订阅数</div>
                            </div>
                            <span style="color: #64748b; font-size: 12px;">数量 <span id="darkHorseChannelsCount" style="color: #06b6d4; font-weight: 600;">--</span></span>
                        </div>
                        <div class="pattern-data-section" style="margin: 0; max-height: 600px; overflow-y: auto;">
                            <table class="pattern-data-table">
                                <thead>
                                    <tr>
                                        <th style="width: 50px;">#</th>
                                        <th>频道名称</th>
                                        <th style="text-align: right;">视频数</th>
                                        <th style="text-align: right;">平均播放</th>
                                        <th style="text-align: right;">订阅数</th>
                                        <th style="text-align: right;">黑马指数</th>
                                    </tr>
                                </thead>
                                <tbody id="darkHorseChannelsTableBody">
                                    <tr><td colspan="6" style="text-align: center; color: #94a3b8; padding: 40px;">加载中...</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sub4: 热门视频 -->
            <div class="sub-pattern-content" id="tab2-sub4">
                <div class="pattern-detail" style="grid-template-columns: 1fr;">
                    <div style="background: #1e293b; border-radius: 8px; padding: 16px; border: 1px solid #334155;">
                        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
                            <div>
                                <div style="color: #f1f5f9; font-size: 16px; font-weight: 600;">🔥 热门视频排行榜（按播放量）</div>
                                <div style="color: #64748b; font-size: 12px; margin-top: 4px;">播放量最高的视频</div>
                            </div>
                            <span style="color: #64748b; font-size: 12px;">数量 <span id="topVideosByViewsCount" style="color: #f97316; font-weight: 600;">--</span></span>
                        </div>
                        <div class="pattern-data-section" style="margin: 0; max-height: 600px; overflow-y: auto;">
                            <table class="pattern-data-table">
                                <thead>
                                    <tr>
                                        <th style="width: 50px;">#</th>
                                        <th>视频标题</th>
                                        <th>频道</th>
                                        <th style="text-align: right;">播放量</th>
                                        <th style="text-align: right;">点赞</th>
                                    </tr>
                                </thead>
                                <tbody id="topVideosByViewsTableBody">
                                    <tr><td colspan="5" style="text-align: center; color: #94a3b8; padding: 40px;">加载中...</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sub5: 头部频道 -->
            <div class="sub-pattern-content" id="tab2-sub5">
                <div class="pattern-detail" style="grid-template-columns: 1fr;">
                    <div style="background: #1e293b; border-radius: 8px; padding: 16px; border: 1px solid #334155;">
                        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
                            <div>
                                <div style="color: #f1f5f9; font-size: 16px; font-weight: 600;">👑 头部频道排行榜（按粉丝数）</div>
                                <div style="color: #64748b; font-size: 12px; margin-top: 4px;">订阅数最高的频道</div>
                            </div>
                            <span style="color: #64748b; font-size: 12px;">数量 <span id="topChannelsBySubsCount" style="color: #a855f7; font-weight: 600;">--</span></span>
                        </div>
                        <div class="pattern-data-section" style="margin: 0; max-height: 600px; overflow-y: auto;">
                            <table class="pattern-data-table">
                                <thead>
                                    <tr>
                                        <th style="width: 50px;">#</th>
                                        <th>频道名称</th>
                                        <th style="text-align: right;">订阅数</th>
                                        <th style="text-align: right;">均播</th>
                                        <th style="text-align: right;">视频数</th>
                                    </tr>
                                </thead>
                                <tbody id="topChannelsBySubsTableBody">
                                    <tr><td colspan="5" style="text-align: center; color: #94a3b8; padding: 40px;">加载中...</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tab 3: 选题决策 -->
        <div class="pattern-tab-content" id="tab3">
            <div class="tab-content-header">
                <div class="tab-content-title">
                    <span class="title-icon">🎯</span>
                    <div>
                        <h3>选题决策</h3>
                        <div class="title-desc">基于数据选择高潜力选题</div>
                    </div>
                </div>
                <div class="tab-output-badge">
                    <span>📅</span>
                    <span>产出: <strong>3个月选题计划</strong></span>
                </div>
            </div>

            <!-- 子标签页导航 -->
            <div class="sub-pattern-tabs">
                <button class="sub-pattern-tab active" onclick="switchSubPattern('tab3', 'sub1')">
                    <span class="sub-tab-badge">模式13</span>
                    <span>话题生命周期</span>
                </button>
                <button class="sub-pattern-tab" onclick="switchSubPattern('tab3', 'sub2')">
                    <span class="sub-tab-badge">模式23</span>
                    <span>话题垄断度</span>
                </button>
                <button class="sub-pattern-tab" onclick="switchSubPattern('tab3', 'sub3')">
                    <span class="sub-tab-badge">模式4</span>
                    <span>内容类型天花板</span>
                </button>
            </div>

            <!-- 模式13: 话题生命周期 -->
            <div class="sub-pattern-content active" id="tab3-sub1">
                <div class="pattern-detail">
                    <div class="pattern-data-section">
                        <div class="data-section-title">话题生命周期全景</div>
                        <table class="pattern-data-table">
                            <thead>
                                <tr>
                                    <th>话题</th>
                                    <th>活跃跨度</th>
                                    <th>平均播放</th>
                                    <th>阶段</th>
                                </tr>
                            </thead>
                            <tbody id="lifecycleTableBody">
                                <tr>
                                    <td colspan="4" style="text-align: center; color: var(--color-text-muted);">加载中...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="pattern-viz-section">
                        <div class="viz-section-title">话题热度变化趋势</div>
                        <div class="bar-chart" id="lifecycleBarChart">
                            <div style="color: #94a3b8; text-align: center; padding: 20px;">加载中...</div>
                        </div>
                    </div>
                    <div class="pattern-conclusion-section">
                        <div class="conclusion-title">话题选择策略</div>
                        <div class="conclusion-text" id="lifecycleConclusion">分析中...</div>
                        <div class="pattern-actions" id="lifecycleActions">
                        </div>
                    </div>
                </div>
            </div>

            <!-- 模式23: 话题垄断度 -->
            <div class="sub-pattern-content" id="tab3-sub2">
                <div class="pattern-detail">
                    <div class="pattern-data-section">
                        <div class="data-section-title">话题垄断度分析</div>
                        <table class="pattern-data-table">
                            <thead>
                                <tr>
                                    <th>话题</th>
                                    <th>Top3份额</th>
                                    <th>竞争格局</th>
                                    <th>机会</th>
                                </tr>
                            </thead>
                            <tbody id="topicMonopolyTableBody">
                                <tr><td colspan="4" style="text-align:center; color:#94a3b8;">加载中...</td></tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="pattern-viz-section">
                        <div class="viz-section-title">各话题 Top3 垄断度对比</div>
                        <div class="bar-chart" id="monopolyBarChart">
                            <!-- 将由 JS 动态填充 -->
                            <div style="color: #94a3b8; text-align: center; padding: 20px;">加载中...</div>
                        </div>
                    </div>
                    <div class="pattern-conclusion-section">
                        <div class="conclusion-title">核心发现</div>
                        <div class="conclusion-text" id="monopolyConclusion2">加载中...</div>
                        <div class="pattern-actions" id="monopolyActions2">
                        </div>
                    </div>
                </div>
            </div>

            <!-- 模式4: 内容类型天花板 -->
            <div class="sub-pattern-content" id="tab3-sub3">
                <div class="pattern-detail">
                    <div class="pattern-data-section">
                        <div class="data-section-title">内容类型表现对比</div>
                        <table class="pattern-data-table">
                            <thead>
                                <tr>
                                    <th>内容类型</th>
                                    <th>视频数</th>
                                    <th>平均播放</th>
                                    <th>天花板</th>
                                </tr>
                            </thead>
                            <tbody id="contentTypeTableBody2">
                                <tr><td colspan="4" style="text-align:center; color:#94a3b8;">加载中...</td></tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="pattern-viz-section">
                        <div class="viz-section-title">各类型平均播放量</div>
                        <div class="bar-chart" id="contentTypeBarChart2">
                            <div style="color: #94a3b8; text-align: center; padding: 20px;">加载中...</div>
                        </div>
                    </div>
                    <div class="pattern-conclusion-section">
                        <div class="conclusion-title">核心发现</div>
                        <div class="conclusion-text" id="contentTypeConclusion2">加载中...</div>
                        <div class="pattern-actions" id="contentTypeActions2">
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tab 4: 内容创作 -->
        <div class="pattern-tab-content" id="tab4">
            <div class="tab-content-header">
                <div class="tab-content-title">
                    <span class="title-icon">✍️</span>
                    <div>
                        <h3>内容创作</h3>
                        <div class="title-desc">优化标题、时长、结构等创作要素</div>
                    </div>
                </div>
                <div class="tab-output-badge">
                    <span>📝</span>
                    <span>产出: <strong>标题模板库</strong></span>
                </div>
            </div>

            <!-- 子标签页导航 -->
            <div class="sub-pattern-tabs">
                <button class="sub-pattern-tab active" onclick="switchSubPattern('tab4', 'sub1')">
                    <span class="sub-tab-badge">模式3</span>
                    <span>最佳视频时长</span>
                </button>
                <button class="sub-pattern-tab" onclick="switchSubPattern('tab4', 'sub2')">
                    <span class="sub-tab-badge">模式7</span>
                    <span>数字标题</span>
                </button>
                <button class="sub-pattern-tab" onclick="switchSubPattern('tab4', 'sub3')">
                    <span class="sub-tab-badge">模式8</span>
                    <span>感叹号效应</span>
                </button>
                <button class="sub-pattern-tab" onclick="switchSubPattern('tab4', 'sub4')">
                    <span class="sub-tab-badge">模式9</span>
                    <span>Hashtag策略</span>
                </button>
                <button class="sub-pattern-tab" onclick="switchSubPattern('tab4', 'sub5')">
                    <span class="sub-tab-badge">模式10</span>
                    <span>标题句式</span>
                </button>
                <button class="sub-pattern-tab" onclick="switchSubPattern('tab4', 'sub6')">
                    <span class="sub-tab-badge">补充</span>
                    <span>标题长度</span>
                </button>
            </div>

            <!-- 模式3: 最佳视频时长 -->
            <div class="sub-pattern-content active" id="tab4-sub1">
                <div class="pattern-detail">
                    <div class="pattern-data-section">
                        <div class="data-section-title" id="durationSampleTitle">时长档次表现对比（N=2340）</div>
                        <table class="pattern-data-table">
                            <thead>
                                <tr>
                                    <th>时长档次</th>
                                    <th>视频数</th>
                                    <th>平均播放</th>
                                    <th>点赞率</th>
                                </tr>
                            </thead>
                            <tbody id="durationTableBody">
                                <tr>
                                    <td>10-30分钟</td>
                                    <td>256</td>
                                    <td class="highlight">239,547</td>
                                    <td>2.04%</td>
                                </tr>
                                <tr>
                                    <td>3-10分钟</td>
                                    <td>435</td>
                                    <td>66,958</td>
                                    <td class="highlight">2.57%</td>
                                </tr>
                                <tr>
                                    <td>&lt;1分钟</td>
                                    <td>842</td>
                                    <td>60,971</td>
                                    <td>2.01%</td>
                                </tr>
                                <tr>
                                    <td>30分钟+</td>
                                    <td>287</td>
                                    <td>50,463</td>
                                    <td>1.52%</td>
                                </tr>
                                <tr>
                                    <td>1-3分钟</td>
                                    <td>520</td>
                                    <td>37,667</td>
                                    <td>2.34%</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="pattern-viz-section">
                        <div class="viz-section-title">时长 vs 播放量散点图（每个点 = 1个视频）</div>
                        <div style="height: 280px; position: relative;">
                            <canvas id="durationScatterChart"></canvas>
                        </div>
                        <div class="chart-insight" id="durationScatterInsight">
                            <div class="chart-insight-title">📖 数据解读</div>
                            <div class="chart-insight-content">正在分析数据...</div>
                        </div>
                    </div>
                    <div class="pattern-conclusion-section">
                        <div class="conclusion-title">核心发现</div>
                        <div class="conclusion-text" id="durationConclusionText"><strong>10-30分钟播放量最高</strong>（平均24万），3-10分钟互动率最高</div>
                        <div class="pattern-actions" id="durationActions">
                            <div class="action-item success">
                                <span class="action-icon">✅</span>
                                <span>主内容：10-30分钟（最大化播放量）</span>
                            </div>
                            <div class="action-item">
                                <span class="action-icon">📱</span>
                                <span>引流内容：3-10分钟（最大化互动）</span>
                            </div>
                            <div class="action-item danger">
                                <span class="action-icon">❌</span>
                                <span>避免：30分钟以上（除非深度教学）</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 模式7: 数字标题 -->
            <div class="sub-pattern-content" id="tab4-sub2">
                <div class="pattern-detail">
                    <div class="pattern-data-section">
                        <div class="data-section-title">标题中数字对播放量影响</div>
                        <table class="pattern-data-table">
                            <thead>
                                <tr>
                                    <th>标题特征</th>
                                    <th>视频数</th>
                                    <th>平均播放</th>
                                    <th>提升</th>
                                </tr>
                            </thead>
                            <tbody id="numberTitleTableBody">
                                <tr>
                                    <td colspan="4" style="text-align: center; color: var(--color-text-muted);">加载中...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="pattern-viz-section">
                        <div class="viz-section-title">数字标题 vs 无数字标题</div>
                        <div class="chart-container" style="height: 200px;">
                            <canvas id="numberTitleChart"></canvas>
                        </div>
                    </div>
                    <div class="pattern-conclusion-section">
                        <div class="conclusion-title">数据解读</div>
                        <div id="numberTitleInsight" class="insight-container">
                            <div class="insight-summary">分析中...</div>
                            <div class="insight-tip"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 模式8: 感叹号效应 -->
            <div class="sub-pattern-content" id="tab4-sub3">
                <div class="pattern-detail">
                    <div class="pattern-data-section">
                        <div class="data-section-title">感叹号对播放量影响</div>
                        <table class="pattern-data-table">
                            <thead>
                                <tr>
                                    <th>标题特征</th>
                                    <th>视频数</th>
                                    <th>平均播放</th>
                                    <th>提升</th>
                                </tr>
                            </thead>
                            <tbody id="exclaimTitleTableBody">
                                <tr>
                                    <td colspan="4" style="text-align: center; color: var(--color-text-muted);">加载中...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="pattern-viz-section">
                        <div class="viz-section-title">感叹号标题 vs 无感叹号</div>
                        <div class="chart-container" style="height: 200px;">
                            <canvas id="exclaimTitleChart"></canvas>
                        </div>
                    </div>
                    <div class="pattern-conclusion-section">
                        <div class="conclusion-title">数据解读</div>
                        <div id="exclaimTitleInsight" class="insight-container">
                            <div class="insight-summary">分析中...</div>
                            <div class="insight-tip"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 模式9: Hashtag策略 -->
            <div class="sub-pattern-content" id="tab4-sub4">
                <div class="pattern-detail">
                    <div class="pattern-data-section">
                        <div class="data-section-title">Hashtag对表现影响</div>
                        <table class="pattern-data-table">
                            <thead>
                                <tr>
                                    <th>标题特征</th>
                                    <th>视频数</th>
                                    <th>平均播放</th>
                                    <th>提升</th>
                                </tr>
                            </thead>
                            <tbody id="hashtagTableBody">
                                <tr>
                                    <td colspan="4" style="text-align: center; color: var(--color-text-muted);">加载中...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="pattern-viz-section">
                        <div class="viz-section-title">Hashtag影响对比</div>
                        <div class="chart-container" style="height: 200px;">
                            <canvas id="hashtagChart"></canvas>
                        </div>
                    </div>
                    <div class="pattern-conclusion-section">
                        <div class="conclusion-title">数据解读</div>
                        <div id="hashtagInsight" class="insight-container">
                            <div class="insight-summary">分析中...</div>
                            <div class="insight-tip"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 模式10: 标题句式 -->
            <div class="sub-pattern-content" id="tab4-sub5">
                <div class="pattern-detail">
                    <div class="pattern-data-section">
                        <div class="data-section-title">标题句式对播放量影响</div>
                        <table class="pattern-data-table">
                            <thead>
                                <tr>
                                    <th>标题类型</th>
                                    <th>视频数</th>
                                    <th>平均播放</th>
                                    <th>提升</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>陈述句</td>
                                    <td>1934</td>
                                    <td class="highlight">81,706</td>
                                    <td class="highlight">+63%</td>
                                </tr>
                                <tr>
                                    <td>问句/How-to</td>
                                    <td>356</td>
                                    <td>50,112</td>
                                    <td>基准</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="pattern-viz-section">
                        <div class="viz-section-title">陈述句 vs 问句</div>
                        <div class="bar-chart">
                            <div class="bar-item">
                                <span class="bar-label">陈述句</span>
                                <div class="bar-track">
                                    <div class="bar-fill success" style="width: 100%"></div>
                                </div>
                                <span class="bar-value">8.2万</span>
                            </div>
                            <div class="bar-item">
                                <span class="bar-label">问句</span>
                                <div class="bar-track">
                                    <div class="bar-fill" style="width: 61%"></div>
                                </div>
                                <span class="bar-value">5.0万</span>
                            </div>
                        </div>
                        <div class="viz-note" style="margin-top: 16px; padding: 12px; background: rgba(34, 197, 94, 0.1); border-radius: 8px; font-size: 0.85em; color: #22c55e;">
                            陈述句播放高 <strong>63%</strong>
                        </div>
                    </div>
                    <div class="pattern-conclusion-section">
                        <div class="conclusion-title">行动建议</div>
                        <div class="pattern-actions">
                            <div class="action-item success">
                                <span class="action-icon">✅</span>
                                <span>优先使用陈述句："每天按压这3个穴位"</span>
                            </div>
                            <div class="action-item danger">
                                <span class="action-icon">❌</span>
                                <span>避免问句："如何缓解失眠？"</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 补充: 标题长度 -->
            <div class="sub-pattern-content" id="tab4-sub6">
                <div class="pattern-detail">
                    <div class="pattern-data-section">
                        <div class="data-section-title">标题长度 vs 表现（反常识！）</div>
                        <table class="pattern-data-table">
                            <thead>
                                <tr>
                                    <th>标题长度</th>
                                    <th>视频数</th>
                                    <th>平均播放</th>
                                    <th>对比</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>超长(50+字)</td>
                                    <td>686</td>
                                    <td class="highlight">93,681</td>
                                    <td class="highlight">4.4x</td>
                                </tr>
                                <tr>
                                    <td>长(30-50字)</td>
                                    <td>807</td>
                                    <td>91,136</td>
                                    <td>4.3x</td>
                                </tr>
                                <tr>
                                    <td>中(15-30字)</td>
                                    <td>635</td>
                                    <td>52,801</td>
                                    <td>2.5x</td>
                                </tr>
                                <tr>
                                    <td>短(&lt;15字)</td>
                                    <td>212</td>
                                    <td class="danger-text">21,310</td>
                                    <td>1x</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="pattern-viz-section">
                        <div class="viz-section-title">各长度标题播放量</div>
                        <div class="bar-chart">
                            <div class="bar-item">
                                <span class="bar-label">超长(50+)</span>
                                <div class="bar-track">
                                    <div class="bar-fill success" style="width: 100%"></div>
                                </div>
                                <span class="bar-value">9.4万</span>
                            </div>
                            <div class="bar-item">
                                <span class="bar-label">长(30-50)</span>
                                <div class="bar-track">
                                    <div class="bar-fill success" style="width: 97%"></div>
                                </div>
                                <span class="bar-value">9.1万</span>
                            </div>
                            <div class="bar-item">
                                <span class="bar-label">中(15-30)</span>
                                <div class="bar-track">
                                    <div class="bar-fill" style="width: 56%"></div>
                                </div>
                                <span class="bar-value">5.3万</span>
                            </div>
                            <div class="bar-item">
                                <span class="bar-label">短(&lt;15)</span>
                                <div class="bar-track">
                                    <div class="bar-fill danger" style="width: 23%"></div>
                                </div>
                                <span class="bar-value">2.1万</span>
                            </div>
                        </div>
                        <div class="viz-note" style="margin-top: 16px; padding: 12px; background: rgba(239, 68, 68, 0.1); border-radius: 8px; font-size: 0.85em; color: #ef4444;">
                            <strong>完全反常识！</strong>长标题均播是短标题的4.4倍
                        </div>
                    </div>
                    <div class="pattern-conclusion-section">
                        <div class="conclusion-title">核心发现（有趣度5.0极高）</div>
                        <div class="conclusion-text">普遍认为"短标题好"，但数据显示 <strong>长标题效果4倍</strong></div>
                        <div class="pattern-actions">
                            <div class="action-item success">
                                <span class="action-icon">✅</span>
                                <span>标题尽量50字以上</span>
                            </div>
                            <div class="action-item success">
                                <span class="action-icon">✅</span>
                                <span>包含多个搜索关键词</span>
                            </div>
                            <div class="action-item danger">
                                <span class="action-icon">❌</span>
                                <span>不要追求"简洁"</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tab 5: 发布策略 -->
        <div class="pattern-tab-content" id="tab5">
            <div class="tab-content-header">
                <div class="tab-content-title">
                    <span class="title-icon">🚀</span>
                    <div>
                        <h3>发布策略</h3>
                        <div class="title-desc">优化发布时间和频率</div>
                    </div>
                </div>
                <div class="tab-output-badge">
                    <span>📆</span>
                    <span>产出: <strong>发布日历</strong></span>
                </div>
            </div>

            <!-- 子标签页导航 -->
            <div class="sub-pattern-tabs">
                <button class="sub-pattern-tab active" onclick="switchSubPattern('tab5', 'sub1')">
                    <span class="sub-tab-badge">模式5</span>
                    <span>最佳发布日</span>
                </button>
            </div>

            <!-- 模式5: 周末发布效果更好 -->
            <div class="sub-pattern-content active" id="tab5-sub1">
                <div class="pattern-detail">
                    <div class="pattern-data-section">
                        <div class="data-section-title">各星期发布表现对比</div>
                        <table class="pattern-data-table">
                            <thead>
                                <tr>
                                    <th>发布日</th>
                                    <th>视频数</th>
                                    <th>平均播放</th>
                                    <th>最高播放</th>
                                </tr>
                            </thead>
                            <tbody id="weekdayTableBody">
                                <tr>
                                    <td colspan="4" style="text-align: center; color: var(--color-text-muted);">加载中...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="pattern-viz-section">
                        <div class="viz-section-title">发布时间热力图（星期×时段）</div>
                        <div class="heatmap-container">
                            <div style="display: flex; gap: 8px;">
                                <div class="heatmap-row-labels">
                                    <span class="heatmap-label">上午</span>
                                    <span class="heatmap-label">下午</span>
                                    <span class="heatmap-label">晚间</span>
                                </div>
                                <div class="heatmap heatmap-7cols" style="flex: 1;">
                                    <!-- 上午：周一到周日 -->
                                    <div class="heatmap-cell heat-0" title="周一上午: 2.1万">2.1</div>
                                    <div class="heatmap-cell heat-1" title="周二上午: 4.2万">4.2</div>
                                    <div class="heatmap-cell heat-1" title="周三上午: 3.8万">3.8</div>
                                    <div class="heatmap-cell heat-2" title="周四上午: 5.1万">5.1</div>
                                    <div class="heatmap-cell heat-1" title="周五上午: 3.5万">3.5</div>
                                    <div class="heatmap-cell heat-3" title="周六上午: 6.2万">6.2</div>
                                    <div class="heatmap-cell heat-4" title="周日上午: 8.5万">8.5</div>
                                    <!-- 下午：周一到周日 -->
                                    <div class="heatmap-cell heat-1" title="周一下午: 3.5万">3.5</div>
                                    <div class="heatmap-cell heat-2" title="周二下午: 5.8万">5.8</div>
                                    <div class="heatmap-cell heat-2" title="周三下午: 5.2万">5.2</div>
                                    <div class="heatmap-cell heat-2" title="周四下午: 6.1万">6.1</div>
                                    <div class="heatmap-cell heat-2" title="周五下午: 5.5万">5.5</div>
                                    <div class="heatmap-cell heat-3" title="周六下午: 7.8万">7.8</div>
                                    <div class="heatmap-cell heat-4" title="周日下午: 10.2万">10.2</div>
                                    <!-- 晚间：周一到周日 -->
                                    <div class="heatmap-cell heat-2" title="周一晚间: 5.2万">5.2</div>
                                    <div class="heatmap-cell heat-3" title="周二晚间: 8.1万">8.1</div>
                                    <div class="heatmap-cell heat-3" title="周三晚间: 7.6万">7.6</div>
                                    <div class="heatmap-cell heat-3" title="周四晚间: 8.5万">8.5</div>
                                    <div class="heatmap-cell heat-3" title="周五晚间: 7.2万">7.2</div>
                                    <div class="heatmap-cell heat-4" title="周六晚间: 9.5万">9.5</div>
                                    <div class="heatmap-cell heat-5" title="周日晚间: 14.1万">14.1</div>
                                </div>
                            </div>
                            <div class="heatmap-labels">
                                <span class="heatmap-label">周一</span>
                                <span class="heatmap-label">周二</span>
                                <span class="heatmap-label">周三</span>
                                <span class="heatmap-label">周四</span>
                                <span class="heatmap-label">周五</span>
                                <span class="heatmap-label">周六</span>
                                <span class="heatmap-label">周日</span>
                            </div>
                            <div style="display: flex; justify-content: center; align-items: center; gap: 8px; margin-top: 12px; font-size: 0.65em; color: var(--color-text-muted);">
                                <span>低</span>
                                <div style="display: flex; gap: 2px;">
                                    <span style="width: 16px; height: 8px; background: #1e293b; border-radius: 2px;"></span>
                                    <span style="width: 16px; height: 8px; background: #164e63; border-radius: 2px;"></span>
                                    <span style="width: 16px; height: 8px; background: #0e7490; border-radius: 2px;"></span>
                                    <span style="width: 16px; height: 8px; background: #06b6d4; border-radius: 2px;"></span>
                                    <span style="width: 16px; height: 8px; background: #22c55e; border-radius: 2px;"></span>
                                </div>
                                <span>高</span>
                            </div>
                        </div>
                    </div>
                    <!-- 周几发布效果柱状图 -->
                    <div class="pattern-viz-section">
                        <div class="viz-section-title">各星期平均播放量对比</div>
                        <div class="chart-container" style="height: 200px;">
                            <canvas id="weekdayChart"></canvas>
                        </div>
                    </div>
                    <!-- 发布时段效果柱状图 -->
                    <div class="pattern-viz-section">
                        <div class="viz-section-title">各时段平均播放量对比</div>
                        <div class="chart-container" style="height: 200px;">
                            <canvas id="hourChart"></canvas>
                        </div>
                    </div>
                    <div class="pattern-conclusion-section">
                        <div class="conclusion-title">核心发现</div>
                        <div class="conclusion-text" id="weekdayConclusion">分析中...</div>
                        <div class="pattern-actions" id="weekdayActions">
                        </div>
                    </div>
                </div>
            </div>

        </div>

        <!-- Tab 6: 频道运营 -->
        <div class="pattern-tab-content" id="tab6">
            <div class="tab-content-header">
                <div class="tab-content-title">
                    <span class="title-icon">📈</span>
                    <div>
                        <h3>频道运营</h3>
                        <div class="title-desc">长期增长与频道健康度管理</div>
                    </div>
                </div>
                <div class="tab-output-badge">
                    <span>🗓️</span>
                    <span>产出: <strong>90天成长计划</strong></span>
                </div>
            </div>

            <!-- 子标签页导航 -->
            <div class="sub-pattern-tabs">
                <button class="sub-pattern-tab active" onclick="switchSubPattern('tab6', 'sub1')">
                    <span class="sub-tab-badge">模式11</span>
                    <span>频道稳定性</span>
                </button>
                <button class="sub-pattern-tab" onclick="switchSubPattern('tab6', 'sub2')">
                    <span class="sub-tab-badge">模式12</span>
                    <span>黑马频道特征</span>
                </button>
                <button class="sub-pattern-tab" onclick="switchSubPattern('tab6', 'sub3')">
                    <span class="sub-tab-badge">模式14</span>
                    <span>快速增长案例</span>
                </button>
                <button class="sub-pattern-tab" onclick="switchSubPattern('tab6', 'sub4')">
                    <span class="sub-tab-badge">模式2</span>
                    <span>订阅≠播放效率</span>
                </button>
            </div>

            <!-- 模式11: 频道稳定性差异 -->
            <div class="sub-pattern-content active" id="tab6-sub1">
                <div class="pattern-detail">
                    <div class="pattern-data-section">
                        <div class="data-section-title" id="stabilityTableTitle">Top10频道稳定性分析</div>
                        <table class="pattern-data-table">
                            <thead>
                                <tr>
                                    <th>频道</th>
                                    <th>视频数</th>
                                    <th>平均播放</th>
                                    <th>max/avg比</th>
                                    <th>稳定性</th>
                                </tr>
                            </thead>
                            <tbody id="stabilityTableBody">
                                <tr><td colspan="5" style="text-align:center; color:#94a3b8;">加载中...</td></tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="pattern-viz-section">
                        <div class="viz-section-title">max/avg比（越低越稳定）</div>
                        <div class="bar-chart" id="stabilityBarChart">
                            <div style="color: #94a3b8; text-align: center; padding: 20px;">加载中...</div>
                        </div>
                        <div class="viz-note" style="margin-top: 16px; padding: 12px; background: rgba(34, 197, 94, 0.1); border-radius: 8px; font-size: 0.85em; color: #22c55e;">
                            <strong>max/avg &lt; 10 是健康频道的标志</strong>
                        </div>
                    </div>
                    <div class="pattern-conclusion-section">
                        <div class="conclusion-title">核心发现</div>
                        <div class="conclusion-text" id="stabilityConclusion">加载中...</div>
                        <div class="pattern-actions" id="stabilityActions">
                            <div class="action-item">
                                <span class="action-icon">📊</span>
                                <span>健康指标：max/avg &lt; 10</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 模式12: 黑马频道特征 -->
            <div class="sub-pattern-content" id="tab6-sub2">
                <div class="pattern-detail">
                    <div class="pattern-data-section">
                        <div class="data-section-title" id="darkHorseTableTitle">Top10黑马频道分析</div>
                        <table class="pattern-data-table">
                            <thead>
                                <tr>
                                    <th>频道</th>
                                    <th>订阅数</th>
                                    <th>最高播放</th>
                                    <th>爆发倍率</th>
                                </tr>
                            </thead>
                            <tbody id="darkHorseTableBody">
                                <tr><td colspan="4" style="text-align:center; color:#94a3b8;">加载中...</td></tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="pattern-viz-section">
                        <div class="viz-section-title">增长轨迹：频道年龄(天) vs 订阅数</div>
                        <div class="growth-lines-chart" id="darkHorseGrowthChart" style="height: 220px; position: relative; background: linear-gradient(to top, rgba(30,41,59,0.5) 0%, transparent 100%); border-radius: 8px; padding: 16px;">
                            <div style="color: #94a3b8; text-align: center; padding: 60px 20px;">加载中...</div>
                        </div>
                        <div style="display: flex; justify-content: center; gap: 20px; margin-top: 12px; font-size: 0.75em;">
                            <span style="display: flex; align-items: center; gap: 6px;"><span style="width: 20px; height: 3px; background: #22c55e; border-radius: 2px;"></span> 快速增长频道（斜率大=涨粉快）</span>
                        </div>
                    </div>
                    <div class="pattern-conclusion-section">
                        <div class="conclusion-title">核心发现</div>
                        <div class="conclusion-text" id="darkHorseConclusion">加载中...</div>
                        <div class="pattern-actions" id="darkHorseActions">
                            <div class="action-item success">
                                <span class="action-icon">✅</span>
                                <span>新频道有机会逆袭</span>
                            </div>
                            <div class="action-item">
                                <span class="action-icon">🔍</span>
                                <span>找到1-5万订阅的高效率频道研究其策略</span>
                            </div>
                            <div class="action-item">
                                <span class="action-icon">📈</span>
                                <span>爆款后快速转化为订阅</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 模式14: 快速增长频道案例 -->
            <div class="sub-pattern-content" id="tab6-sub3">
                <div class="pattern-detail">
                    <div class="pattern-data-section">
                        <div class="data-section-title">30天内快速增长的频道</div>
                        <table class="pattern-data-table">
                            <thead>
                                <tr>
                                    <th>频道</th>
                                    <th>活跃天数</th>
                                    <th>视频数</th>
                                    <th>平均播放</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>养生之道</td>
                                    <td class="highlight">1天</td>
                                    <td>6</td>
                                    <td class="highlight">11.1万</td>
                                </tr>
                                <tr>
                                    <td>laxnetcm</td>
                                    <td>6天</td>
                                    <td>3</td>
                                    <td class="highlight">27.3万</td>
                                </tr>
                                <tr>
                                    <td>暖心故事匯</td>
                                    <td>3天</td>
                                    <td>3</td>
                                    <td class="highlight">14.3万</td>
                                </tr>
                                <tr>
                                    <td>倪海厦相关</td>
                                    <td>7天</td>
                                    <td>3</td>
                                    <td>10.8万</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="pattern-viz-section">
                        <div class="viz-section-title">快速增长频道共性特征</div>
                        <div class="bar-chart">
                            <div class="bar-item">
                                <span class="bar-label">食疗配方</span>
                                <div class="bar-track">
                                    <div class="bar-fill success" style="width: 100%"></div>
                                </div>
                                <span class="bar-value">2/3案例</span>
                            </div>
                            <div class="bar-item">
                                <span class="bar-label">高频发布</span>
                                <div class="bar-track">
                                    <div class="bar-fill success" style="width: 90%"></div>
                                </div>
                                <span class="bar-value">1-3天多条</span>
                            </div>
                            <div class="bar-item">
                                <span class="bar-label">长标题</span>
                                <div class="bar-track">
                                    <div class="bar-fill" style="width: 80%"></div>
                                </div>
                                <span class="bar-value">30-60字</span>
                            </div>
                            <div class="bar-item">
                                <span class="bar-label">多Hashtag</span>
                                <div class="bar-track">
                                    <div class="bar-fill" style="width: 70%"></div>
                                </div>
                                <span class="bar-value">5-15个</span>
                            </div>
                            <div class="bar-item">
                                <span class="bar-label">爆发规律</span>
                                <div class="bar-track">
                                    <div class="bar-fill" style="width: 60%"></div>
                                </div>
                                <span class="bar-value">第2-3条爆发</span>
                            </div>
                        </div>
                    </div>
                    <div class="pattern-conclusion-section">
                        <div class="conclusion-title">起步策略</div>
                        <div class="conclusion-text">集中发布5-6条，让第2-3条爆发，内容首选<strong>食疗配方</strong></div>
                        <div class="pattern-actions">
                            <div class="action-item success">
                                <span class="action-icon">✅</span>
                                <span>内容类型：食疗配方 &gt; 功法教学</span>
                            </div>
                            <div class="action-item success">
                                <span class="action-icon">✅</span>
                                <span>发布策略：集中爆发（1天6条）</span>
                            </div>
                            <div class="action-item">
                                <span class="action-icon">⚠️</span>
                                <span>注意：可能存在矩阵账号偏差</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 模式2: 订阅规模≠播放效率 -->
            <div class="sub-pattern-content" id="tab6-sub4">
                <div class="pattern-detail">
                    <div class="pattern-data-section">
                        <div class="data-section-title">订阅规模 vs 播放效率（N=956频道）</div>
                        <table class="pattern-data-table">
                            <thead>
                                <tr>
                                    <th>订阅档次</th>
                                    <th>频道数</th>
                                    <th>平均播放</th>
                                    <th>效率(播放/订阅)</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>1M+ 大V</td>
                                    <td>13</td>
                                    <td>455,787</td>
                                    <td>~0.46</td>
                                </tr>
                                <tr>
                                    <td>100K-1M 中V</td>
                                    <td>94</td>
                                    <td>152,890</td>
                                    <td>~0.76</td>
                                </tr>
                                <tr>
                                    <td>10K-100K 小V</td>
                                    <td>190</td>
                                    <td>98,801</td>
                                    <td>~2.47</td>
                                </tr>
                                <tr>
                                    <td>1K-10K 新人</td>
                                    <td>250</td>
                                    <td>23,678</td>
                                    <td>~5.92</td>
                                </tr>
                                <tr>
                                    <td>&lt;1K 素人</td>
                                    <td>409</td>
                                    <td>3,433</td>
                                    <td class="highlight">~6.87</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="pattern-viz-section">
                        <div class="viz-section-title">播放效率对比</div>
                        <div class="bar-chart">
                            <div class="bar-item">
                                <span class="bar-label">素人(&lt;1K)</span>
                                <div class="bar-track">
                                    <div class="bar-fill success" style="width: 100%"></div>
                                </div>
                                <span class="bar-value">6.87</span>
                            </div>
                            <div class="bar-item">
                                <span class="bar-label">新人(1K-10K)</span>
                                <div class="bar-track">
                                    <div class="bar-fill success" style="width: 86%"></div>
                                </div>
                                <span class="bar-value">5.92</span>
                            </div>
                            <div class="bar-item">
                                <span class="bar-label">小V(10K-100K)</span>
                                <div class="bar-track">
                                    <div class="bar-fill" style="width: 36%"></div>
                                </div>
                                <span class="bar-value">2.47</span>
                            </div>
                            <div class="bar-item">
                                <span class="bar-label">中V(100K-1M)</span>
                                <div class="bar-track">
                                    <div class="bar-fill warning" style="width: 11%"></div>
                                </div>
                                <span class="bar-value">0.76</span>
                            </div>
                            <div class="bar-item">
                                <span class="bar-label">大V(1M+)</span>
                                <div class="bar-track">
                                    <div class="bar-fill danger" style="width: 7%"></div>
                                </div>
                                <span class="bar-value">0.46</span>
                            </div>
                        </div>
                    </div>
                    <div class="pattern-conclusion-section">
                        <div class="conclusion-title">核心发现</div>
                        <div class="conclusion-text"><strong>素人效率是大V的15倍</strong>，小频道单个视频更容易触达现有粉丝</div>
                        <div class="pattern-actions">
                            <div class="action-item success">
                                <span class="action-icon">✅</span>
                                <span>小频道不必自卑，效率更高</span>
                            </div>
                            <div class="action-item">
                                <span class="action-icon">📈</span>
                                <span>粉丝增长后播放增长会放缓</span>
                            </div>
                            <div class="action-item">
                                <span class="action-icon">💡</span>
                                <span>关注效率而非绝对数字</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tab 7: 信息报告 -->
        <div class="pattern-tab-content" id="tab7">
            <div class="tab-content-header report-header">
                <div class="tab-content-title">
                    <span class="title-icon">📋</span>
                    <div>
                        <h3>信息报告</h3>
                        <div class="title-desc">按任务快速获取所需信息</div>
                    </div>
                </div>

                <!-- 时间筛选器 -->
                <div class="report-time-filter">
                    <span class="filter-label">📅 数据范围</span>
                    <div class="filter-buttons">
                        <button class="filter-btn" data-days="7" onclick="switchReportTimePeriod(7)">7天</button>
                        <button class="filter-btn active" data-days="30" onclick="switchReportTimePeriod(30)">30天</button>
                        <button class="filter-btn" data-days="90" onclick="switchReportTimePeriod(90)">90天</button>
                        <button class="filter-btn" data-days="0" onclick="switchReportTimePeriod(0)">全部</button>
                    </div>
                </div>
            </div>

            <!-- 信息网络统计概览 -->
            <div class="network-stats-section">
                <div class="network-stats-header">
                    <span class="stats-icon">🌐</span>
                    <span class="stats-title">信息网络概览</span>
                    <span class="stats-time-range" id="statsTimeRange">采集时间：加载中...</span>
                </div>
                <div class="network-stats-grid">
                    <div class="network-stat-item">
                        <span class="stat-value" id="stat-video-count">--</span>
                        <span class="stat-label">视频</span>
                    </div>
                    <div class="network-stat-item">
                        <span class="stat-value" id="stat-channel-count">--</span>
                        <span class="stat-label">频道</span>
                    </div>
                    <div class="network-stat-item">
                        <span class="stat-value" id="stat-tag-count">--</span>
                        <span class="stat-label">标签</span>
                    </div>
                    <div class="network-stat-item">
                        <span class="stat-value" id="stat-topic-count">--</span>
                        <span class="stat-label">话题</span>
                    </div>
                    <div class="network-stat-item">
                        <span class="stat-value" id="stat-country-count">--</span>
                        <span class="stat-label">国家/地区</span>
                    </div>
                    <div class="network-stat-item">
                        <span class="stat-value" id="stat-total-views">--</span>
                        <span class="stat-label">总播放量</span>
                    </div>
                </div>
            </div>

            <!-- 六大板块回顾 -->
            <div class="report-section">
                <h4 class="report-section-title">🔍 板块结论汇总 <span class="section-hint">（点击结论可展开查看对应图表）</span></h4>
                <div class="tab-review-grid" id="tabReviewGrid">
                    <!-- 动态生成6个板块的回顾卡片 -->
                </div>
            </div>

            <!-- 综合洞察 -->
            <div class="report-section">
                <h4 class="report-section-title">💡 综合洞察</h4>
                <div class="synthesis-content" id="synthesisContent">
                    <div class="synthesis-loading">正在汇总各板块分析结果...</div>
                </div>
            </div>

        </div>

        <!-- Tab 8: 用户洞察 -->
        <div class="pattern-tab-content" id="tab8">
            <div class="tab-content-header">
                <div class="tab-content-title">
                    <span class="title-icon">👥</span>
                    <div>
                        <h3>用户洞察</h3>
                        <div class="title-desc">理解观众需求，挖掘内容缺口</div>
                    </div>
                </div>
                <div class="tab-output-badge">
                    <span>💡</span>
                    <span>产出: <strong>用户需求分析</strong></span>
                </div>
            </div>

            <!-- 子标签页导航 -->
            <div class="sub-pattern-tabs">
                <button class="sub-pattern-tab active" onclick="switchSubPattern('tab8', 'sub1')">
                    <span class="sub-tab-badge">模式38</span>
                    <span>评论热词</span>
                </button>
                <button class="sub-pattern-tab" onclick="switchSubPattern('tab8', 'sub2')">
                    <span class="sub-tab-badge">模式39</span>
                    <span>用户问题</span>
                </button>
                <button class="sub-pattern-tab" onclick="switchSubPattern('tab8', 'sub3')">
                    <span class="sub-tab-badge">模式40</span>
                    <span>情感分布</span>
                </button>
                <button class="sub-pattern-tab" onclick="switchSubPattern('tab8', 'sub4')">
                    <span class="sub-tab-badge">模式41</span>
                    <span>话题趋势</span>
                </button>
                <button class="sub-pattern-tab" onclick="switchSubPattern('tab8', 'sub5')">
                    <span class="sub-tab-badge">模式42</span>
                    <span>高赞特征</span>
                </button>
            </div>

            <!-- 模式38: 评论热词 -->
            <div class="sub-pattern-content active" id="tab8-sub1">
                <div class="pattern-detail">
                    <div class="pattern-data-section">
                        <div class="pattern-data-title">
                            <span class="data-icon">🔤</span>
                            <span>原始数据：评论热词统计</span>
                            <span class="pattern-confidence-badge" id="hotwordsSample">N = 11,534</span>
                        </div>
                        <table class="pattern-data-table">
                            <thead>
                                <tr><th>排名</th><th>热词</th><th>出现次数</th><th>话题归类</th><th>洞察</th></tr>
                            </thead>
                            <tbody id="hotwordsTableBody">
                                <tr><td>1</td><td><strong style="color:#10b981;">感恩</strong></td><td>1,406</td><td>互动</td><td>用户认可度高</td></tr>
                                <tr><td>2</td><td><strong style="color:#10b981;">分享</strong></td><td>1,319</td><td>互动</td><td>内容有价值被分享</td></tr>
                                <tr><td>3</td><td><strong style="color:#10b981;">謝謝</strong></td><td>1,314</td><td>互动</td><td>感谢类占主导</td></tr>
                                <tr><td>4</td><td><strong style="color:#10b981;">感謝</strong></td><td>769</td><td>互动</td><td>繁体用户群</td></tr>
                                <tr><td>5</td><td>谢谢</td><td>612</td><td>互动</td><td>简体用户群</td></tr>
                                <tr><td>6</td><td>非常</td><td>484</td><td>程度</td><td>强调语气</td></tr>
                                <tr><td>7</td><td><strong style="color:#06b6d4;">老師</strong></td><td>415</td><td>互动</td><td><strong>视创作者为专家</strong></td></tr>
                                <tr><td>8</td><td>健康</td><td>355</td><td>效果</td><td>核心关注点</td></tr>
                                <tr><td>9</td><td><strong style="color:#06b6d4;">醫師</strong></td><td>344</td><td>互动</td><td>医疗权威认可</td></tr>
                                <tr><td>10</td><td>老师</td><td>312</td><td>互动</td><td>简体用户群</td></tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="pattern-viz-section">
                        <div class="pattern-viz-title">
                            <span class="viz-icon">☁️</span>
                            <span>可视化：评论热词云</span>
                        </div>
                        <div class="word-cloud-container" id="wordCloudContainer">
                            <div class="word-cloud" id="wordCloud">
                                <!-- 动态生成词云 -->
                            </div>
                        </div>
                        <div class="chart-insight" id="hotwordsInsight">
                            <div class="chart-insight-title">📖 数据解读</div>
                            <div class="chart-insight-content">
                                <strong>感谢类词汇占绝对主导</strong>（感恩1,406 + 謝謝1,314 + 感謝769）→ 用户满意度极高<br>
                                <strong>"老师/医师"高频出现</strong>（老師415 + 醫師344 + 老师312）→ 用户把创作者视为专家权威<br>
                                <strong>"分享"排名第二</strong>（1,319次）→ 内容有价值，用户愿意传播
                            </div>
                        </div>
                        <div style="margin-top:16px;">
                            <div class="chart-insight-title">🔥 互动最热视频</div>
                            <div id="hotVideosExamples" style="margin-top:8px;">
                                <!-- 动态填充 -->
                            </div>
                        </div>
                    </div>
                    <div class="pattern-conclusion-section">
                        <div class="pattern-conclusion-title">
                            <span>💡</span>
                            <span>结论与行动建议</span>
                        </div>
                        <div class="pattern-conclusion-text">
                            评论区以<strong>感谢类词汇</strong>为主导，说明用户满意度极高。用户视创作者为「老师/医师」，建议<strong>强化专业人设</strong>。
                        </div>
                        <div class="pattern-actions">
                            <span class="pattern-action do">✅ 强化「老师」专业人设</span>
                            <span class="pattern-action do">✅ 制作 Q&A 系列视频</span>
                            <span class="pattern-action do">✅ 在视频中感谢观众</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 模式39: 用户问题 -->
            <div class="sub-pattern-content" id="tab8-sub2">
                <div class="pattern-detail">
                    <div class="pattern-data-section">
                        <div class="pattern-data-title">
                            <span class="data-icon">❓</span>
                            <span>原始数据：用户问题分类</span>
                            <span class="pattern-confidence-badge" id="questionsSample">N = --</span>
                        </div>
                        <table class="pattern-data-table">
                            <thead>
                                <tr><th>问题类型</th><th>数量</th><th>占比</th><th>含义</th><th>内容机会</th></tr>
                            </thead>
                            <tbody id="questionsTableBody">
                                <tr>
                                    <td><span style="color:#f59e0b;">YES_NO</span></td>
                                    <td>1,240</td>
                                    <td>82.9%</td>
                                    <td>确认类「可以吗？」</td>
                                    <td>制作「XX能不能做」澄清视频</td>
                                </tr>
                                <tr>
                                    <td><span style="color:#10b981;">HOW</span></td>
                                    <td>100</td>
                                    <td>6.7%</td>
                                    <td>方法类「怎么做？」</td>
                                    <td>制作「入门指南」「教程」</td>
                                </tr>
                                <tr>
                                    <td><span style="color:#ec4899;">WHERE</span></td>
                                    <td>27</td>
                                    <td>1.8%</td>
                                    <td>资源类「哪里找？」</td>
                                    <td>整理「资源合集」</td>
                                </tr>
                                <tr>
                                    <td><span style="color:#06b6d4;">WHAT</span></td>
                                    <td>3</td>
                                    <td>0.2%</td>
                                    <td>定义类「是什么？」</td>
                                    <td>制作「基础科普」内容</td>
                                </tr>
                                <tr>
                                    <td><span style="color:#8b5cf6;">WHY</span></td>
                                    <td>1</td>
                                    <td>0.1%</td>
                                    <td>原因类「为什么？」</td>
                                    <td>制作「原理解析」科普</td>
                                </tr>
                                <tr>
                                    <td><span style="color:#94a3b8;">OTHER</span></td>
                                    <td>125</td>
                                    <td>8.4%</td>
                                    <td>其他问句</td>
                                    <td>-</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="pattern-viz-section">
                        <div class="pattern-viz-title">
                            <span class="viz-icon">📊</span>
                            <span>可视化：问题类型分布</span>
                        </div>
                        <div style="height: 250px; position: relative;">
                            <canvas id="questionsChart"></canvas>
                        </div>
                        <div class="chart-insight" id="questionsInsight">
                            <div class="chart-insight-title">📖 高价值发现</div>
                            <div class="chart-insight-content">
                                <!-- 动态填充 -->
                            </div>
                        </div>
                        <div style="margin-top:16px;">
                            <div class="chart-insight-title">❓ 真实用户问题案例</div>
                            <div id="questionExamples" style="margin-top:8px;">
                                <!-- 动态填充 -->
                            </div>
                        </div>
                    </div>
                    <div class="pattern-conclusion-section">
                        <div class="pattern-conclusion-title">
                            <span>💡</span>
                            <span>结论与行动建议</span>
                        </div>
                        <div class="pattern-conclusion-text">
                            <strong>13.0%</strong> 的评论是问句（1,496条），其中 <strong>82.9% 是确认类问题</strong>。用户最想知道「能不能做」，而非「怎么做」。
                        </div>
                        <div class="pattern-actions">
                            <span class="pattern-action do">✅ 制作「XX能不能做」澄清视频</span>
                            <span class="pattern-action do">✅ 在视频开头说明适用人群</span>
                            <span class="pattern-action do">✅ 列出禁忌症和注意事项</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 模式40: 情感分布 -->
            <div class="sub-pattern-content" id="tab8-sub3">
                <div class="pattern-detail">
                    <div class="pattern-data-section">
                        <div class="pattern-data-title">
                            <span class="data-icon">😊</span>
                            <span>原始数据：情感分布统计</span>
                            <span class="pattern-confidence-badge" id="sentimentSample">N = --</span>
                        </div>
                        <div class="sentiment-bars" id="sentiment-bars" style="padding: 20px;">
                            <div class="sentiment-bar-item" style="margin-bottom: 16px;">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 4px;">
                                    <span style="color: #10b981;">😊 正面</span>
                                    <span id="sentiment-positive-text" style="color: #10b981; font-weight: 600;">46.4% (5,349条)</span>
                                </div>
                                <div style="height: 24px; background: #1e293b; border-radius: 4px; overflow: hidden;">
                                    <div id="sentiment-positive-bar" style="width: 46.4%; height: 100%; background: #10b981;"></div>
                                </div>
                            </div>
                            <div class="sentiment-bar-item" style="margin-bottom: 16px;">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 4px;">
                                    <span style="color: #94a3b8;">😐 中性</span>
                                    <span id="sentiment-neutral-text" style="color: #94a3b8; font-weight: 600;">51.4% (5,932条)</span>
                                </div>
                                <div style="height: 24px; background: #1e293b; border-radius: 4px; overflow: hidden;">
                                    <div id="sentiment-neutral-bar" style="width: 51.4%; height: 100%; background: #64748b;"></div>
                                </div>
                            </div>
                            <div class="sentiment-bar-item">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 4px;">
                                    <span style="color: #ef4444;">😠 负面</span>
                                    <span id="sentiment-negative-text" style="color: #ef4444; font-weight: 600;">2.2% (253条)</span>
                                </div>
                                <div style="height: 24px; background: #1e293b; border-radius: 4px; overflow: hidden;">
                                    <div id="sentiment-negative-bar" style="width: 2.2%; height: 100%; background: #ef4444;"></div>
                                </div>
                            </div>
                            <div style="text-align: center; margin-top: 20px; padding: 12px; background: #0f172a; border-radius: 8px;">
                                <span style="color: #94a3b8;">平均情感分数：</span>
                                <span id="sentiment-score" style="color: #10b981; font-size: 1.5em; font-weight: 700;">+0.442</span>
                                <span style="color: #64748b; font-size: 0.85em;">（范围 -1 ~ 1）</span>
                            </div>
                        </div>
                    </div>
                    <div class="pattern-viz-section">
                        <div class="pattern-viz-title">
                            <span class="viz-icon">📉</span>
                            <span>负面评论分析（改进方向）</span>
                        </div>
                        <table class="pattern-data-table" style="margin-top: 12px;">
                            <thead>
                                <tr><th>负面评论示例</th><th>问题</th><th>改进方向</th></tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td style="color: #f87171;">「讲了半天就是皮都不好」</td>
                                    <td>拖沓</td>
                                    <td style="color: #10b981;">开头直接给结论</td>
                                </tr>
                                <tr>
                                    <td style="color: #f87171;">「几句话能讲明白的拖一小时」</td>
                                    <td>效率低</td>
                                    <td style="color: #10b981;">控制时长，提高信息密度</td>
                                </tr>
                                <tr>
                                    <td style="color: #f87171;">「沒用...手指壓到瘀青還大不出來」</td>
                                    <td>效果存疑</td>
                                    <td style="color: #10b981;">说明适用人群和局限</td>
                                </tr>
                            </tbody>
                        </table>
                        <div class="chart-insight" id="sentimentInsight">
                            <div class="chart-insight-title">📖 数据解读</div>
                            <div class="chart-insight-content">
                                <strong>用户满意度极高：</strong>负面评论仅 2.1%<br>
                                <strong>负面集中于「拖沓」：</strong>建议提高信息密度，减少废话<br>
                                <strong>部分质疑效果：</strong>加入科学解释和适用说明
                            </div>
                        </div>
                    </div>
                    <div class="pattern-conclusion-section">
                        <div class="pattern-conclusion-title">
                            <span>💡</span>
                            <span>结论与行动建议</span>
                        </div>
                        <div class="pattern-conclusion-text">
                            养生领域用户友好度极高，<strong>98% 非负面</strong>。负面评论主要集中于内容拖沓，建议提高信息密度。
                        </div>
                        <div class="pattern-actions">
                            <span class="pattern-action do">✅ 继续保持内容质量</span>
                            <span class="pattern-action do">✅ 提高信息密度</span>
                            <span class="pattern-action avoid">⚠️ 避免废话拖沓</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 模式41: 话题趋势 -->
            <div class="sub-pattern-content" id="tab8-sub4">
                <div class="pattern-detail">
                    <div class="pattern-data-section">
                        <div class="pattern-data-title">
                            <span class="data-icon">📈</span>
                            <span>原始数据：话题热度变化（近6个月）</span>
                            <span class="pattern-confidence-badge">评论时间序列分析</span>
                        </div>
                        <table class="pattern-data-table">
                            <thead>
                                <tr><th>话题</th><th>8月</th><th>9月</th><th>10月</th><th>11月</th><th>12月</th><th>1月</th><th>趋势</th></tr>
                            </thead>
                            <tbody id="trendTableBody">
                                <tr>
                                    <td><strong>养生</strong></td>
                                    <td>14</td><td>46</td><td>29</td><td>41</td>
                                    <td style="color: #10b981; font-weight: 700;">61</td>
                                    <td>28</td>
                                    <td><span style="color: #10b981;">↑ +100%</span></td>
                                </tr>
                                <tr>
                                    <td><strong>睡眠</strong></td>
                                    <td>6</td><td>7</td><td>8</td><td>3</td>
                                    <td>8</td>
                                    <td style="color: #10b981; font-weight: 700;">9</td>
                                    <td><span style="color: #10b981;">↑ +50%</span></td>
                                </tr>
                                <tr>
                                    <td>太极</td>
                                    <td>2</td><td>3</td><td>2</td>
                                    <td style="color: #10b981;">6</td>
                                    <td>3</td><td>1</td>
                                    <td><span style="color: #ef4444;">↓ -50%</span></td>
                                </tr>
                                <tr>
                                    <td>八段锦</td>
                                    <td>0</td><td>2</td><td>1</td><td>2</td><td>2</td>
                                    <td style="color: #10b981;">3</td>
                                    <td><span style="color: #10b981;">↑ +50%</span></td>
                                </tr>
                                <tr>
                                    <td>穴位</td>
                                    <td>2</td><td>3</td><td>2</td><td>0</td><td>2</td><td>0</td>
                                    <td><span style="color: #94a3b8;">→ 低频</span></td>
                                </tr>
                                <tr>
                                    <td>气功</td>
                                    <td>0</td><td>1</td><td>1</td><td>0</td><td>2</td><td>0</td>
                                    <td><span style="color: #94a3b8;">→ 低频</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="pattern-viz-section">
                        <div class="pattern-viz-title">
                            <span class="viz-icon">🔥</span>
                            <span>话题热度趋势图</span>
                        </div>
                        <div style="height: 280px; position: relative;">
                            <canvas id="trendChart"></canvas>
                        </div>
                        <div class="chart-insight" id="trendInsight">
                            <div class="chart-insight-title">📖 关键发现</div>
                            <div class="chart-insight-content">
                                <strong style="color: #10b981;">🔥 养生话题主导：</strong>12月峰值61次，核心话题稳定<br>
                                <strong style="color: #10b981;">🔥 睡眠稳步上升：</strong>近6个月稳定增长，1月达9次<br>
                                <strong style="color: #ef4444;">⚠️ 太极热度下降：</strong>11月峰值后持续走低
                            </div>
                        </div>
                    </div>
                    <div class="pattern-conclusion-section">
                        <div class="pattern-conclusion-title">
                            <span>💡</span>
                            <span>结论与行动建议</span>
                        </div>
                        <div class="pattern-conclusion-text">
                            <strong>养生</strong>是核心话题，<strong>睡眠</strong>稳步上升是增长点。太极热度下降，建议寻找新角度或结合睡眠话题。
                        </div>
                        <div class="pattern-actions">
                            <span class="pattern-action do">✅ 持续产出「养生」核心内容</span>
                            <span class="pattern-action do">✅ 制作「改善睡眠」系列</span>
                            <span class="pattern-action avoid">⚠️ 太极内容需找新角度</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 模式42: 高赞特征 -->
            <div class="sub-pattern-content" id="tab8-sub5">
                <div class="pattern-detail">
                    <div class="pattern-data-section">
                        <div class="pattern-data-title">
                            <span class="data-icon">👍</span>
                            <span>原始数据：高赞评论特征分析</span>
                            <span class="pattern-confidence-badge">Top 100 分析</span>
                        </div>
                        <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px; padding: 16px;">
                            <div style="text-align: center; padding: 16px; background: #0f172a; border-radius: 8px;">
                                <div style="font-size: 1.8em; font-weight: 700; color: #06b6d4;">111字</div>
                                <div style="font-size: 0.85em; color: #94a3b8;">平均长度</div>
                            </div>
                            <div style="text-align: center; padding: 16px; background: #0f172a; border-radius: 8px;">
                                <div style="font-size: 1.8em; font-weight: 700; color: #10b981;">35%</div>
                                <div style="font-size: 0.85em; color: #94a3b8;">含个人经历</div>
                            </div>
                            <div style="text-align: center; padding: 16px; background: #0f172a; border-radius: 8px;">
                                <div style="font-size: 1.8em; font-weight: 700; color: #f59e0b;">8%</div>
                                <div style="font-size: 0.85em; color: #94a3b8;">含问句</div>
                            </div>
                            <div style="text-align: center; padding: 16px; background: #0f172a; border-radius: 8px;">
                                <div style="font-size: 1.8em; font-weight: 700; color: #8b5cf6;">1,700</div>
                                <div style="font-size: 0.85em; color: #94a3b8;">最高赞数</div>
                            </div>
                        </div>
                        <table class="pattern-data-table" style="margin-top: 16px;">
                            <thead>
                                <tr><th>评论类型</th><th>示例</th><th>获赞</th><th>特点</th></tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><span style="color: #f59e0b;">📝 笔记总结型</span></td>
                                    <td>「筆記：1.每天喝足夠水...」</td>
                                    <td style="color: #f59e0b; font-weight: 600;">1,700</td>
                                    <td>帮别人整理要点</td>
                                </tr>
                                <tr>
                                    <td><span style="color: #10b981;">🙋 个人见证型</span></td>
                                    <td>「三個月來照您説的做...指數改善」</td>
                                    <td style="color: #10b981; font-weight: 600;">677</td>
                                    <td>分享真实效果</td>
                                </tr>
                                <tr>
                                    <td><span style="color: #8b5cf6;">🎁 秘方分享型</span></td>
                                    <td>「送給大家我的秘方兒...」</td>
                                    <td style="color: #8b5cf6; font-weight: 600;">533</td>
                                    <td>提供额外价值</td>
                                </tr>
                                <tr>
                                    <td><span style="color: #06b6d4;">📚 深度补充型</span></td>
                                    <td>「所有向上的動作都是吸氣...」</td>
                                    <td style="color: #06b6d4; font-weight: 600;">408</td>
                                    <td>补充专业知识</td>
                                </tr>
                                <tr>
                                    <td><span style="color: #ec4899;">💬 金句型</span></td>
                                    <td>「快樂才是長壽吧」</td>
                                    <td style="color: #ec4899; font-weight: 600;">320</td>
                                    <td>简洁有力</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="pattern-viz-section">
                        <div class="pattern-viz-title">
                            <span class="viz-icon">👤</span>
                            <span>活跃用户画像</span>
                        </div>
                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; padding: 16px;">
                            <div style="padding: 16px; background: #0f172a; border-radius: 8px; border-left: 3px solid #10b981;">
                                <div style="font-weight: 600; color: #10b981; margin-bottom: 8px;">重度用户 ~5%</div>
                                <div style="font-size: 0.85em; color: #94a3b8;">评论>20条</div>
                                <div style="font-size: 0.85em; color: #64748b; margin-top: 4px;">需求：深度内容、进阶技巧</div>
                            </div>
                            <div style="padding: 16px; background: #0f172a; border-radius: 8px; border-left: 3px solid #f59e0b;">
                                <div style="font-weight: 600; color: #f59e0b; margin-bottom: 8px;">活跃用户 ~10%</div>
                                <div style="font-size: 0.85em; color: #94a3b8;">评论10-20条</div>
                                <div style="font-size: 0.85em; color: #64748b; margin-top: 4px;">需求：系统教程、互动问答</div>
                            </div>
                            <div style="padding: 16px; background: #0f172a; border-radius: 8px; border-left: 3px solid #64748b;">
                                <div style="font-weight: 600; color: #94a3b8; margin-bottom: 8px;">普通用户 ~85%</div>
                                <div style="font-size: 0.85em; color: #94a3b8;">评论<10条</div>
                                <div style="font-size: 0.85em; color: #64748b; margin-top: 4px;">需求：基础科普、快速获取</div>
                            </div>
                        </div>
                        <div class="chart-insight" id="topCommentsInsight">
                            <div class="chart-insight-title">📖 数据解读</div>
                            <div class="chart-insight-content">
                                <strong>笔记类评论获赞最高（1,700赞）</strong>→ 在视频中鼓励观众总结笔记并分享<br>
                                <strong>个人经历分享受欢迎</strong>→ 邀请观众分享自己的实践效果<br>
                                <strong>长评论获赞高（平均111字）</strong>→ 提问引导观众写详细评论
                            </div>
                        </div>
                        <!-- 真实高赞评论示例 -->
                        <div id="highLikedExamples" style="margin-top: 12px;"></div>
                    </div>
                    <div class="pattern-conclusion-section">
                        <div class="pattern-conclusion-title">
                            <span>💡</span>
                            <span>结论与行动建议</span>
                        </div>
                        <div class="pattern-conclusion-text">
                            高赞评论以<strong>笔记总结</strong>和<strong>个人经历分享</strong>为主，建议在视频中引导用户分享自己的经验和笔记。
                        </div>
                        <div class="pattern-actions">
                            <span class="pattern-action do">✅ 鼓励观众分享笔记</span>
                            <span class="pattern-action do">✅ 邀请观众分享经历</span>
                            <span class="pattern-action do">✅ 用提问引导详细评论</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 模式详情面板 -->
    <div class="pattern-modal-overlay" id="patternModalOverlay" onclick="closePatternModal()"></div>
    <div class="pattern-modal" id="patternModal">
        <div class="pattern-modal-header">
            <div class="pattern-modal-title">
                <span class="pattern-modal-badge" id="patternModalBadge">模式4</span>
                <span class="pattern-modal-name" id="patternModalName">内容类型决定天花板</span>
            </div>
            <button class="pattern-modal-close" onclick="closePatternModal()">&times;</button>
        </div>
        <div class="pattern-modal-body" id="patternModalBody">
            <!-- 动态内容将在此处填充 -->
        </div>
    </div>

    <!-- 外部脚本 - 模块化加载 -->
    <script src="js/insight-core.js"></script>
    <script src="js/insight-charts.js"></script>
    <script src="js/insight-report.js"></script>
    <script src="js/insight-user.js"></script>
    <script src="js/insight-global.js"></script>
    <script src="js/insight-content.js"></script>
    <script src="js/insight.js"></script>
    <script src="js/arbitrage.js"></script>

    <!-- 跳转到创作者行动中心 -->
    <script>
        function goToCreatorAction(tab, source) {
            const keyword = typeof getKeywordFromURL === 'function' ? getKeywordFromURL() : '养生';
            const url = `creator-action.html?keyword=${encodeURIComponent(keyword)}&tab=${tab}&source=${source}`;
            window.location.href = url;
            return false;
        }

        // 更新创作者行动中心入口链接
        document.addEventListener('DOMContentLoaded', function() {
            const link = document.getElementById('actionCenterLink');
            if (link) {
                const keyword = typeof getKeywordFromURL === 'function' ? getKeywordFromURL() : '养生';
                link.href = `creator-action.html?keyword=${encodeURIComponent(keyword)}`;
            }
        });
    </script>
</body>
</html>
