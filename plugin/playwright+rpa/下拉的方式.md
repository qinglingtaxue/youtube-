# YouTube Studio 视频下载流程 - 下拉翻页方式

## 概述

使用 Playwright MCP 通过翻页（下拉）方式从 YouTube Studio 播放列表批量下载视频。

## 适用场景

- 需要下载播放列表中特定范围的视频（如 121-130 集）
- 视频数量较多，需要通过翻页定位
- 已知目标集数，但不知道 video ID

## 下载流程

### 1. 导航到播放列表页面

```
URL: https://studio.youtube.com/playlist/{PLAYLIST_ID}/videos
示例: https://studio.youtube.com/playlist/PLjDLbyA7SjEnYZW2IyqKuASGHepoA175i/videos
```

### 2. 翻页定位目标视频

YouTube Studio 播放列表每页显示 30 条视频，按发布时间倒序排列：
- 第 1 页：最新的 30 条（如 171-200）
- 第 2 页：次新的 30 条（如 141-170）
- 第 3 页：继续往前（如 111-140）

**翻页方法**：点击页面底部的"下一页"按钮或页码

### 3. 获取视频 ID

在播放列表页面，每个视频行包含 video ID：
- 从缩略图链接中提取
- 或从"编辑"按钮的 href 中提取

**示例 ID 映射（121-130 集）**：
```
130: aTAdQ1Wvh5k (中原皇清国覆灭记 上)
129: BnxSLfaw7ao (中原皇清国覆灭记 下)
128: przjlJk3HHQ (绑架抠门富豪 上)
127: AZO-PLk5GpQ (绑架抠门富豪 下)
126: OKp4n97h3MQ ("网红"变"亡"红)
125: S31mHtUljxU (预言自己死亡的老汉)
124: XxnBYstfvAg (傻子，疯子，诈骗犯)
123: oagHjuobfqo (世界上最"靠谱"的杂志)
122: 1ENdvVBXDBQ (地窖中的罪恶 上)
121: Q8lZ74edHFE (地窖中的罪恶 下)
```

### 4. 详情页下载方式（推荐）

**为什么选择详情页而不是列表页**：
- 详情页"选项"按钮始终可见，无需 hover
- 页面 DOM 更简洁，节省 token
- 更稳定可靠

**下载步骤**：
1. 导航到视频详情页：`https://studio.youtube.com/video/{VIDEO_ID}/edit`
2. 点击页面右上角的"选项"按钮
3. 在弹出菜单中点击"下载"
4. 导航到下一个视频，重复以上步骤

**Playwright 操作示例**：
```javascript
// 1. 导航到详情页
await page.goto('https://studio.youtube.com/video/aTAdQ1Wvh5k/edit');

// 2. 点击选项按钮
await page.getByRole('button', { name: '选项' }).click();

// 3. 点击下载
await page.getByRole('menuitem', { name: '下载' }).click();
```

## 下载位置

文件默认下载到 Playwright MCP 配置的目录：
```
/Users/su/Downloads/3d_games/.playwright-mcp/
```

文件命名格式：`{集数}-{标题}.mp4`

## 常见问题

### 浏览器被占用 (Browser is already in use)

解决方案：
```bash
# 终止浏览器进程
pkill -f "mcp-chrome-4b6d14a"

# 删除锁文件
rm -f /Users/su/Library/Caches/ms-playwright/mcp-chrome-4b6d14a/SingletonLock
rm -f /Users/su/Library/Caches/ms-playwright/mcp-chrome-4b6d14a/SingletonSocket
rm -f /Users/su/Library/Caches/ms-playwright/mcp-chrome-4b6d14a/SingletonCookie
```

### 下载速度

- 每个视频约 100-200 MB
- 可以并行触发多个下载（导航到下一个视频不会中断之前的下载）

## 下载记录

| 日期 | 集数范围 | 数量 | 状态 |
|------|----------|------|------|
| 2026-01-08 | 107-110 | 4 | 完成 |
| 2026-01-09 | 121-130 | 10 | 完成 |

## 完整流程示意

```
播放列表页面 → 翻页定位 → 识别 video ID → 详情页下载
     ↓
 第1页(171-200)
     ↓ 下一页
 第2页(141-170)
     ↓ 下一页
 第3页(111-140) ← 目标范围 121-130 在这里
     ↓
 提取每个视频的 ID
     ↓
 逐个导航到 /video/{id}/edit
     ↓
 选项按钮 → 下载菜单
```
