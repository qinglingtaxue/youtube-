# YouTube 内容创作流水线 - 技术栈与 MCP 清单

> 日期：2026-01-17
> 状态：规划完成

---

## 一、核心技术栈

### 1.1 编程语言与环境

| 技术 | 版本要求 | 用途 | 官方文档 |
|------|----------|------|----------|
| **Python** | 3.10+ | 主力开发语言 | https://docs.python.org/3/ |
| **uv** | latest | Python 包管理（替代 pip） | https://github.com/astral-sh/uv |
| **Node.js** | 18+ | 部分 Hook 运行时 | https://nodejs.org/docs/ |
| **bun** | latest | Node.js 包管理（可选） | https://bun.sh/docs |

**安装命令**：
```bash
# Python (macOS 通常已预装)
python3 --version

# uv
curl -LsSf https://astral.sh/uv/install.sh | sh

# Node.js
brew install node

# bun (可选)
curl -fsSL https://bun.sh/install | bash
```

---

### 1.2 视频下载与处理

| 技术 | 版本要求 | 用途 | 官方文档 |
|------|----------|------|----------|
| **yt-dlp** | ≥2025.1.0 | YouTube 视频/字幕下载 | https://github.com/yt-dlp/yt-dlp |
| **FFmpeg** | ≥6.0 | 音视频编解码、转换、合成 | https://ffmpeg.org/documentation.html |
| **ImageMagick** | ≥7.0 | 图片处理、封面制作 | https://imagemagick.org/script/command-line-processing.php |

**安装命令**：
```bash
# Homebrew (macOS)
brew install yt-dlp
brew install ffmpeg
brew install imagemagick

# 验证安装
yt-dlp --version
ffmpeg -version
magick --version
```

**yt-dlp 高质量下载配置**：
```bash
# 安装 PO Token Provider (解锁 1080p/4K)
# 参考: https://github.com/coletdjnz/yt-dlp-youtube-oauth2
/opt/homebrew/Cellar/yt-dlp/$(yt-dlp --version)/libexec/bin/python -m pip install bgutil-ytdlp-pot-provider
```

---

### 1.3 语音识别与 TTS

| 技术 | 用途 | 官方文档 |
|------|------|----------|
| **OpenAI Whisper** | 语音转文字（本地运行） | https://github.com/openai/whisper |
| **ElevenLabs API** | 英文 TTS 配音（可选） | https://elevenlabs.io/docs |
| **MiniMax API** | 中文 TTS 配音（可选） | https://platform.minimaxi.com/document |

**安装命令**：
```bash
# Whisper
uv pip install openai-whisper

# 验证
whisper --help
```

**Whisper 模型选择**：
| 模型 | 大小 | 速度 | 准确度 | 推荐场景 |
|------|------|------|--------|----------|
| tiny | ~1GB | 最快 | 较低 | 快速预览 |
| base | ~1GB | 快 | 中等 | **日常使用（推荐）** |
| small | ~2GB | 中 | 较高 | 重要内容 |
| medium | ~5GB | 慢 | 高 | 专业场景 |
| large | ~10GB | 最慢 | 最高 | 高精度需求 |

---

### 1.4 自动化工具

| 技术 | 用途 | 官方文档 |
|------|------|----------|
| **Playwright** | 浏览器自动化 | https://playwright.dev/python/docs/intro |
| **PyAutoGUI** | RPA（模拟鼠标键盘） | https://pyautogui.readthedocs.io/ |

**安装命令**：
```bash
# Playwright
uv pip install playwright
playwright install chromium

# PyAutoGUI
uv pip install pyautogui
```

---

### 1.5 数据存储

| 技术 | 用途 | 官方文档 |
|------|------|----------|
| **SQLite** | 本地数据库（元数据存储） | https://www.sqlite.org/docs.html |
| **SQLAlchemy** | Python ORM | https://docs.sqlalchemy.org/ |

**安装命令**：
```bash
# SQLite (macOS 内置)
sqlite3 --version

# SQLAlchemy
uv pip install sqlalchemy
```

---

### 1.6 CLI 与工具

| 技术 | 用途 | 官方文档 |
|------|------|----------|
| **Click** | CLI 框架 | https://click.palletsprojects.com/ |
| **Typer** | CLI 框架（备选） | https://typer.tiangolo.com/ |
| **Rich** | 终端美化输出 | https://rich.readthedocs.io/ |
| **PyYAML** | YAML 配置读写 | https://pyyaml.org/wiki/PyYAMLDocumentation |

**安装命令**：
```bash
uv pip install click rich pyyaml
# 或
uv pip install typer rich pyyaml
```

---

### 1.7 版本控制

| 技术 | 用途 | 官方文档 |
|------|------|----------|
| **Git** | 版本控制 | https://git-scm.com/doc |

**安装命令**：
```bash
brew install git
git --version
```

---

## 二、MCP 服务器

### 2.1 MCP 总览

| MCP | 必要性 | 用途 | 官方仓库 |
|-----|--------|------|----------|
| **@playwright/mcp** | ✅ 必须 | 浏览器自动化 | https://github.com/anthropics/mcp-playwright |
| **mcp-server-fetch** | ✅ 推荐 | 网页内容抓取 | https://github.com/anthropics/mcp-fetch |
| **tavily** | ⚠️ 推荐 | 实时搜索 | https://github.com/tavily-ai/tavily-mcp |
| **@anthropic/mcp-chrome** | ⚠️ 备选 | Chrome 控制 | https://github.com/anthropics/anthropic-quickstarts |
| **Context7** | ⚠️ 可选 | 最新文档查询 | https://github.com/upstash/context7 |

---

### 2.2 必须：@playwright/mcp

**用途**：YouTube Studio 自动化（发布、复盘）

**官方文档**：https://github.com/anthropics/mcp-playwright

**功能**：
- `browser_navigate` - 导航到 URL
- `browser_snapshot` - 获取页面快照（accessibility tree）
- `browser_click` - 点击元素
- `browser_type` - 输入文本
- `browser_file_upload` - 上传文件（视频上传关键）
- `browser_take_screenshot` - 截图

**配置**：
```json
{
  "mcpServers": {
    "playwright": {
      "command": "npx",
      "args": ["@playwright/mcp@latest"]
    }
  }
}
```

**使用场景**：
```
发布阶段：
├── 导航到 YouTube Studio
├── 点击上传按钮
├── 上传视频文件
├── 填写标题/描述/标签
├── 上传封面
└── 发布/定时发布

复盘阶段：
├── 导航到 Analytics 页面
├── 获取页面快照
└── 提取观看数/CTR 等数据
```

---

### 2.3 推荐：mcp-server-fetch

**用途**：调研阶段网页内容抓取

**官方文档**：https://github.com/anthropics/mcp-fetch

**功能**：
- 获取网页内容并转换为 Markdown
- 支持动态渲染页面
- 自动处理编码

**配置**：
```json
{
  "mcpServers": {
    "fetch": {
      "command": "npx",
      "args": ["mcp-server-fetch"]
    }
  }
}
```

**使用场景**：
```
调研阶段：
├── 抓取竞品频道页面
├── 读取行业博客文章
├── 获取 YouTube 搜索结果
└── 提取视频描述和评论
```

---

### 2.4 推荐：tavily-mcp

**用途**：实时搜索热门话题、趋势追踪

**官方文档**：https://docs.tavily.com/

**GitHub**：https://github.com/tavily-ai/tavily-mcp

**功能**：
- 实时网页搜索
- 结果自动摘要
- 支持多语言

**配置**：
```json
{
  "mcpServers": {
    "tavily": {
      "command": "npx",
      "args": ["tavily-mcp"],
      "env": {
        "TAVILY_API_KEY": "your-api-key"
      }
    }
  }
}
```

**获取 API Key**：https://app.tavily.com/

**使用场景**：
```
调研阶段：
├── 搜索当前热门话题
├── 追踪行业新闻
├── 验证信息真实性
└── 发现内容灵感
```

---

### 2.5 备选：mcp-chrome

**用途**：控制已打开的 Chrome 浏览器（保持登录状态）

**项目位置**：`/Users/su/Downloads/3d_games/mcp/mcp-chrome-extension`

**启动脚本**：
```bash
bash /Users/su/Downloads/3d_games/mcp/load_mcp_chrome.sh
```

**验证**：
```bash
curl http://127.0.0.1:12306/health
```

**配置**：
```json
{
  "mcpServers": {
    "chrome": {
      "url": "http://127.0.0.1:12306/mcp"
    }
  }
}
```

**vs Playwright**：
| 特性 | Playwright | mcp-chrome |
|------|------------|------------|
| 启动方式 | 新建浏览器实例 | 连接已打开的 Chrome |
| 登录状态 | 需要重新登录 | 保持现有登录 |
| 适用场景 | 自动化测试 | RPA、长时间会话 |

**建议**：优先使用 Playwright，遇到登录状态问题时切换到 mcp-chrome。

---

### 2.6 可选：Context7

**用途**：获取最新库/框架文档

**官方文档**：https://context7.com/

**GitHub**：https://github.com/upstash/context7

**配置**：
```json
{
  "mcpServers": {
    "context7": {
      "command": "npx",
      "args": ["@upstash/context7-mcp"]
    }
  }
}
```

**使用场景**：
```
开发阶段：
├── 查询 yt-dlp 最新参数
├── 查阅 FFmpeg 新版特性
└── 了解 YouTube API 变更
```

---

## 三、完整 MCP 配置

### 3.1 推荐配置（3 个 MCP）

```json
// ~/.config/claude/claude_desktop_config.json
// 或项目 .claude/settings.json

{
  "mcpServers": {
    "playwright": {
      "command": "npx",
      "args": ["@playwright/mcp@latest"]
    },
    "fetch": {
      "command": "npx",
      "args": ["mcp-server-fetch"]
    },
    "tavily": {
      "command": "npx",
      "args": ["tavily-mcp"],
      "env": {
        "TAVILY_API_KEY": "${TAVILY_API_KEY}"
      }
    }
  }
}
```

### 3.2 最小配置（1 个 MCP）

```json
{
  "mcpServers": {
    "playwright": {
      "command": "npx",
      "args": ["@playwright/mcp@latest"]
    }
  }
}
```

---

## 四、依赖安装汇总

### 4.1 一键安装脚本

```bash
#!/bin/bash
# install_dependencies.sh

echo "===== 安装系统工具 ====="
brew install yt-dlp ffmpeg imagemagick git

echo "===== 安装 Python 环境 ====="
curl -LsSf https://astral.sh/uv/install.sh | sh
source ~/.bashrc  # 或 ~/.zshrc

echo "===== 创建虚拟环境 ====="
uv venv
source .venv/bin/activate

echo "===== 安装 Python 依赖 ====="
uv pip install openai-whisper
uv pip install playwright pyautogui
uv pip install click rich pyyaml
uv pip install sqlalchemy
uv pip install httpx aiohttp

echo "===== 安装 Playwright 浏览器 ====="
playwright install chromium

echo "===== 验证安装 ====="
yt-dlp --version
ffmpeg -version
python3 -c "import whisper; print('Whisper OK')"
python3 -c "import playwright; print('Playwright OK')"

echo "===== 完成 ====="
```

### 4.2 requirements.txt

```
# 核心工具
openai-whisper>=20230918

# 自动化
playwright>=1.40.0
pyautogui>=0.9.54

# CLI
click>=8.1.0
rich>=13.0.0
pyyaml>=6.0

# 数据
sqlalchemy>=2.0.0

# HTTP
httpx>=0.25.0
aiohttp>=3.9.0

# 工具
python-dotenv>=1.0.0
```

---

## 五、技术栈与工作流映射

```
┌─────────────────────────────────────────────────────────────────────────┐
│                        工作流阶段 → 技术栈映射                            │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  调研阶段                                                                │
│  ├── yt-dlp → 视频/字幕下载                                             │
│  ├── mcp-server-fetch → 网页内容抓取                                    │
│  ├── tavily → 实时搜索                                                  │
│  └── SQLite → 存储元数据                                                │
│                                                                         │
│  策划阶段                                                                │
│  ├── Claude API → 内容生成（通过 Claude Code）                          │
│  ├── Context7 → 查阅最新文档（可选）                                    │
│  └── 42plugin Skills → content-creator, ideation                       │
│                                                                         │
│  制作阶段                                                                │
│  ├── FFmpeg → 音视频合成                                                │
│  ├── ImageMagick → 封面制作                                             │
│  ├── Whisper → 字幕生成                                                 │
│  └── TTS API → 配音生成（ElevenLabs/MiniMax）                          │
│                                                                         │
│  发布阶段                                                                │
│  ├── @playwright/mcp → YouTube Studio 自动化                           │
│  ├── PyAutoGUI → RPA 执行（综合模式）                                   │
│  └── mcp-chrome → 备选（保持登录）                                      │
│                                                                         │
│  复盘阶段                                                                │
│  ├── @playwright/mcp → 抓取 Analytics 数据                              │
│  └── SQLite → 存储历史数据                                              │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## 六、参考资料汇总

### 核心工具
| 工具 | 官方文档 |
|------|----------|
| Python | https://docs.python.org/3/ |
| uv | https://github.com/astral-sh/uv |
| yt-dlp | https://github.com/yt-dlp/yt-dlp |
| FFmpeg | https://ffmpeg.org/documentation.html |
| ImageMagick | https://imagemagick.org/script/command-line-processing.php |
| Whisper | https://github.com/openai/whisper |
| Playwright | https://playwright.dev/python/docs/intro |
| SQLite | https://www.sqlite.org/docs.html |

### MCP 服务器
| MCP | 官方仓库 |
|-----|----------|
| @playwright/mcp | https://github.com/anthropics/mcp-playwright |
| mcp-server-fetch | https://github.com/anthropics/mcp-fetch |
| tavily-mcp | https://github.com/tavily-ai/tavily-mcp |
| Context7 | https://github.com/upstash/context7 |

### TTS 服务
| 服务 | 官方文档 |
|------|----------|
| ElevenLabs | https://elevenlabs.io/docs |
| MiniMax | https://platform.minimaxi.com/document |

### 42plugin
| 资源 | 地址 |
|------|------|
| 42plugin 平台 | https://42plugin.com |
| 42plugin CLI | https://github.com/anthropics/42plugin |

---

*文档版本: 1.0*
*更新日期: 2026-01-17*
